<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografica: Apparato Respiratorio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
        .flow-step { transition: transform 0.3s, box-shadow 0.3s; }
        .flow-step:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        .flow-arrow { color: #003f5c; }
        .nav-link { transition: color 0.3s; }
        .nav-link:hover { color: #93C5FD; }
        .dsa-mode {
            font-family: 'Lexend', sans-serif;
            background-color: #fdfaf5 !important;
            letter-spacing: 0.05em;
            line-height: 1.75;
        }
        .dsa-mode #main-header, .dsa-mode #main-footer {
            background-color: #000000 !important;
            background-image: none !important;
        }
        .dsa-mode #main-header h1, .dsa-mode #main-header .nav-link, .dsa-mode #main-footer p, .dsa-mode #accessibility-toggle, .dsa-mode #lang-toggle {
            color: #ffffff !important;
        }
        .dsa-mode #accessibility-toggle, .dsa-mode #lang-toggle { border: 1px solid #ffffff; }
        .dsa-mode .bg-white { background-color: #fffdfa; border: 1px solid #e0e0e0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode div { color: #34495e; }
        .tts-button {
            cursor: pointer;
            display: inline-block;
            margin-left: 8px;
            vertical-align: middle;
            color: #64748b;
            transition: color 0.2s;
        }
        .tts-button:hover { color: #0ea5e9; }
        .tts-button.playing { color: #0ea5e9; }
    </style>
</head>
<body class="text-gray-800">

    <header id="main-header" class="bg-[#1E3A8A] text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold" data-lang-key="siteTitle">Semeiotica Vet G.A.</h1>
            <div class="flex items-center space-x-4">
                 <a href="esame_obiettivo.html" class="nav-link font-semibold" data-lang-key="navBack">Indice Esami</a>
                <button id="accessibility-toggle" aria-label="Attiva modalità ad alta leggibilità" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilità</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#003f5c] mb-4" data-lang-key="pageTitle">Infografica: Apparato Respiratorio</h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto" data-lang-key="pageSubtitle">Guida visiva alle metodiche semiotiche per la valutazione del sistema respiratorio.</p>
        </header>

        <main class="space-y-16">
            <section>
                <h2 class="text-3xl font-bold text-center mb-8 text-[#003f5c]" data-lang-key="flowTitle">Le 4 Metodiche dell'Esame</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-center items-stretch">
                    <!-- Ispezione -->
                    <div class="flow-step bg-white rounded-lg shadow-md p-6 border-t-4 border-[#003f5c]">
                        <h3 class="font-bold text-xl mb-2" data-lang-key="step1Title">1. Ispezione</h3>
                        <p class="text-sm" data-lang-key="step1Desc">Statica (simmetria) e Dinamica (FR, tipo, ritmo). Osservare scolo nasale e tosse.</p>
                    </div>
                    
                    <!-- Palpazione -->
                    <div class="flow-step bg-white rounded-lg shadow-md p-6 border-t-4 border-[#7a5195]">
                        <h3 class="font-bold text-xl mb-2" data-lang-key="step2Title">2. Palpazione</h3>
                        <p class="text-sm" data-lang-key="step2Desc">Ricerca di dolore (pleurodinia), enfisema sottocutaneo e palpazione di laringe/trachea.</p>
                    </div>

                    <!-- Percussione -->
                    <div class="flow-step bg-white rounded-lg shadow-md p-6 border-t-4 border-[#ff764a]">
                        <h3 class="font-bold text-xl mb-2" data-lang-key="step3Title">3. Percussione</h3>
                        <p class="text-sm" data-lang-key="step3Desc">Delimitare l'area polmonare (Linea Vogel, Profilo Diaframmatico) e valutare i suoni.</p>
                    </div>

                    <!-- Auscultazione -->
                    <div class="flow-step bg-white rounded-lg shadow-md p-6 border-t-4 border-[#ffa600]">
                        <h3 class="font-bold text-xl mb-2" data-lang-key="step4Title">4. Auscultazione</h3>
                        <p class="text-sm" data-lang-key="step4Desc">Ascoltare il Murmure Vescicolare (MV) e ricercare rumori patologici (rantoli, sibili).</p>
                    </div>
                </div>
            </section>

            <section class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                <!-- Suoni Percussori -->
                <div class="bg-white rounded-lg shadow-md p-6 h-full">
                    <h3 class="text-2xl font-bold mb-4 text-[#ff764a] text-center" data-lang-key="chart1Title">Suoni della Percussione</h3>
                    <div class="space-y-4 mt-6">
                        <div class="p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                            <strong class="text-green-700" data-lang-key="perc1Title">Suono Chiaro Polmonare (Normale)</strong>
                            <p class="text-sm text-gray-600" data-lang-key="perc1Desc">Risonante. Indica parenchima sano pieno d'aria.</p>
                        </div>
                        <div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg">
                            <strong class="text-red-700" data-lang-key="perc2Title">Suono Ottuso</strong>
                            <p class="text-sm text-gray-600" data-lang-key="perc2Desc">Smorzato, sordo. Indica assenza d'aria (consolidamento, versamento, massa).</p>
                        </div>
                        <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                            <strong class="text-blue-700" data-lang-key="perc3Title">Suono Timpanico</strong>
                            <p class="text-sm text-gray-600" data-lang-key="perc3Desc">Risonante come un tamburo. Indica eccesso d'aria (pneumotorace, enfisema).</p>
                        </div>
                    </div>
                </div>
                <!-- Rumori Auscultatori -->
                <div class="bg-white rounded-lg shadow-md p-6 h-full">
                    <h3 class="text-2xl font-bold mb-4 text-[#ffa600] text-center" data-lang-key="chart2Title">Principali Rumori Auscultatori</h3>
                    <div class="space-y-4 mt-6">
                        <div class="flex items-start">
                            <svg class="w-6 h-6 text-sky-600 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"></path></svg>
                            <div>
                                <strong data-lang-key="ausc1Title">Sibili</strong>
                                <p class="text-sm text-gray-600" data-lang-key="ausc1Desc">Fischi musicali (espiratori). Indicano broncospasmo (asma).</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <svg class="w-6 h-6 text-blue-600 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>
                            <div>
                                <strong data-lang-key="ausc2Title">Rantoli Crepitanti (Fini)</strong>
                                <p class="text-sm text-gray-600" data-lang-key="ausc2Desc">Capelli sfregati (fine inspirazione). Indicano edema, polmonite interstiziale.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                             <svg class="w-6 h-6 text-indigo-600 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm11 0c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5z"></path></svg>
                            <div>
                                <strong data-lang-key="ausc3Title">Rantoli Gorgoglianti (Grossolani)</strong>
                                <p class="text-sm text-gray-600" data-lang-key="ausc3Desc">Liquido che bolle (entrambe le fasi). Indicano secrezioni in bronchi/trachea.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <svg class="w-6 h-6 text-red-600 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            <div>
                                <strong data-lang-key="ausc4Title">Sfregamenti Pleurici</strong>
                                <p class="text-sm text-gray-600" data-lang-key="ausc4Desc">Cuoio sfregato (entrambe le fasi). Indicano pleurite secca.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer id="main-footer" class="bg-gray-800 text-white mt-12">
             <div class="container mx-auto px-6 py-4 text-center">
                 <p data-lang-key="footerText">&copy; 2024 Semeiotica Veterinaria. Creato da Sara Busechian.</p>
             </div>
        </footer>
    </div>

    <script>
        const translations = {
            siteTitle: { it: 'Semeiotica Vet G.A.', en: 'Veterinary Semeiotics L.A.' },
            navBack: { it: 'Indice Esami', en: 'Exams Index' },
            accessibility: { it: 'Accessibilità', en: 'Accessibility' },
            pageTitle: { it: 'Infografica: Apparato Respiratorio', en: 'Infographic: Respiratory System' },
            pageSubtitle: { it: 'Guida visiva alle metodiche semiotiche per la valutazione del sistema respiratorio.', en: 'A visual guide to the semiotic methods for assessing the respiratory system.' },
            flowTitle: { it: "Le 4 Metodiche dell'Esame", en: 'The 4 Examination Methods' },
            step1Title: { it: '1. Ispezione', en: '1. Inspection' },
            step1Desc: { it: 'Statica (simmetria) e Dinamica (FR, tipo, ritmo). Osservare scolo nasale e tosse.', en: 'Static (symmetry) and Dynamic (RR, type, rhythm). Observe nasal discharge and cough.' },
            step2Title: { it: '2. Palpazione', en: '2. Palpation' },
            step2Desc: { it: 'Ricerca di dolore (pleurodinia), enfisema sottocutaneo e palpazione di laringe/trachea.', en: 'Check for pain (pleurodynia), subcutaneous emphysema, and palpate larynx/trachea.' },
            step3Title: { it: '3. Percussione', en: '3. Percussion' },
            step3Desc: { it: "Delimitare l'area polmonare (Linea Vogel, Profilo Diaframmatico) e valutare i suoni.", en: 'Delineate the lung field (Vogel\'s Line, Diaphragmatic Profile) and assess sounds.' },
            step4Title: { it: '4. Auscultazione', en: '4. Auscultation' },
            step4Desc: { it: 'Ascoltare il Murmure Vescicolare (MV) e ricercare rumori patologici (rantoli, sibili).', en: 'Listen to the Vesicular Murmur (VM) and check for pathological sounds (crackles, wheezes).' },
            chart1Title: { it: 'Suoni della Percussione', en: 'Percussion Sounds' },
            perc1Title: { it: 'Suono Chiaro Polmonare (Normale)', en: 'Clear Lung Sound (Normal)' },
            perc1Desc: { it: "Risonante. Indica parenchima sano pieno d'aria.", en: 'Resonant. Indicates healthy air-filled parenchyma.' },
            perc2Title: { it: 'Suono Ottuso', en: 'Dull Sound' },
            perc2Desc: { it: 'Smorzato, sordo. Indica assenza d\'aria (consolidamento, versamento, massa).', en: 'Muffled, flat. Indicates absence of air (consolidation, effusion, mass).' },
            perc3Title: { it: 'Suono Timpanico', en: 'Tympanic Sound' },
            perc3Desc: { it: "Risonante come un tamburo. Indica eccesso d'aria (pneumotorace, enfisema).", en: 'Drum-like resonance. Indicates excess air (pneumothorax, emphysema).' },
            chart2Title: { it: 'Principali Rumori Auscultatori', en: 'Main Auscultatory Sounds' },
            ausc1Title: { it: 'Sibili', en: 'Wheezes' },
            ausc1Desc: { it: 'Fischi musicali (espiratori). Indicano broncospasmo (asma).', en: 'Musical whistles (expiratory). Indicate bronchospasm (asthma).' },
            ausc2Title: { it: 'Rantoli Crepitanti (Fini)', en: 'Fine Crackles' },
            ausc2Desc: { it: 'Capelli sfregati (fine inspirazione). Indicano edema, polmonite interstiziale.', en: 'Rubbing hair (end-inspiration). Indicate edema, interstitial pneumonia.' },
            ausc3Title: { it: 'Rantoli Gorgoglianti (Grossolani)', en: 'Coarse Crackles' },
            ausc3Desc: { it: 'Liquido che bolle (entrambe le fasi). Indicano secrezioni in bronchi/trachea.', en: 'Bubbling liquid (both phases). Indicate secretions in bronchi/trachea.' },
            ausc4Title: { it: 'Sfregamenti Pleurici', en: 'Pleural Friction Rubs' },
            ausc4Desc: { it: 'Cuoio sfregato (entrambe le fasi). Indicano pleurite secca.', en: 'Leather rubbing (both phases). Indicate dry pleuritis.' },
            footerText: { it: '&copy; 2024 Semeiotica Veterinaria. Creato da Sara Busechian.', en: '&copy; 2024 Veterinary Semeiotics. Created by Sara Busechian.' }
        };

        let currentLanguage = localStorage.getItem('language') || 'it';
        const accessibilityToggle = document.getElementById('accessibility-toggle');
        const langToggle = document.getElementById('lang-toggle');
        const body = document.body;
        const synth = window.speechSynthesis;
        let currentUtterance = null;
        let activeTTSButton = null;

        function speak(text, button) {
            if (synth.speaking) {
                if (activeTTSButton === button && synth.paused) {
                    synth.resume();
                    button.classList.add('playing');
                } else if (activeTTSButton === button && !synth.paused) {
                    synth.pause();
                    button.classList.remove('playing');
                } else {
                    startSpeaking(text, button);
                }
            } else {
                startSpeaking(text, button);
            }
        }

        function startSpeaking(text, button) {
            if (synth.speaking) {
                synth.cancel();
            }
            if(activeTTSButton && activeTTSButton !== button) {
                activeTTSButton.classList.remove('playing');
            }

            currentUtterance = new SpeechSynthesisUtterance(text);
            currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
            activeTTSButton = button;
            button.classList.add('playing');

            currentUtterance.onend = () => {
                if (activeTTSButton === button) {
                    button.classList.remove('playing');
                    activeTTSButton = null;
                }
            };
            currentUtterance.onerror = () => {
                if (activeTTSButton === button) {
                    button.classList.remove('playing');
                    activeTTSButton = null;
                }
            };
            synth.speak(currentUtterance);
        }

        function setupTTSListeners() {
            document.querySelectorAll('.tts-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const parent = e.currentTarget.parentNode;
                    let textToRead = '';
                    
                    if (parent.dataset.langKey) { // Per i titoli h1/p principali
                         const key = parent.dataset.langKey;
                         if (translations[key] && translations[key][currentLanguage]) {
                             const tempDiv = document.createElement('div');
                             tempDiv.innerHTML = translations[key][currentLanguage];
                             if(tempDiv.querySelector('.tts-button')) tempDiv.querySelector('.tts-button').remove();
                             textToRead = tempDiv.textContent.trim().replace(/\s+/g, ' ');
                         }
                    } else { // Per le sezioni
                        const clone = parent.cloneNode(true);
                        if (clone.querySelector('.tts-button')) {
                            clone.querySelector('.tts-button').remove();
                        }
                        textToRead = clone.textContent.trim().replace(/\s+/g, ' ');
                    }
                    
                    if (textToRead) speak(textToRead, e.currentTarget);
                });
            });
        }

        const updateLanguage = (lang) => {
            document.documentElement.lang = lang;
            langToggle.textContent = lang === 'it' ? 'EN' : 'IT';
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.dataset.langKey;
                if (translations[key] && translations[key][lang]) {
                    // Controlla se l'elemento ha già un pulsante TTS prima di sovrascrivere
                    const ttsButton = element.querySelector('.tts-button');
                    element.innerHTML = translations[key][lang];
                    if (ttsButton) {
                        element.appendChild(ttsButton);
                    }
                }
            });
            setupTTSListeners();
        };

        const setA11yMode = (enabled) => {
            if (enabled) { body.classList.add('dsa-mode'); localStorage.setItem('dsa-mode', 'enabled'); } 
            else { body.classList.remove('dsa-mode'); localStorage.setItem('dsa-mode', 'disabled'); }
        };

        langToggle.addEventListener('click', () => {
            currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
            localStorage.setItem('language', currentLanguage);
            updateLanguage(currentLanguage);
        });

        accessibilityToggle.addEventListener('click', () => {
            const isEnabled = body.classList.contains('dsa-mode');
            setA11yMode(!isEnabled);
        });

        if (localStorage.getItem('dsa-mode') === 'enabled') {
            setA11yMode(true);
        }
        updateLanguage(currentLanguage);
    </script>
</body>
</html>

