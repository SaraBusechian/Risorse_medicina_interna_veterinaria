<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Titolo specifico per questa pagina -->
    <title>Riassunto: Esame Apparato Cardiocircolatorio - Semeiotica Vet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Stili Generali e dal Template */
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #333; line-height: 1.6; }
        .section-nav-link {
            transition: background-color 0.3s, color 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
            background-color: rgba(255, 255, 255, 0.1);
            white-space: nowrap;
        }
        .section-nav-link:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
        }
        .section-nav-link.active {
             background-color: white;
             color: #1E3A8A;
             cursor: default;
        }
        .content-card {
             background-color: white;
             border-radius: 0.75rem;
             box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
             padding: 1.5rem;
             margin-top: 2rem;
        }
        @media (min-width: 768px) { /* md: */
            .content-card { padding: 2.5rem; }
        }
        #page-header { position: static; }
        .scrollable-nav {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .scrollable-nav::-webkit-scrollbar { display: none; }
        .audio-container { display: flex; flex-direction: column; align-items: center; gap: 1rem; padding: 1rem; background-color: #fff7ed; /* orange-50 */ border-radius: 0.5rem; margin-top: 1.5rem; }
        .audio-container audio { width: 100%; border-radius: 0.5rem; }
        .audio-container a { display: inline-flex; align-items: center; justify-content: center; width: 100%; }
        @media (min-width: 640px) { /* sm: */
            .audio-container { flex-direction: row; }
            .audio-container audio { width: auto; flex-grow: 1; }
            .audio-container a { width: auto; }
        }

        /* Stili Specifici del Riassunto Cardiocircolatorio */
        #main-content h1, #main-content h2, #main-content h3 { color: #0d47a1; border-bottom: 2px solid #e0e0e0; padding-bottom: 8px; margin-top: 2em; }
        #main-content h1 { text-align: center; font-size: 2.2em; border-bottom: 3px solid #0d47a1; } /* Mantenuto h1 specifico */
         #main-content h2 { font-size: 1.5rem; /* text-2xl */ }
         #main-content h3 { font-size: 1.25rem; /* text-xl */ }
        #main-content ul { padding-left: 20px; list-style-type: disc; margin-top: 1rem; margin-bottom: 1rem;}
        #main-content li { margin-bottom: 10px; }
        #main-content strong { color: #1565c0; }
        #main-content .section-block { background-color: #f0f9ff; /* sky-50 */ border-left: 5px solid #0ea5e9; /* sky-500 */ padding: 15px 20px; margin: 20px 0; border-radius: 5px; }

        /* DSA Mode Styles */
        .dsa-mode { font-family: 'Lexend', sans-serif; background-color: #fdfaf5 !important; letter-spacing: 0.05em; line-height: 1.75; color: #34495e !important;}
        .dsa-mode #page-header, .dsa-mode #main-footer { background-color: #000000 !important; background-image: none !important; }
        .dsa-mode #page-header h1, .dsa-mode #main-footer p, .dsa-mode #accessibility-toggle, .dsa-mode #lang-toggle, .dsa-mode .section-nav-link { color: #ffffff !important; }
        .dsa-mode #accessibility-toggle, .dsa-mode #lang-toggle, .dsa-mode .section-nav-link { border: 1px solid #ffffff; background-color: transparent !important; }
        .dsa-mode .section-nav-link.active { background-color: #ffffff !important; color: #000000 !important; border-color: #ffffff;}
        .dsa-mode .content-card { background-color: #fffdfa !important; border: 1px solid #e0e0e0; }
        .dsa-mode #main-content h1, .dsa-mode #main-content h2, .dsa-mode #main-content h3, .dsa-mode #main-content p, .dsa-mode #main-content li, .dsa-mode #main-content strong { color: #34495e !important; }
        .dsa-mode #main-content .section-block { background-color: #fefcf7 !important; border-left-color: #5a738e; }
        .dsa-mode .audio-container { background-color: #f0eade !important; }

        /* TTS Button Styles */
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #64748b; transition: color 0.2s; }
        .tts-button:hover { color: #0ea5e9; }
        .tts-button.playing { color: #0ea5e9; }
        .dsa-mode .tts-button { color: #5a738e !important; }

        /* Print Styles */
        @media print {
            body { background-color: #fff; margin: 0; padding: 0; font-family: sans-serif; font-size: 11pt; color: #000; }
            #page-header, #main-footer, #print-button, .tts-button, .audio-container { display: none; }
            .container { max-width: 100%; padding: 1cm; box-shadow: none; border: none; margin: 0; }
            .content-card { box-shadow: none; border: none; padding: 0; margin: 0; }
            #main-content h1, #main-content h2, #main-content h3 { color: #000 !important; border-color: #ccc; margin-top: 1.5em; page-break-after: avoid; }
            #main-content h1 { font-size: 18pt; text-align: left; }
            #main-content h2 { font-size: 14pt; }
            #main-content h3 { font-size: 12pt; }
            #main-content ul { padding-left: 25px; }
            #main-content li { margin-bottom: 5px; }
            #main-content strong { color: #000 !important; font-weight: bold; }
            #main-content .section-block { border: 1px solid #ccc; padding: 10px; margin: 10px 0; background-color: #f9f9f9 !important; page-break-inside: avoid; }
            section { page-break-inside: avoid; margin-bottom: 1.5rem;}
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- === HEADER SEMPLIFICATO PER PAGINE INTERNE === -->
    <header id="page-header" class="bg-[#1E3A8A] text-white shadow-lg z-20">
        <div class="container mx-auto px-6 py-3">
            <!-- Riga Superiore: Torna all'indice + Controlli -->
            <div class="flex justify-between items-center mb-4">
                 <a href="index.html" class="inline-flex items-center text-sm font-semibold px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition" data-lang-key="backToIndex">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                    <span data-lang-key="backToIndexText">Indice Sezioni</span>
                 </a>
                 <div class="flex items-center space-x-2">
                    <button id="accessibility-toggle" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition" data-lang-key="accessibility">Accessibilit√†</button>
                    <button id="lang-toggle" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition">EN</button>
                 </div>
            </div>

            <!-- Titolo della Sezione -->
            <h1 class="text-3xl font-bold mb-4 !text-white !border-none !p-0 !text-left" data-lang-key="sectionTitleCardio">2. Apparato Cardiocircolatorio</h1>

            <!-- Navigazione Interna alla Sezione -->
            <nav class="scrollable-nav">
                 <div class="flex space-x-2 pb-2">
                     <a href="riassunto_cardiocircolatorio.html" class="section-nav-link active" data-lang-key="navSummary">Riassunto</a>
                     <a href="infografica_cardiocircolatorio.html" class="section-nav-link" data-lang-key="navInfographic">Infografica</a>
                     <a href="checklist_cardiocircolatorio.html" class="section-nav-link" data-lang-key="navChecklist">Checklist</a>
                     <a href="collaterali_cardiocircolatorio.html" class="section-nav-link" data-lang-key="navAncillary">Esami Collaterali</a>
                     <a href="quiz_cardiocircolatorio.html" class="section-nav-link" data-lang-key="navQuiz">Quiz</a>
                     <a href="#audio" class="section-nav-link" data-lang-key="navAudio">Audio</a>
                </div>
            </nav>

        </div>
    </header>
    <!-- === FINE HEADER === -->

    <!-- Main Content Container -->
    <main class="container mx-auto p-4 md:px-8 md:py-12">
        <!-- Card Contenuto -->
        <div id="main-content" class="content-card">

             <!-- Contenuto Specifico del Riassunto Cardiocircolatorio -->
            <h1 data-lang-key="pageTitle"></h1>
            <p class="section-block" data-lang-key="introText"></p>

            <div data-lang-key="section1"></div>
            <div data-lang-key="section2"></div>
            <div data-lang-key="section3"></div>
            <div data-lang-key="section4"></div>
            <div data-lang-key="section5"></div>
            <!-- Fine Contenuto Specifico -->

            <!-- Sezione Audio -->
            <div class="audio-container" id="audio">
                <audio controls class="rounded-lg">
                    <source src="audio_riassunto_cardiocircolatorio.mp3" type="audio/mpeg">
                    Audio non disponibile.
                </audio>
                <a href="audio_riassunto_cardiocircolatorio.mp3" download class="bg-orange-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-orange-600 transition duration-300">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                    <span data-lang-key="btnDownloadAudio">Scarica Audio</span>
                </a>
            </div>


            <!-- Bottone Stampa -->
            <div class="mt-12 text-center">
                 <button id="print-button" onclick="window.print()" class="bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-emerald-700 transition duration-300 inline-flex items-center" data-lang-key="btnPrint">
                     <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M5 4v3h10V4H5zm11 9H4v4h12v-4zM5 11h10v-3H5v3z"></path><path fill-rule="evenodd" d="M18 8H2a2 2 0 00-2 2v4a2 2 0 002 2h2v2a2 2 0 002 2h8a2 2 0 002-2v-2h2a2 2 0 002-2v-4a2 2 0 00-2-2zM4 10a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zm1 5a1 1 0 100 2h8a1 1 0 100-2H5z" clip-rule="evenodd"></path></svg>
                     <span data-lang-key="btnPrintText">Stampa</span> <!-- Span aggiunto per traduzione -->
                 </button>
             </div>

        </div> <!-- Fine content-card -->
    </main>

    <footer id="main-footer" class="bg-gray-800 text-white mt-16">
        <div class="container mx-auto px-6 py-4 text-center">
            <p data-lang-key="footerText">&copy; 2024 Semeiotica Veterinaria. Creato da Sara Busechian.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
             const speakerIconLarge = `<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></span>`;
             const speakerIconSmall = `<span class="tts-button"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></span>`;
             const speakerIconH2 = `<span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span>`;

            // === TRADUZIONI ===
            const translations = {
                // --- Header ---
                backToIndexText: { it: 'Indice Sezioni', en: 'Sections Index' },
                sectionTitleCardio: { it: '2. Apparato Cardiocircolatorio', en: '2. Cardiovascular System' }, // Nuova chiave titolo sezione
                navSummary: { it: 'Riassunto', en: 'Summary' },
                navInfographic: { it: 'Infografica', en: 'Infographic' },
                navChecklist: { it: 'Checklist', en: 'Checklist' },
                navAncillary: { it: 'Esami Collaterali', en: 'Ancillary Exams' }, // Nuova chiave nav
                navQuiz: { it: 'Quiz', en: 'Quiz' },
                navAudio: { it: 'Audio', en: 'Audio' },
                accessibility: { it: 'Accessibilit√†', en: 'Accessibility' },
                // --- Contenuto Riassunto Cardiocircolatorio ---
                 siteTitle: { it: 'Semeiotica Vet G.A.', en: 'Veterinary Semeiotics L.A.' }, // Dalla pagina originale
                 navBack: { it: 'Indice Esami', en: 'Exams Index' }, // Dalla pagina originale (non pi√π visibile ma chiave esiste)
                 pageTitle: { it: `Esame dell'Apparato Cardiocircolatorio ${speakerIconLarge}`, en: `Cardiovascular System Examination ${speakerIconLarge}` },
                 introText: { it: `L'esame dell'apparato cardiocircolatorio √® essenziale per valutare la funzionalit√† della pompa cardiaca e l'adeguatezza della perfusione tissutale sistemica. Integra i dati raccolti nell'EOG e si concentra su manovre specifiche di ispezione, palpazione, percussione e, soprattutto, auscultazione. ${speakerIconSmall}`, en: `The examination of the cardiovascular system is essential for assessing the function of the cardiac pump and the adequacy of systemic tissue perfusion. It integrates data from the GPE and focuses on specific maneuvers of inspection, palpation, percussion, and, above all, auscultation. ${speakerIconSmall}` },
                 section1: { it: `<h2>1. Ispezione ${speakerIconH2}</h2><p>L'ispezione si focalizza sulla ricerca di segni visibili di disfunzione cardiaca o circolatoria.</p><ul><li><strong>Itto Cardiaco:</strong> In animali magri, √® talvolta possibile osservare l'impulso del cuore contro la parete toracica nell'area del gomito sinistro.</li><li><strong>Vene Giugulari:</strong> Si valuta il grado di riempimento (turgore) e la presenza di un polso venoso giugulare anomalo, che pu√≤ indicare un'insufficienza cardiaca destra.</li><li><strong>Edemi Declivi:</strong> Si ricerca la presenza di accumuli di liquidi sottocutanei nelle parti pi√π basse del corpo, come la regione sternale, intermandibolare (edema a barbozzale nel bovino) o gli arti.</li></ul>`, en: `<h2>1. Inspection ${speakerIconH2}</h2><p>Inspection focuses on finding visible signs of cardiac or circulatory dysfunction.</p><ul><li><strong>Cardiac Apex Beat:</strong> In lean animals, it is sometimes possible to observe the heart's impulse against the chest wall in the left elbow area.</li><li><strong>Jugular Veins:</strong> The degree of filling (turgor) and the presence of an abnormal jugular venous pulse, which may indicate right heart failure, are assessed.</li><li><strong>Pitting Edema:</strong> The presence of subcutaneous fluid accumulations in the lowest parts of the body is sought, such as the sternal region, intermandibular space ("bottle jaw" in cattle), or limbs.</li></ul>` },
                 section2: { it: `<h2>2. Palpazione ${speakerIconH2}</h2><p>La palpazione permette di confermare e quantificare alcuni reperti ispettivi.</p><ul><li><strong>Palpazione dell'Itto Cardiaco:</strong> Si pone la mano piatta sulla parete toracica dietro al gomito (a sinistra e a destra) per valutarne la localizzazione, l'intensit√† e l'eventuale presenza di fremiti (vibrazioni patologiche).</li><li><strong>Rilievo del Polso Arterioso:</strong> Fondamentale per valutare i suoi caratteri: <strong>frequenza</strong> (sincrona con i toni cardiaci), <strong>ritmo</strong> (regolare o irregolare), <strong>ampiezza</strong> (pieno o filiforme), <strong>celerit√†</strong> (rapido o lento) e <strong>durezza</strong> (resistenza alla compressione). I siti principali sono l'<strong>arteria facciale</strong> nel cavallo e l'<strong>arteria coccigea</strong> nel bovino.</li><li><strong>Sincronia Polso-Itto:</strong> Ogni battito cardiaco percepito all'auscultazione deve corrispondere a un'onda pressoria palpabile a livello arterioso. Un deficit di polso √® un'importante anomalia.</li></ul>`, en: `<h2>2. Palpation ${speakerIconH2}</h2><p>Palpation allows for the confirmation and quantification of some inspection findings.</p><ul><li><strong>Palpation of the Apex Beat:</strong> The flat hand is placed on the chest wall behind the elbow (on the left and right) to assess its location, intensity, and the possible presence of thrills (pathological vibrations).</li><li><strong>Arterial Pulse Assessment:</strong> Fundamental for assessing its characteristics: <strong>rate</strong> (synchronous with heart sounds), <strong>rhythm</strong> (regular or irregular), <strong>amplitude</strong> (full or thready), <strong>celerity</strong> (quick or slow), and <strong>hardness</strong> (resistance to compression). The main sites are the <strong>facial artery</strong> in the horse and the <strong>coccygeal artery</strong> in cattle.</li><li><strong>Pulse-Apex Beat Synchrony:</strong> Each heartbeat heard on auscultation must correspond to a palpable pressure wave at the arterial level. A pulse deficit is an important abnormality.</li></ul>` },
                 section3: { it: `<h2>3. Percussione ${speakerIconH2}</h2><p>La percussione dell'aia cardiaca ha lo scopo di delimitare l'area di ottusit√† cardiaca (assoluta e relativa) sulla parete toracica.</p><ul><li><strong>Tecnica:</strong> Si esegue con il metodo digito-digitale, procedendo dagli apici polmonari verso l'area cardiaca.</li><li><strong>Utilit√† Clinica:</strong> √à una manovra difficile nei grandi animali, specialmente se obesi o molto muscolosi. Pu√≤ tuttavia rivelare un ingrandimento dell'aia cardiaca (cardiomegalia) o una sua riduzione (es. enfisema polmonare). Un'ottusit√† molto estesa pu√≤ suggerire una grave versamento pericardico.</li></ul>`, en: `<h2>3. Percussion ${speakerIconH2}</h2><p>Percussion of the cardiac area aims to delineate the area of cardiac dullness (absolute and relative) on the chest wall.</p><ul><li><strong>Technique:</strong> It is performed using the finger-on-finger method, proceeding from the lung apices towards the cardiac area.</li><li><strong>Clinical Utility:</strong> This is a difficult maneuver in large animals, especially if they are obese or very muscular. However, it can reveal an enlargement of the cardiac area (cardiomegaly) or its reduction (e.g., pulmonary emphysema). Very extensive dullness may suggest severe pericardial effusion.</li></ul>` },
                 section4: { it: `<h2>4. Auscultazione Cardiaca ${speakerIconH2}</h2><p>√à il tempo semeiotico pi√π importante e richiede pratica e un ambiente silenzioso.</p><ul><li><strong>Aree di Auscultazione (Punto di Massima Intensit√†):</strong> Si auscultano le 4 valvole cardiache in specifiche aree del torace. A sinistra: Mitrale (PAM), Aortica (PAo), Polmonare (PAP). A destra: Tricuspide (PAT).</li><li><strong>Toni Cardiaci Normali:</strong> Si devono identificare il <strong>primo tono (T1)</strong>, pi√π grave e lungo (chiusura valvole atrio-ventricolari), e il <strong>secondo tono (T2)</strong>, pi√π acuto e breve (chiusura valvole semilunari).</li><li><strong>Identificazione di Suoni Anomali:</strong> Si ricerca la presenza di <strong>soffi</strong> (causati da flussi turbolenti, es. per insufficienze o stenosi valvolari), <strong>aritmie</strong> (irregolarit√† del ritmo) o <strong>sfregamenti pericardici</strong> (indicativi di pericardite).</li></ul>`, en: `<h2>4. Cardiac Auscultation ${speakerIconH2}</h2><p>This is the most important semiotic step and requires practice and a quiet environment.</p><ul><li><strong>Auscultation Areas (Point of Maximal Intensity):</strong> The 4 heart valves are auscultated in specific areas of the chest. On the left: Mitral (PAM), Aortic (PAo), Pulmonary (PAP). On the right: Tricuspid (PAT).</li><li><strong>Normal Heart Sounds:</strong> The <strong>first heart sound (S1)</strong>, which is lower-pitched and longer (closure of atrioventricul√§r valves), and the <strong>second heart sound (S2)</strong>, which is higher-pitched and shorter (closure of semilunar valves), must be identified.</li><li><strong>Identification of Abnormal Sounds:</strong> The presence of <strong>murmurs</strong> (caused by turbulent blood flow, e.g., due to valvular insufficiency or stenosis), <strong>arrhythmias</strong> (rhythm irregularities), or <strong>pericardial friction rubs</strong> (indicative of pericarditis) is sought.</li></ul>` },
                 section5: { it: `<h2>5. Valutazione della Perfusione Periferica ${speakerIconH2}</h2><p>Queste manovre, gi√† parte dell'EOG, sono cruciali per l'esame cardiocircolatorio.</p><ul><li><strong>Tempo di Riempimento Capillare (TRC):</strong> Si esegue comprimendo la mucosa gengivale. Un TRC > 2 secondi indica una scarsa perfusione periferica.</li><li><strong>Colore delle Mucose:</strong> Mucose pallide, cianotiche o congeste sono segni diretti di compromissione cardiocircolatoria.</li><li><strong>Temperatura delle Estremit√†:</strong> Orecchie, arti o coda freddi possono indicare vasocostrizione periferica come meccanismo di compenso in caso di shock o insufficienza cardiaca.</li></ul>`, en: `<h2>5. Assessment of Peripheral Perfusion ${speakerIconH2}</h2><p>These maneuvers, already part of the GPE, are crucial for the cardiovascular examination.</p><ul><li><strong>Capillary Refill Time (CRT):</strong> Performed by pressing on the gingival mucosa. A CRT > 2 seconds indicates poor peripheral perfusion.</li><li><strong>Mucous Membrane Color:</strong> Pale, cyanotic, or congested mucous membranes are direct signs of cardiovascular compromise.</li><li><strong>Temperature of Extremities:</strong> Cold ears, limbs, or tail may indicate peripheral vasoconstriction as a compensatory mechanism in cases of shock or heart failure.</li></ul>` },
                 btnPrint: { it: 'Stampa', en: 'Print' }, // Chiave per bottone stampa
                 btnPrintText: { it: 'Stampa', en: 'Print' }, // Testo dentro bottone stampa
                 btnDownloadAudio: { it: 'Scarica Audio', en: 'Download Audio' },
                // --- Footer ---
                footerText: { it: '&copy; 2024 Semeiotica Veterinaria. Creato da Sara Busechian.', en: '&copy; 2024 Veterinary Semeiotics. Created by Sara Busechian.' }
            };

             const sectionTitleElement = document.querySelector('#page-header h1[data-lang-key]');
             const currentSectionKey = sectionTitleElement ? sectionTitleElement.getAttribute('data-lang-key') : null;
            let currentLanguage = localStorage.getItem('language') || 'it';
            const accessibilityToggle = document.getElementById('accessibility-toggle');
            const langToggle = document.getElementById('lang-toggle');
            const body = document.body;
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;
            let voices = [];

            // --- Logica TTS ---
             function populateVoiceList() {
                 if (typeof speechSynthesis !== 'undefined') {
                     voices = synth.getVoices();
                 }
            }
             if (typeof speechSynthesis !== 'undefined' && speechSynthesis.onvoiceschanged !== undefined) {
                 speechSynthesis.onvoiceschanged = populateVoiceList;
             }
             populateVoiceList(); // Initial population

             function speak(text, button) {
                 const isSameButton = activeTTSButton === button;

                 if (synth.speaking && isSameButton) {
                     if (synth.paused) {
                         synth.resume();
                         button.classList.add('playing');
                     } else {
                         synth.pause();
                         button.classList.remove('playing');
                     }
                 } else {
                     if (synth.speaking) {
                         if (currentUtterance) currentUtterance.onend = null;
                         if (activeTTSButton) activeTTSButton.classList.remove('playing');
                         synth.cancel();
                     }
                      // Piccolo ritardo per assicurarsi che cancel() sia completato
                     setTimeout(() => startSpeaking(text, button), 50);
                 }
             }

             function startSpeaking(text, button) {
                 if (!text || typeof text !== 'string' || !text.trim()) {
                    console.error("Testo non valido per TTS:", text);
                    return;
                 }
                 currentUtterance = new SpeechSynthesisUtterance(text);
                 currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                 currentUtterance.onend = () => {
                     if (button === activeTTSButton) {
                         button.classList.remove('playing');
                         activeTTSButton = null;
                     }
                 };
                  currentUtterance.onerror = (event) => {
                     console.error("Errore SpeechSynthesis:", event.error);
                     if (button === activeTTSButton) {
                          button.classList.remove('playing');
                          activeTTSButton = null;
                     }
                 };
                 synth.speak(currentUtterance);
                 activeTTSButton = button;
                 button.classList.add('playing');
             }

             function setupTTSListeners() {
                 // Rimuovi vecchi listener clonando e sostituendo
                 document.querySelectorAll('.tts-button').forEach(button => {
                     const newButton = button.cloneNode(true);
                     button.parentNode.replaceChild(newButton, button);

                     newButton.addEventListener('click', (e) => {
                         e.stopPropagation();
                         const parentElement = newButton.parentNode; // H1, H2, o P
                         let textToRead = '';
                         let key = parentElement.dataset.langKey; // Per H1, P

                         if (parentElement.tagName === 'H1' || parentElement.tagName === 'P') {
                             key = parentElement.dataset.langKey;
                         } else if (parentElement.tagName === 'H2') {
                             const container = parentElement.closest('[data-lang-key]');
                             if(container) key = container.dataset.langKey; // Per H2, prendi key dal div padre
                         }

                         if (key && translations[key] && translations[key][currentLanguage]) {
                             const htmlContent = translations[key][currentLanguage];
                             const tempDiv = document.createElement('div');
                             tempDiv.innerHTML = htmlContent;
                             tempDiv.querySelectorAll('.tts-button').forEach(btn => btn.remove());
                             textToRead = tempDiv.textContent.trim().replace(/\s+/g, ' ');
                         }

                         if (textToRead) {
                             speak(textToRead, newButton);
                         } else {
                             console.warn("Nessun testo trovato per TTS per il pulsante:", newButton);
                         }
                     });
                 });
             }


            // --- Funzione Aggiornamento Lingua ---
            const updateLanguage = (lang, previousLang = null) => {
                 document.documentElement.lang = lang;
                 if(langToggle) langToggle.textContent = lang === 'it' ? 'EN' : 'IT';

                 document.querySelectorAll('[data-lang-key]').forEach(element => {
                     const key = element.dataset.langKey;
                     if (translations[key] && translations[key][lang]) {
                         const translationText = translations[key][lang];

                         // Gestione elementi HTML (footer, link indietro, bottoni audio/stampa)
                         if (key === 'footerText' || key === 'backToIndex' || key === 'btnDownloadAudio') {
                              // Se l'elemento contiene un SVG, preservalo
                              const svgIcon = element.querySelector('svg');
                              element.innerHTML = translationText;
                              if (svgIcon && (element.tagName === 'A' || element.tagName === 'BUTTON')) {
                                   element.insertBefore(svgIcon, element.firstChild);
                              }
                         }
                         // Gestione specifica bottone stampa (con SVG)
                         else if (key === 'btnPrint') {
                              const svgIcon = element.querySelector('svg');
                              const textSpan = element.querySelector('span[data-lang-key="btnPrintText"]');
                              if (textSpan) {
                                   textSpan.textContent = translations['btnPrintText'][lang]; // Aggiorna solo testo
                              } else { // Fallback se non c'√® span
                                  element.innerHTML = translationText;
                                   if (svgIcon) element.insertBefore(svgIcon, element.firstChild);
                              }
                               element.setAttribute('aria-label', translationText); // Aggiorna aria-label
                         }
                         // Gestione link nav interna (solo testo)
                         else if (element.classList.contains('section-nav-link')) {
                             element.textContent = translationText;
                         }
                         // Gestione titolo H1 nell'header (solo testo)
                         else if (element.tagName === 'H1' && element.closest('#page-header')) {
                              const sectionKey = currentSectionKey || key;
                              element.textContent = translations[sectionKey] ? translations[sectionKey][lang] : translationText;
                         }
                         // Gestione contenuto principale (H1, P, DIVs con H2/UL) che contiene HTML e TTS
                         else if (element.id === 'main-content' || element.closest('#main-content')) {
                              // Controlla se la traduzione contiene l'icona TTS prima di usare innerHTML
                              if (translationText.includes('tts-button')) {
                                   element.innerHTML = translationText;
                              } else {
                                   // Altrimenti, se √® un elemento semplice, usa textContent
                                   element.textContent = translationText;
                              }
                         }
                         // Gestione altri testi semplici (fallback)
                         else {
                             element.textContent = translationText;
                         }
                     }
                 });

                 // Reset TTS e riattacca i listener
                 if (synth.speaking || synth.pending) synth.cancel();
                 if(activeTTSButton) activeTTSButton.classList.remove('playing');
                 activeTTSButton = null;
                 setTimeout(setupTTSListeners, 50); // Ritarda leggermente per sicurezza DOM
            };

            // --- Logica Modalit√† Accessibilit√† ---
            const setA11yMode = (enabled) => {
                if (enabled) { body.classList.add('dsa-mode'); localStorage.setItem('dsa-mode', 'enabled'); }
                else { body.classList.remove('dsa-mode'); localStorage.setItem('dsa-mode', 'disabled'); }
            };

            // --- Event Listeners ---
            if (langToggle) {
                langToggle.addEventListener('click', () => {
                    const previousLanguage = currentLanguage;
                    currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                    localStorage.setItem('language', currentLanguage);
                     if (synth.speaking || synth.pending) synth.cancel(); // Stoppa TTS
                     updateLanguage(currentLanguage, previousLanguage);
                });
            } else { console.error("Elemento langToggle non trovato!"); }

            if (accessibilityToggle) {
                 accessibilityToggle.addEventListener('click', () => {
                    const isEnabled = body.classList.contains('dsa-mode');
                    setA11yMode(!isEnabled);
                });
            } else { console.error("Elemento accessibilityToggle non trovato!"); }

            // --- Inizializzazione ---
            if (localStorage.getItem('dsa-mode') === 'enabled') { setA11yMode(true); }
            populateVoiceList(); // Chiama per popolare le voci all'avvio
            updateLanguage(currentLanguage); // Applica lingua iniziale e setup

        });
    </script>

</body>
</html>
