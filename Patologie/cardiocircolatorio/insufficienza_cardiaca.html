<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insufficienza Cardiaca - Medicina Interna Veterinaria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff1f2; color: #881337; }
        .content-section { background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { transition: all 0.2s; border-bottom: 2px solid transparent; }
        .nav-link:hover, .nav-link.active { border-bottom-color: #f43f5e; color: #be185d; }
        .dsa-mode {
            font-family: 'Lexend', sans-serif;
            background-color: #fdf6f7 !important;
            letter-spacing: 0.05em;
            line-height: 1.75;
            color: #34495e;
        }
        .dsa-mode #main-header, .dsa-mode #main-footer { background-color: #000000 !important; }
        .dsa-mode #main-header h1, .dsa-mode #main-header a, .dsa-mode #main-footer p, .dsa-mode button { color: #ffffff !important; }
        .dsa-mode button { border: 1px solid #ffffff; }
        .dsa-mode .content-section { background-color: #fffdfd; border: 1px solid #e0e0e0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode li { color: #34495e; }
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #64748b; transition: color 0.2s; }
        .tts-button:hover, .tts-button.playing { color: #0ea5e9; }
        .quiz-question { border: 1px solid #fecdd3; transition: all 0.3s; }
        .quiz-option:hover { background-color: #fff1f2; }
        .quiz-question.correct { background-color: #d1fae5; border-color: #10b981; }
        .quiz-question.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        @media print {
            #main-header, #main-footer, #page-nav, #infografica, #quiz, #audio, #print-button, .tts-button, video, img, a[href*="infografica"] { display: none; }
        }
    </style>
</head>
<body class="bg-rose-50">

    <header id="main-header" class="bg-rose-800 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold !text-white !border-none !m-0 !p-0 !text-left" data-lang-key="siteTitle">Patologie Cardiocircolatorie</h1>
            <div class="flex items-center space-x-4">
                <button id="accessibility-toggle" aria-label="Attiva modalit√† ad alta leggibilit√†" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilit√†</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-10">
        <div class="text-left mb-8">
            <a href="patologie_cardiocircolatorio.html" class="inline-flex items-center bg-white text-rose-700 font-bold py-2 px-4 rounded-lg shadow hover:bg-rose-100 transition duration-300" data-lang-key="backToIndex">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd"></path></svg>
                <span data-lang-key="backToIndexText">Indice Patologie Cardiocircolatorie</span>
            </a>
        </div>
        
        <div class="content-section p-6 md:p-10">
            <header class="text-center border-b-2 border-rose-200 pb-6 mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-rose-800" data-lang-key="pageTitle">Insufficienza Cardiaca<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h1>
                <p class="text-lg text-rose-700 mt-2" data-lang-key="pageSubtitle">La sindrome clinica terminale comune a molte cardiopatie.</p>
            </header>

            <nav id="page-nav" class="flex justify-center flex-wrap gap-4 md:gap-8 mb-10 border-b border-gray-200">
                <a href="#riassunto" class="nav-link font-semibold py-2" data-lang-key="navSummary">Riassunto</a>
                <a href="#infografica" class="nav-link font-semibold py-2" data-lang-key="navInfographic">Infografica</a>
                <a href="#quiz" class="nav-link font-semibold py-2" data-lang-key="navQuiz">Quiz</a>
                <a href="#audio" class="nav-link font-semibold py-2" data-lang-key="navAudio">Audio</a>
                <a href="#bibliografia" class="nav-link font-semibold py-2" data-lang-key="navBibliography">Bibliografia</a>
            </nav>

            <article class="space-y-12">
                <section id="riassunto">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4 flex items-center" data-lang-key="summaryTitle">Riassunto Completo <span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h2>
                    <div class="prose max-w-none text-rose-900" data-lang-key="summaryContent">
                        <!-- Content loaded by JS -->
                    </div>
                </section>

                <section id="infografica">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="infographicTitle">Infografica Riepilogativa</h2>
                      <a href="infografica_insufficienza_cardiaca.html" target="_blank" class="block bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow border-l-4 border-rose-500">
                          <div class="flex items-center space-x-6">
                              <div class="flex-shrink-0 w-24 h-24 bg-rose-500 rounded-lg flex items-center justify-center">
                                  <span class="text-5xl" role="img" aria-label="Icona di un cuore">‚ù§Ô∏è‚Äçü©π</span>
                              </div>
                              <div>
                                  <h3 class="text-xl font-bold text-rose-800" data-lang-key="infographicLinkTitle">Visualizza l'Infografica Dettagliata</h3>
                                  <p class="text-gray-600 mt-1" data-lang-key="infographicLinkDesc">Clicca qui per una guida visuale completa sull'Insufficienza Cardiaca.</p>
                              </div>
                          </div>
                      </a>
                </section>

                <section id="quiz">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="quizTitle">Quiz di Autovalutazione</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Questions loaded by JS -->
                    </div>
                    <div class="mt-6 text-center">
                        <button id="submit-quiz" class="bg-rose-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-rose-700 transition" data-lang-key="quizSubmit">Verifica Risposte</button>
                    </div>
                    <div id="quiz-results" class="mt-6 text-center text-xl font-bold"></div>
                </section>

                <section id="audio">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="audioTitle">Ascolta il Riassunto</h2>
                    <div class="p-4 bg-rose-100/50 rounded-lg flex flex-col sm:flex-row items-center gap-4 w-full">
                        <button id="audio-play-pause" class="p-3 bg-rose-500 text-white rounded-full hover:bg-rose-600 transition-colors duration-200">
                            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg>
                            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" viewBox="0 0 20 20" fill="currentColor"><path d="M5.75 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75zM14.25 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75z" /></svg>
                        </button>
                        <div class="flex-grow text-center sm:text-left">
                            <p class="font-semibold text-rose-800" data-lang-key="audioListen">Ascolta il riassunto completo</p>
                            <p class="text-sm text-rose-600" data-lang-key="audioDesc">Ideale per ripassare mentre sei in movimento.</p>
                        </div>
                        <a href="audio_insufficienza_cardiaca.mp3" download class="bg-gray-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition inline-flex items-center w-full sm:w-auto justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            <span data-lang-key="btnDownloadAudio">Scarica</span>
                        </a>
                    </div>
                </section>

                <section id="bibliografia">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="bibliographyTitle">Riferimenti Bibliografici</h2>
                    <ul class="list-disc pl-6 text-rose-900" data-lang-key="bibliographyContent">
                        <!-- Content loaded by JS -->
                    </ul>
                </section>
            </article>
            
            <div class="mt-12 text-center">
                <button id="print-button" onclick="window.print()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition inline-flex items-center" data-lang-key="btnPrint">Stampa Riassunto</button>
            </div>
        </div>
    </main>
    <footer id="main-footer" class="text-center mt-16 pt-8 border-t border-rose-100">
        <p class="text-slate-500" data-lang-key="footer-credit">A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                siteTitle: { it: "Patologie Cardiocircolatorie", en: "Cardiovascular Diseases" },
                backToIndexText: { it: "Indice Patologie Cardiocircolatorie", en: "Cardiovascular Pathology Index" },
                pageTitle: { it: "Insufficienza Cardiaca", en: "Heart Failure" },
                pageSubtitle: { it: "La sindrome clinica terminale comune a molte cardiopatie.", en: "The final common clinical syndrome of many heart diseases." },
                navSummary: { it: "Riassunto", en: "Summary" },
                navInfographic: { it: "Infografica", en: "Infographic" },
                navQuiz: { it: "Quiz", en: "Quiz" },
                navAudio: { it: "Audio", en: "Audio" },
                navBibliography: { it: "Bibliografia", en: "Bibliography" },
                summaryTitle: { it: "Riassunto Completo", en: "Full Summary" },
                summaryContent: { 
                    it: `<p>L'<strong>insufficienza cardiaca (HF)</strong> non √® una malattia specifica, ma una <strong>sindrome clinica complessa</strong> che rappresenta lo stadio finale di molte cardiopatie. Si verifica quando il cuore non √® pi√π in grado di pompare una quantit√† di sangue adeguata a soddisfare le richieste metaboliche dei tessuti, o pu√≤ farlo solo a pressioni di riempimento elevate.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Fisiopatologia</h3>
                        <p>L'HF pu√≤ essere classificata in base alla sua origine:</p>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Insufficienza Cardiaca Sinistra:</strong> La pi√π comune. Il ventricolo sinistro inefficiente causa un aumento della pressione a monte, nel circolo polmonare. La conseguenza clinica √® l'<strong>edema polmonare</strong> (accumulo di liquido negli alveoli), che causa tosse e difficolt√† respiratorie.</li>
                            <li><strong>Insufficienza Cardiaca Destra:</strong> Il ventricolo destro inefficiente causa un aumento della pressione nel circolo venoso sistemico. Le conseguenze sono l'accumulo di liquidi nelle cavit√† corporee (<strong>ascite</strong>, <strong>versamento pleurico</strong>) e negli arti (edema periferico).</li>
                        </ul>
                        <p>Quando la gittata cardiaca diminuisce, il corpo attiva <strong>meccanismi neuro-ormonali compensatori</strong> (attivazione del sistema nervoso simpatico e del sistema renina-angiotensina-aldosterone - RAAS). Questi meccanismi, sebbene inizialmente utili, a lungo termine diventano deleteri, causando ritenzione di liquidi, vasocostrizione e un ulteriore stress per il cuore, creando un circolo vizioso.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Scompenso Cardiaco Congestizio (CHF)</h3>
                        <p>√à lo stadio dell'insufficienza cardiaca in cui i meccanismi compensatori falliscono e compaiono i segni clinici legati all'accumulo di liquidi (congestione). √à una vera e propria emergenza medica.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosi</h3>
                        <p>La diagnosi si basa sull'integrazione di anamnesi, esame fisico (presenza di soffi, aritmie, crepitii polmonari) e diagnostica per immagini:</p>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Radiografie Toraciche:</strong> Fondamentali per confermare la presenza di cardiomegalia e, soprattutto, di segni di CHF (edema polmonare, versamento pleurico).</li>
                            <li><strong>Ecocardiografia:</strong> Identifica la cardiopatia sottostante, ne valuta la gravit√† e le conseguenze emodinamiche.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Terapia</h3>
                        <p>La gestione terapeutica si differenzia tra la fase acuta e quella cronica:</p>
                         <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Terapia d'Urgenza (CHF acuta):</strong> L'acronimo "FONT" riassume l'approccio: <strong>F</strong>urosemide (diuretico), <strong>O</strong>ssigeno, <strong>N</strong>itroderivato (vasodilatatore), <strong>T</strong>oracentesi/addominocentesi. Si associa quasi sempre il <strong>Pimobendan</strong>.</li>
                            <li><strong>Terapia Cronica:</strong> Si basa sulla cosiddetta "quadruplice terapia" per gestire a lungo termine i pazienti in stadio C: Furosemide, Pimobendan, ACE-inibitore e Spironolattone.</li>
                        </ul>`,
                    en: `<p><strong>Heart Failure (HF)</strong> is not a specific disease, but a <strong>complex clinical syndrome</strong> that represents the final stage of many heart diseases. It occurs when the heart is no longer able to pump an adequate amount of blood to meet the metabolic demands of the tissues, or can only do so at high filling pressures.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Pathophysiology</h3>
                        <p>HF can be classified based on its origin:</p>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Left-Sided Heart Failure:</strong> The most common. The inefficient left ventricle causes an increase in pressure upstream, in the pulmonary circulation. The clinical consequence is <strong>pulmonary edema</strong> (fluid accumulation in the alveoli), which causes coughing and difficulty breathing.</li>
                            <li><strong>Right-Sided Heart Failure:</strong> The inefficient right ventricle causes an increase in pressure in the systemic venous circulation. The consequences are fluid accumulation in body cavities (<strong>ascites</strong>, <strong>pleural effusion</strong>) and limbs (peripheral edema).</li>
                        </ul>
                        <p>When cardiac output decreases, the body activates <strong>neuro-hormonal compensatory mechanisms</strong> (activation of the sympathetic nervous system and the renin-angiotensin-aldosterone system - RAAS). Although initially useful, these mechanisms become detrimental in the long term, causing fluid retention, vasoconstriction, and further stress on the heart, creating a vicious cycle.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Congestive Heart Failure (CHF)</h3>
                        <p>This is the stage of heart failure where compensatory mechanisms fail and clinical signs related to fluid accumulation (congestion) appear. It is a true medical emergency.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosis</h3>
                        <p>Diagnosis is based on integrating history, physical examination (presence of murmurs, arrhythmias, pulmonary crackles), and diagnostic imaging:</p>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Chest Radiographs:</strong> Essential to confirm the presence of cardiomegaly and, especially, signs of CHF (pulmonary edema, pleural effusion).</li>
                            <li><strong>Echocardiography:</strong> Identifies the underlying heart disease, assesses its severity, and its hemodynamic consequences.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Therapy</h3>
                        <p>Therapeutic management differs between the acute and chronic phases:</p>
                         <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Emergency Therapy (Acute CHF):</strong> The acronym "FONT" summarizes the approach: <strong>F</strong>urosemide (diuretic), <strong>O</strong>xygen, <strong>N</strong>itrate (vasodilator), <strong>T</strong>horacentesis/abdominocentesis. <strong>Pimobendan</strong> is almost always associated.</li>
                            <li><strong>Chronic Therapy:</strong> Based on the so-called "quadruple therapy" to manage Stage C patients long-term: Furosemide, Pimobendan, an ACE inhibitor, and Spironolactone.</li>
                        </ul>`
                },
                infographicTitle: { it: "Infografica Riepilogativa", en: "Summary Infographic" },
                infographicLinkTitle: { it: "Visualizza l'Infografica Dettagliata", en: "View the Detailed Infographic" },
                infographicLinkDesc: { it: "Clicca qui per una guida visuale completa sull'Insufficienza Cardiaca.", en: "Click here for a complete visual guide on Heart Failure." },
                quizTitle: { it: "Quiz di Autovalutazione", en: "Self-Assessment Quiz" },
                quizSubmit: { it: "Verifica Risposte", en: "Check Answers" },
                audioTitle: { it: "Ascolta il Riassunto", en: "Listen to the Summary" },
                btnDownloadAudio: { it: "Scarica", en: "Download" },
                audioListen: { it: "Ascolta il riassunto completo", en: "Listen to the full summary" },
                audioDesc: { it: "Ideale per ripassare mentre sei in movimento.", en: "Ideal for reviewing on the go." },
                bibliographyTitle: { it: "Riferimenti Bibliografici", en: "Bibliographical References" },
                bibliographyContent: { 
                    it: `<li>Ettinger SJ, Feldman EC, C√¥t√© E, Textbook of Veterinary Internal Medicine, 9th Edition, Elsevier, 2024</li><li>Reed SM, Bayly WM, Sellon DC, Equine Internal Medicine, 4th Edition, Elsevier, 2018</li>`,
                    en: `<li>Ettinger SJ, Feldman EC, C√¥t√© E, Textbook of Veterinary Internal Medicine, 9th Edition, Elsevier, 2024</li><li>Reed SM, Bayly WM, Sellon DC, Equine Internal Medicine, 4th Edition, Elsevier, 2018</li>`
                },
                btnPrint: { it: "Stampa Riassunto", en: "Print Summary" },
                accessibility: { it: "Accessibilit√†", en: "Accessibility" },
                "footer-credit": { it: "A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria", en: "Curated by Prof. Sara Busechian. Veterinary clinical medicine teachings" }
            };

            const quizData = {
                it: [
                    { question: "L'insufficienza cardiaca √® considerata:", options: ["Una malattia specifica della valvola mitrale", "Un'infezione del muscolo cardiaco", "Una sindrome clinica complessa", "Un disturbo primario del ritmo cardiaco"], answer: "Una sindrome clinica complessa" },
                    { question: "Qual √® il segno clinico caratteristico dell'insufficienza cardiaca sinistra congestizia?", options: ["Ascite", "Edema polmonare", "Versamento pericardico", "Edema periferico"], answer: "Edema polmonare" },
                    { question: "L'ascite e il versamento pleurico sono tipicamente associati a:", options: ["Insufficienza cardiaca sinistra", "Insufficienza cardiaca destra", "Aritmie sopraventricolari", "Ipertensione sistemica"], answer: "Insufficienza cardiaca destra" },
                    { question: "Quali sistemi vengono attivati come meccanismo compensatorio cronico nell'insufficienza cardiaca?", options: ["Sistema parasimpatico e ormoni tiroidei", "Sistema nervoso simpatico e sistema renina-angiotensina-aldosterone (RAAS)", "Sistema digerente e sistema immunitario", "Nessuno dei precedenti"], answer: "Sistema nervoso simpatico e sistema renina-angiotensina-aldosterone (RAAS)" },
                    { question: "Quale esame diagnostico √® essenziale per confermare la presenza di edema polmonare?", options: ["Elettrocardiogramma (ECG)", "Misurazione della pressione sanguigna", "Radiografie toraciche", "Esami del sangue completi"], answer: "Radiografie toraciche" },
                    { question: "Nella terapia d'urgenza dello scompenso cardiaco acuto, la 'F' dell'acronimo FONT sta per:", options: ["Fluidoterapia", "Fentanyl", "Furosemide", "Fans"], answer: "Furosemide" },
                    { question: "Quale farmaco, non incluso nell'acronimo FONT, √® quasi sempre somministrato in emergenza per i suoi effetti inotropi e vasodilatatori?", options: ["Atenololo", "Pimobendan", "Amlodipina", "Diltiazem"], answer: "Pimobendan" },
                    { question: "La 'quadruplice terapia' per la gestione cronica dell'insufficienza cardiaca include:", options: ["Antibiotico, diuretico, cortisone, antiacido", "Furosemide, Pimobendan, ACE-inibitore, Spironolattone", "Antiaritmico, beta-bloccante, calcio-antagonista, ossigeno", "Fans, gastroprotettore, diuretico, ACE-inibitore"], answer: "Furosemide, Pimobendan, ACE-inibitore, Spironolattone" },
                    { question: "L'attivazione cronica del RAAS porta a:", options: ["Vasodilatazione e perdita di sodio", "Vasocostrizione e ritenzione di sodio e acqua", "Aumento della frequenza cardiaca", "Diminuzione della pressione sanguigna"], answer: "Vasocostrizione e ritenzione di sodio e acqua" },
                    { question: "Qual √® l'obiettivo primario della terapia in un paziente con scompenso cardiaco congestizio acuto?", options: ["Rimuovere la causa sottostante della cardiopatia", "Ridurre il precarico e migliorare la respirazione", "Aumentare la pressione arteriosa", "Effettuare un intervento chirurgico correttivo"], answer: "Ridurre il precarico e migliorare la respirazione" }
                ],
                en: [
                    { question: "Heart failure is considered:", options: ["A specific disease of the mitral valve", "An infection of the heart muscle", "A complex clinical syndrome", "A primary heart rhythm disorder"], answer: "A complex clinical syndrome" },
                    { question: "What is the characteristic clinical sign of congestive left-sided heart failure?", options: ["Ascites", "Pulmonary edema", "Pericardial effusion", "Peripheral edema"], answer: "Pulmonary edema" },
                    { question: "Ascites and pleural effusion are typically associated with:", options: ["Left-sided heart failure", "Right-sided heart failure", "Supraventricular arrhythmias", "Systemic hypertension"], answer: "Right-sided heart failure" },
                    { question: "Which systems are activated as a chronic compensatory mechanism in heart failure?", options: ["Parasympathetic system and thyroid hormones", "Sympathetic nervous system and renin-angiotensin-aldosterone system (RAAS)", "Digestive system and immune system", "None of the above"], answer: "Sympathetic nervous system and renin-angiotensin-aldosterone system (RAAS)" },
                    { question: "Which diagnostic test is essential to confirm the presence of pulmonary edema?", options: ["Electrocardiogram (ECG)", "Blood pressure measurement", "Chest radiographs", "Complete blood count"], answer: "Chest radiographs" },
                    { question: "In the emergency therapy of acute heart failure, the 'F' in the acronym FONT stands for:", options: ["Fluid therapy", "Fentanyl", "Furosemide", "NSAIDs"], answer: "Furosemide" },
                    { question: "Which drug, not included in the FONT acronym, is almost always administered in an emergency for its inotropic and vasodilatory effects?", options: ["Atenolol", "Pimobendan", "Amlodipine", "Diltiazem"], answer: "Pimobendan" },
                    { question: "The 'quadruple therapy' for the chronic management of heart failure includes:", options: ["Antibiotic, diuretic, corticosteroid, antacid", "Furosemide, Pimobendan, ACE inhibitor, Spironolactone", "Antiarrhythmic, beta-blocker, calcium channel blocker, oxygen", "NSAID, gastroprotectant, diuretic, ACE inhibitor"], answer: "Furosemide, Pimobendan, ACE inhibitor, Spironolactone" },
                    { question: "Chronic activation of the RAAS leads to:", options: ["Vasodilation and sodium loss", "Vasoconstriction and sodium and water retention", "Increased heart rate", "Decreased blood pressure"], answer: "Vasoconstriction and sodium and water retention" },
                    { question: "What is the primary goal of therapy in a patient with acute congestive heart failure?", options: ["Remove the underlying cause of the heart disease", "Reduce preload and improve breathing", "Increase arterial blood pressure", "Perform corrective surgery"], answer: "Reduce preload and improve breathing" }
                ]
            };
            
            // --- GENERIC SCRIPT (DO NOT EDIT BELOW THIS LINE) ---

            let currentLanguage = localStorage.getItem('language') || 'it';
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;

            function stopSpeech() { if (synth.speaking || synth.paused) synth.cancel(); }
            
            function speak(text, button) {
                if (activeTTSButton === button && currentUtterance) {
                    if (synth.paused) { synth.resume(); } 
                    else if (synth.speaking) { synth.pause(); }
                    return; 
                }
                
                stopSpeech();
                if(activeTTSButton) activeTTSButton.classList.remove('playing');

                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                
                currentUtterance.onstart = () => {
                    button.classList.add('playing');
                    activeTTSButton = button;
                };
                currentUtterance.onpause = () => button.classList.remove('playing');
                currentUtterance.onresume = () => button.classList.add('playing');

                const cleanup = () => {
                    button.classList.remove('playing');
                    if (activeTTSButton === button) {
                        activeTTSButton = null;
                        currentUtterance = null;
                    }
                };
                
                currentUtterance.onend = cleanup;
                currentUtterance.onerror = (event) => {
                    if (event.error !== 'canceled' && event.error !== 'interrupted') {
                        console.error('TTS Error:', event.error);
                    }
                    cleanup();
                };
                
                synth.speak(currentUtterance);
            }

            let sound = null;
            function initHowler() {
                const audioFile = document.querySelector('#audio a[download]').href;
                if (!audioFile) return;
                sound = new Howl({
                    src: [audioFile], html5: true, 
                    onplay: () => { playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); },
                    onpause: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onend: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onloaderror: (id, msg) => { console.error("Error loading audio:", msg); },
                    onplayerror: (id, msg) => { console.error("Error playing audio:", msg); }
                });
            }

            const playPauseBtn = document.getElementById('audio-play-pause');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            if(playPauseBtn) playPauseBtn.addEventListener('click', () => {
                if (!sound) initHowler();
                if(sound) { if (sound.playing()) sound.pause(); else sound.play(); }
            });

            function setupTTSListeners() {
                document.querySelectorAll('.tts-button').forEach(button => {
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                    newButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        let textToRead = '';
                        const parentElement = newButton.parentElement;

                        if (parentElement) {
                            if (parentElement.tagName === 'H1' && parentElement.dataset.langKey === 'pageTitle') {
                                const titleClone = parentElement.cloneNode(true);
                                titleClone.querySelector('.tts-button').remove();
                                textToRead = titleClone.textContent.trim();
                                const subtitle = parentElement.nextElementSibling;
                                if (subtitle && subtitle.dataset.langKey === 'pageSubtitle') {
                                    textToRead += '. ' + subtitle.textContent.trim();
                                }
                            } else if (parentElement.tagName === 'H2' && parentElement.closest('section')?.id === 'riassunto') {
                                const section = parentElement.closest('section');
                                const titleClone = parentElement.cloneNode(true);
                                titleClone.querySelector('.tts-button').remove();
                                textToRead = titleClone.textContent.trim();
                                const content = section.querySelector('[data-lang-key="summaryContent"]');
                                if (content) {
                                    const tempDiv = document.createElement('div');
                                    tempDiv.innerHTML = content.innerHTML;
                                    textToRead += '. ' + tempDiv.textContent.trim().replace(/\s\s+/g, ' ');
                                }
                            } else {
                                 const clone = parentElement.cloneNode(true);
                                 clone.querySelector('.tts-button')?.remove();
                                 textToRead = clone.textContent.trim().replace(/^\d+\.\s*/, '');
                            }
                        }
                        
                        if (textToRead) speak(textToRead, newButton);
                    });
                });
            }

            function loadQuiz(lang) {
                const quizContainer = document.getElementById('quiz-container');
                if(!quizContainer) return;
                quizContainer.innerHTML = '';
                document.getElementById('quiz-results').innerHTML = ''; 
                quizData[lang].forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question p-4 rounded-lg';
                    let optionsHtml = q.options.map(o => `
                        <li class="quiz-option p-2 rounded hover:bg-rose-50">
                            <label class="flex items-center justify-between w-full cursor-pointer">
                                <span><input type="radio" name="q${index}" value="${o}" class="mr-3">${o}</span>
                                <span class="tts-button"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span>
                            </label>
                        </li>`).join('');
                    questionDiv.innerHTML = `<h3 class="font-semibold mb-2 flex items-center justify-between"><span>${index + 1}. ${q.question}</span><span class="tts-button"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h3><ul class="space-y-1">${optionsHtml}</ul>`;
                    quizContainer.appendChild(questionDiv);
                });
            }

            function updateLanguage(lang) {
                document.documentElement.lang = lang;
                document.getElementById('lang-toggle').textContent = lang === 'it' ? 'EN' : 'IT';
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.dataset.langKey;
                    if (translations[key] && translations[key][lang]) {
                        if (key.includes('Content')) {
                            element.innerHTML = translations[key][lang];
                        } else {
                            const ttsButton = element.querySelector('.tts-button');
                            const textNode = [...element.childNodes].find(node => node.nodeType === Node.TEXT_NODE && node.textContent.trim());
                            if (textNode) {
                                textNode.textContent = translations[key][lang];
                            } else {
                                element.textContent = translations[key][lang];
                            }
                            if(ttsButton) element.appendChild(ttsButton);
                        }
                    }
                });
                
                const dsaToggle = document.getElementById('accessibility-toggle');
                if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = lang === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = lang === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
                loadQuiz(lang);
                setupTTSListeners();
            }
            
            document.getElementById('lang-toggle').addEventListener('click', () => {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                localStorage.setItem('language', currentLanguage);
                stopSpeech();
                updateLanguage(currentLanguage);
            });

            const dsaToggle = document.getElementById('accessibility-toggle');
            dsaToggle.addEventListener('click', () => {
                document.body.classList.toggle('dsa-mode');
                 if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
            });

            const submitQuizBtn = document.getElementById('submit-quiz');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => {
                let score = 0;
                const questions = document.querySelectorAll('.quiz-question');
                quizData[currentLanguage].forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    questions[index].classList.remove('correct', 'incorrect');
                    if (selected) {
                        if (selected.value === q.answer) {
                            score++;
                            questions[index].classList.add('correct');
                        } else {
                            questions[index].classList.add('incorrect');
                        }
                    } else {
                        questions[index].classList.add('incorrect');
                    }
                });
                const resultsContainer = document.getElementById('quiz-results');
                const resultText = {
                    it: `Hai risposto correttamente a ${score} su ${quizData.it.length} domande.`,
                    en: `You answered ${score} out of ${quizData.en.length} questions correctly.`
                };
                resultsContainer.textContent = resultText[currentLanguage];
            });
            
            updateLanguage(currentLanguage);
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('article section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });
            sections.forEach(sec => observer.observe(sec));
        });
    </script>
</body>
</html>

