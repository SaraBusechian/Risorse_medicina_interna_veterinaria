<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dotto Arterioso Pervio (Cane e Gatto) - Medicina Interna Veterinaria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff1f2; color: #881337; }
        .content-section { background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { transition: all 0.2s; border-bottom: 2px solid transparent; }
        .nav-link:hover, .nav-link.active { border-bottom-color: #f43f5e; color: #be185d; }
        .dsa-mode {
            font-family: 'Lexend', sans-serif;
            background-color: #fdf6f7 !important;
            letter-spacing: 0.05em;
            line-height: 1.75;
            color: #34495e;
        }
        .dsa-mode #main-header, .dsa-mode #main-footer { background-color: #000000 !important; }
        .dsa-mode #main-header h1, .dsa-mode #main-header a, .dsa-mode #main-footer p, .dsa-mode button { color: #ffffff !important; }
        .dsa-mode button { border: 1px solid #ffffff; }
        .dsa-mode .content-section { background-color: #fffdfd; border: 1px solid #e0e0e0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode li { color: #34495e; }
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #64748b; transition: color 0.2s; }
        .tts-button:hover, .tts-button.playing { color: #0ea5e9; }
        .quiz-question { border: 1px solid #fecdd3; transition: all 0.3s; }
        .quiz-option:hover { background-color: #fff1f2; }
        .quiz-question.correct { background-color: #d1fae5; border-color: #10b981; }
        .quiz-question.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        @media print {
            #main-header, #main-footer, #page-nav, #infografica, #quiz, #audio, #print-button, .tts-button, video, img, a[href*="infografica"] { display: none; }
        }
    </style>
</head>
<body class="bg-rose-50">

    <header id="main-header" class="bg-rose-800 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold !text-white !border-none !m-0 !p-0 !text-left" data-lang-key="siteTitle">Patologie Cardiocircolatorie</h1>
            <div class="flex items-center space-x-4">
                <button id="accessibility-toggle" aria-label="Attiva modalit√† ad alta leggibilit√†" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilit√†</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-10">
        <div class="text-left mb-8">
            <a href="index.html" class="inline-flex items-center bg-white text-rose-700 font-bold py-2 px-4 rounded-lg shadow hover:bg-rose-100 transition duration-300" data-lang-key="backToIndex">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd"></path></svg>
                <span data-lang-key="backToIndexText">Indice Patologie Cardiocircolatorie</span>
            </a>
        </div>
        
        <div class="content-section p-6 md:p-10">
            <header class="text-center border-b-2 border-rose-200 pb-6 mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-rose-800" data-lang-key="pageTitle">Dotto Arterioso Pervio (Cane e Gatto)<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h1>
                <p class="text-lg text-rose-700 mt-2" data-lang-key="pageSubtitle">La cardiopatia congenita pi√π comune nel cane.</p>
            </header>

            <nav id="page-nav" class="flex justify-center flex-wrap gap-4 md:gap-8 mb-10 border-b border-gray-200">
                <a href="#riassunto" class="nav-link font-semibold py-2" data-lang-key="navSummary">Riassunto</a>
                <a href="#infografica" class="nav-link font-semibold py-2" data-lang-key="navInfographic">Infografica</a>
                <a href="#quiz" class="nav-link font-semibold py-2" data-lang-key="navQuiz">Quiz</a>
                <a href="#audio" class="nav-link font-semibold py-2" data-lang-key="navAudio">Audio</a>
                <a href="#bibliografia" class="nav-link font-semibold py-2" data-lang-key="navBibliography">Bibliografia</a>
            </nav>

            <article class="space-y-12">
                <section id="riassunto">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4 flex items-center" data-lang-key="summaryTitle">Riassunto Completo <span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h2>
                    <div class="prose max-w-none text-rose-900" data-lang-key="summaryContent">
                        <!-- Content loaded by JS -->
                    </div>
                </section>

                <section id="infografica">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="infographicTitle">Infografica Riepilogativa</h2>
                      <a href="infografica_dotto_arterioso_pervio_cane_gatto.html" target="_blank" class="block bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow border-l-4 border-rose-500">
                          <div class="flex items-center space-x-6">
                              <div class="flex-shrink-0 w-24 h-24 bg-rose-500 rounded-lg flex items-center justify-center">
                                  <span class="text-5xl" role="img" aria-label="Icona di un cucciolo">üê∂</span>
                              </div>
                              <div>
                                  <h3 class="text-xl font-bold text-rose-800" data-lang-key="infographicLinkTitle">Visualizza l'Infografica Dettagliata</h3>
                                  <p class="text-gray-600 mt-1" data-lang-key="infographicLinkDesc">Clicca qui per una guida visuale completa sul Dotto Arterioso Pervio.</p>
                              </div>
                          </div>
                      </a>
                </section>

                <section id="quiz">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="quizTitle">Quiz di Autovalutazione</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Questions loaded by JS -->
                    </div>
                    <div class="mt-6 text-center">
                        <button id="submit-quiz" class="bg-rose-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-rose-700 transition" data-lang-key="quizSubmit">Verifica Risposte</button>
                    </div>
                    <div id="quiz-results" class="mt-6 text-center text-xl font-bold"></div>
                </section>

                <section id="audio">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="audioTitle">Ascolta il Riassunto</h2>
                    <div class="p-4 bg-rose-100/50 rounded-lg flex flex-col sm:flex-row items-center gap-4 w-full">
                        <button id="audio-play-pause" class="p-3 bg-rose-500 text-white rounded-full hover:bg-rose-600 transition-colors duration-200">
                            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg>
                            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" viewBox="0 0 20 20" fill="currentColor"><path d="M5.75 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75zM14.25 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75z" /></svg>
                        </button>
                        <div class="flex-grow text-center sm:text-left">
                            <p class="font-semibold text-rose-800" data-lang-key="audioListen">Ascolta il riassunto completo</p>
                            <p class="text-sm text-rose-600" data-lang-key="audioDesc">Ideale per ripassare mentre sei in movimento.</p>
                        </div>
                        <a href="audio_pda_cane_gatto.mp3" download class="bg-gray-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition inline-flex items-center w-full sm:w-auto justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            <span data-lang-key="btnDownloadAudio">Scarica</span>
                        </a>
                    </div>
                </section>

                <section id="bibliografia">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="bibliographyTitle">Riferimenti Bibliografici</h2>
                    <ul class="list-disc pl-6 text-rose-900" data-lang-key="bibliographyContent">
                        <!-- Content loaded by JS -->
                    </ul>
                </section>
            </article>
            
            <div class="mt-12 text-center">
                <button id="print-button" onclick="window.print()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition inline-flex items-center" data-lang-key="btnPrint">Stampa Riassunto</button>
            </div>
        </div>
    </main>
    <footer id="main-footer" class="text-center mt-16 pt-8 border-t border-rose-100">
        <p class="text-slate-500" data-lang-key="footer-credit">A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                siteTitle: { it: "Patologie Cardiocircolatorie", en: "Cardiovascular Diseases" },
                backToIndexText: { it: "Indice Patologie Cardiocircolatorie", en: "Cardiovascular Pathology Index" },
                pageTitle: { it: "Dotto Arterioso Pervio (Cane e Gatto)", en: "Patent Ductus Arteriosus (Dog and Cat)" },
                pageSubtitle: { it: "La cardiopatia congenita pi√π comune nel cane.", en: "The most common congenital heart disease in dogs." },
                navSummary: { it: "Riassunto", en: "Summary" },
                navInfographic: { it: "Infografica", en: "Infographic" },
                navQuiz: { it: "Quiz", en: "Quiz" },
                navAudio: { it: "Audio", en: "Audio" },
                navBibliography: { it: "Bibliografia", en: "Bibliography" },
                summaryTitle: { it: "Riassunto Completo", en: "Full Summary" },
                summaryContent: { 
                    it: `<p>Il <strong>Dotto Arterioso Pervio (PDA)</strong> √® la cardiopatia congenita pi√π frequente nel cane, mentre √® rara nel gatto. √à causata dalla mancata chiusura dopo la nascita del dotto arterioso di Botallo, un vaso fetale che connette l'arteria polmonare all'aorta.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Fisiopatologia</h3>
                        <p>Dopo la nascita, le pressioni nel circolo sistemico diventano maggiori di quelle del circolo polmonare. Se il dotto rimane pervio, si crea uno <strong>shunt di sangue continuo da sinistra a destra</strong> (dall'aorta all'arteria polmonare). Questo determina un <strong>sovraccarico di volume</strong> del circolo polmonare, dell'atrio sinistro e del ventricolo sinistro, che vanno incontro a dilatazione (ipertrofia eccentrica). Se non trattata, questa condizione porta inevitabilmente a scompenso cardiaco congestizio sinistro.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Segnalamento e Segni Clinici</h3>
                        <p>C'√® una forte predisposizione di razza, in particolare per <strong>Barboncino, Pastore Tedesco, Maltese e Chihuahua</strong>. Le femmine sono pi√π colpite dei maschi. Molti cuccioli sono asintomatici alla prima visita, ma il riscontro del soffio √® diagnostico. Con il tempo possono sviluppare intolleranza all'esercizio, tosse e dispnea. Un segno clinico caratteristico sono i <strong>polsi femorali "scoccanti" o ipercinetici</strong>, dovuti all'ampia pressione differenziale.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosi</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Auscultazione:</strong> Il reperto pi√π classico √® un <strong>soffio continuo</strong>, udibile per tutto il ciclo cardiaco, con punto di massima intensit√† sulla base cardiaca sinistra.</li>
                            <li><strong>Radiografie Toraciche:</strong> Mostrano il classico "trio" di protrusioni: arco aortico, arteria polmonare e auricola sinistra. √à inoltre evidente cardiomegalia sinistra e ipervascolarizzazione polmonare.</li>
                            <li><strong>Ecocardiografia:</strong> √à il <strong>gold standard</strong>. Permette la visualizzazione diretta del dotto e del flusso turbolento al suo interno (con color-Doppler), confermando la diagnosi e valutando il grado di rimodellamento cardiaco.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Trattamento e Prognosi</h3>
                        <p>Il trattamento consiste nella <strong>chiusura del dotto</strong>, che √® curativa. Esistono due approcci principali:</p>
                         <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Chiusura Chirurgica:</strong> Legatura del dotto tramite toracotomia. √à l'approccio tradizionale.</li>
                            <li><strong>Chiusura Transcatetere:</strong> Approccio mininvasivo in cui un dispositivo occludente (es. ACDO, Amplatz Canine Duct Occluder) viene posizionato nel dotto tramite un catetere vascolare. √à la tecnica di scelta nella maggior parte dei centri di referenza.</li>
                        </ul>
                        <p>La prognosi per i cani trattati prima dell'insorgenza dello scompenso cardiaco √® <strong>eccellente</strong>, con un'aspettativa di vita normale. Se non trattato, circa il 60% dei cani muore entro il primo anno di vita per insufficienza cardiaca congestizia.</p>`,
                    en: `<p><strong>Patent Ductus Arteriosus (PDA)</strong> is the most common congenital heart disease in dogs, while it is rare in cats. It is caused by the failure of the fetal ductus arteriosus, a vessel connecting the pulmonary artery to the aorta, to close after birth.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Pathophysiology</h3>
                        <p>After birth, pressures in the systemic circulation become higher than those in the pulmonary circulation. If the ductus remains patent, a <strong>continuous left-to-right blood shunt</strong> (from the aorta to the pulmonary artery) is created. This results in a <strong>volume overload</strong> of the pulmonary circulation, the left atrium, and the left ventricle, which undergo dilation (eccentric hypertrophy). If left untreated, this condition inevitably leads to left-sided congestive heart failure.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Signalment and Clinical Signs</h3>
                        <p>There is a strong breed predisposition, particularly for <strong>Poodle, German Shepherd, Maltese, and Chihuahua</strong>. Females are more affected than males. Many puppies are asymptomatic at their first visit, but the finding of the murmur is diagnostic. Over time, they may develop exercise intolerance, cough, and dyspnea. A characteristic clinical sign is <strong>"bounding" or hyperkinetic femoral pulses</strong>, due to the wide pulse pressure.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosis</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Auscultation:</strong> The most classic finding is a <strong>continuous murmur</strong>, audible throughout the cardiac cycle, with its point of maximum intensity at the left heart base.</li>
                            <li><strong>Chest Radiographs:</strong> They show the classic "trio" of bulges: aortic arch, pulmonary artery, and left auricle. Left-sided cardiomegaly and pulmonary overcirculation are also evident.</li>
                            <li><strong>Echocardiography:</strong> It is the <strong>gold standard</strong>. It allows direct visualization of the ductus and the turbulent flow within it (with color Doppler), confirming the diagnosis and assessing the degree of cardiac remodeling.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Treatment and Prognosis</h3>
                        <p>Treatment consists of <strong>closing the ductus</strong>, which is curative. There are two main approaches:</p>
                         <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Surgical Ligation:</strong> Ligation of the ductus via thoracotomy. It is the traditional approach.</li>
                            <li><strong>Transcatheter Closure:</strong> A minimally invasive approach where an occluding device (e.g., ACDO, Amplatz Canine Duct Occluder) is placed in the ductus via a vascular catheter. It is the technique of choice in most referral centers.</li>
                        </ul>
                        <p>The prognosis for dogs treated before the onset of congestive heart failure is <strong>excellent</strong>, with a normal life expectancy. If left untreated, about 60% of dogs die within the first year of life from congestive heart failure.</p>`
                },
                infographicTitle: { it: "Infografica Riepilogativa", en: "Summary Infographic" },
                infographicLinkTitle: { it: "Visualizza l'Infografica Dettagliata", en: "View the Detailed Infographic" },
                infographicLinkDesc: { it: "Clicca qui per una guida visuale completa sul Dotto Arterioso Pervio.", en: "Click here for a complete visual guide on Patent Ductus Arteriosus." },
                quizTitle: { it: "Quiz di Autovalutazione", en: "Self-Assessment Quiz" },
                quizSubmit: { it: "Verifica Risposte", en: "Check Answers" },
                audioTitle: { it: "Ascolta il Riassunto", en: "Listen to the Summary" },
                btnDownloadAudio: { it: "Scarica", en: "Download" },
                audioListen: { it: "Ascolta il riassunto completo", en: "Listen to the full summary" },
                audioDesc: { it: "Ideale per ripassare mentre sei in movimento.", en: "Ideal for reviewing on the go." },
                bibliographyTitle: { it: "Riferimenti Bibliografici", en: "Bibliographical References" },
                bibliographyContent: { 
                    it: `<li>Ettinger SJ, Feldman EC, C√¥t√© E, Textbook of Veterinary Internal Medicine, 9th Edition, Elsevier, 2024</li>`,
                    en: `<li>Ettinger SJ, Feldman EC, C√¥t√© E, Textbook of Veterinary Internal Medicine, 9th Edition, Elsevier, 2024</li>`
                },
                btnPrint: { it: "Stampa Riassunto", en: "Print Summary" },
                accessibility: { it: "Accessibilit√†", en: "Accessibility" },
                "footer-credit": { it: "A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria", en: "Curated by Prof. Sara Busechian. Veterinary clinical medicine teachings" }
            };

            const quizData = {
                it: [
                    { question: "Qual √® il segno auscultatorio patognomonico di un PDA?", options: ["Soffio olosistolico a plateau", "Soffio diastolico in decrescendo", "Ritmo di galoppo", "Soffio continuo"], answer: "Soffio continuo" },
                    { question: "Qual √® la direzione dello shunt in un tipico PDA?", options: ["Da destra a sinistra", "Da sinistra a destra", "Bidirezionale", "Assente"], answer: "Da sinistra a destra" },
                    { question: "Il PDA causa principalmente un sovraccarico di:", options: ["Pressione del ventricolo destro", "Volume del cuore destro", "Pressione del ventricolo sinistro", "Volume del cuore sinistro"], answer: "Volume del cuore sinistro" },
                    { question: "Quale reperto radiografico √® noto come 'trio' di protrusioni?", options: ["Cardiomegalia generalizzata", "Protrusione di arco aortico, arteria polmonare e auricola sinistra", "Versamento pleurico", "Iperinflazione polmonare"], answer: "Protrusione di arco aortico, arteria polmonare e auricola sinistra" },
                    { question: "Quale segno clinico √® associato a un PDA con shunt significativo?", options: ["Polsi deboli e filiformi", "Polsi ipercinetici (scoccanti)", "Cianosi", "Ascite"], answer: "Polsi ipercinetici (scoccanti)" },
                    { question: "Qual √® il trattamento di scelta per il PDA?", options: ["Terapia medica con diuretici a vita", "Terapia con beta-bloccanti", "Chiusura del dotto (chirurgica o transcatetere)", "Nessun trattamento, si risolve spontaneamente"], answer: "Chiusura del dotto (chirurgica o transcatetere)" },
                    { question: "L'acronimo ACDO sta per:", options: ["Atrial Cardiac Defect Occluder", "Amplatz Canine Duct Occluder", "Aortic Canal Defect Occluder", "Arterial Closure Device Option"], answer: "Amplatz Canine Duct Occluder" },
                    { question: "Qual √® la prognosi per un cane con PDA trattato precocemente?", options: ["Infausta", "Riservata", "Eccellente, con aspettativa di vita normale", "Buona, ma con necessit√† di terapia a vita"], answer: "Eccellente, con aspettativa di vita normale" },
                    { question: "Quale delle seguenti razze NON √® considerata tipicamente predisposta al PDA?", options: ["Barboncino", "Pastore Tedesco", "Boxer", "Maltese"], answer: "Boxer" },
                    { question: "La mancata chiusura del dotto arterioso dopo la nascita porta a una comunicazione anomala tra:", options: ["Atrio destro e atrio sinistro", "Ventricolo destro e ventricolo sinistro", "Aorta e arteria polmonare", "Vena cava e aorta"], answer: "Aorta e arteria polmonare" }
                ],
                en: [
                    { question: "What is the pathognomonic auscultatory finding of a PDA?", options: ["Holosystolic plateau murmur", "Diastolic decrescendo murmur", "Gallop rhythm", "Continuous murmur"], answer: "Continuous murmur" },
                    { question: "What is the direction of the shunt in a typical PDA?", options: ["Right-to-left", "Left-to-right", "Bidirectional", "Absent"], answer: "Left-to-right" },
                    { question: "PDA primarily causes an overload of:", options: ["Right ventricular pressure", "Right heart volume", "Left ventricular pressure", "Left heart volume"], answer: "Left heart volume" },
                    { question: "Which radiographic finding is known as the 'trio' of bulges?", options: ["Generalized cardiomegaly", "Bulges of the aortic arch, pulmonary artery, and left auricle", "Pleural effusion", "Pulmonary hyperinflation"], answer: "Bulges of the aortic arch, pulmonary artery, and left auricle" },
                    { question: "Which clinical sign is associated with a significant PDA shunt?", options: ["Weak and thready pulses", "Hyperkinetic (bounding) pulses", "Cyanosis", "Ascites"], answer: "Hyperkinetic (bounding) pulses" },
                    { question: "What is the treatment of choice for PDA?", options: ["Lifelong medical therapy with diuretics", "Beta-blocker therapy", "Ductal closure (surgical or transcatheter)", "No treatment, it resolves spontaneously"], answer: "Ductal closure (surgical or transcatheter)" },
                    { question: "The acronym ACDO stands for:", options: ["Atrial Cardiac Defect Occluder", "Amplatz Canine Duct Occluder", "Aortic Canal Defect Occluder", "Arterial Closure Device Option"], answer: "Amplatz Canine Duct Occluder" },
                    { question: "What is the prognosis for a dog with a PDA treated early?", options: ["Poor", "Guarded", "Excellent, with a normal life expectancy", "Good, but requiring lifelong therapy"], answer: "Excellent, with a normal life expectancy" },
                    { question: "Which of the following breeds is NOT typically considered predisposed to PDA?", options: ["Poodle", "German Shepherd", "Boxer", "Maltese"], answer: "Boxer" },
                    { question: "Failure of the ductus arteriosus to close after birth leads to an abnormal communication between:", options: ["Right and left atria", "Right and left ventricles", "Aorta and pulmonary artery", "Vena cava and aorta"], answer: "Aorta and pulmonary artery" }
                ]
            };
            
            // --- GENERIC SCRIPT (DO NOT EDIT BELOW THIS LINE) ---

            let currentLanguage = localStorage.getItem('language') || 'it';
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;

            function stopSpeech() { if (synth.speaking || synth.paused) synth.cancel(); }
            
            function speak(text, button) {
                if (activeTTSButton === button && currentUtterance) {
                    if (synth.paused) { synth.resume(); } 
                    else if (synth.speaking) { synth.pause(); }
                    return; 
                }
                
                stopSpeech();
                if(activeTTSButton) activeTTSButton.classList.remove('playing');

                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                
                currentUtterance.onstart = () => {
                    button.classList.add('playing');
                    activeTTSButton = button;
                };
                currentUtterance.onpause = () => button.classList.remove('playing');
                currentUtterance.onresume = () => button.classList.add('playing');

                const cleanup = () => {
                    button.classList.remove('playing');
                    if (activeTTSButton === button) {
                        activeTTSButton = null;
                        currentUtterance = null;
                    }
                };
                
                currentUtterance.onend = cleanup;
                currentUtterance.onerror = (event) => {
                    if (event.error !== 'canceled' && event.error !== 'interrupted') {
                        console.error('TTS Error:', event.error);
                    }
                    cleanup();
                };
                
                synth.speak(currentUtterance);
            }

            let sound = null;
            function initHowler() {
                const audioFile = document.querySelector('#audio a[download]').href;
                if (!audioFile) return;
                sound = new Howl({
                    src: [audioFile], html5: true, 
                    onplay: () => { playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); },
                    onpause: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onend: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onloaderror: (id, msg) => { console.error("Error loading audio:", msg); },
                    onplayerror: (id, msg) => { console.error("Error playing audio:", msg); }
                });
            }

            const playPauseBtn = document.getElementById('audio-play-pause');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            if(playPauseBtn) playPauseBtn.addEventListener('click', () => {
                if (!sound) initHowler();
                if(sound) { if (sound.playing()) sound.pause(); else sound.play(); }
            });

            function setupTTSListeners() {
                document.querySelectorAll('.tts-button').forEach(button => {
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                    newButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        let textToRead = '';
                        const parentElement = newButton.parentElement;

                        if (parentElement) {
                            if (parentElement.tagName === 'H1' && parentElement.dataset.langKey === 'pageTitle') {
                                const titleClone = parentElement.cloneNode(true);
                                titleClone.querySelector('.tts-button').remove();
                                textToRead = titleClone.textContent.trim();
                                const subtitle = parentElement.nextElementSibling;
                                if (subtitle && subtitle.dataset.langKey === 'pageSubtitle') {
                                    textToRead += '. ' + subtitle.textContent.trim();
                                }
                            } else if (parentElement.tagName === 'H2' && parentElement.closest('section')?.id === 'riassunto') {
                                const section = parentElement.closest('section');
                                const titleClone = parentElement.cloneNode(true);
                                titleClone.querySelector('.tts-button').remove();
                                textToRead = titleClone.textContent.trim();
                                const content = section.querySelector('[data-lang-key="summaryContent"]');
                                if (content) {
                                    const tempDiv = document.createElement('div');
                                    tempDiv.innerHTML = content.innerHTML;
                                    textToRead += '. ' + tempDiv.textContent.trim().replace(/\s\s+/g, ' ');
                                }
                            } else {
                                 const clone = parentElement.cloneNode(true);
                                 clone.querySelector('.tts-button')?.remove();
                                 textToRead = clone.textContent.trim().replace(/^\d+\.\s*/, '');
                            }
                        }
                        
                        if (textToRead) speak(textToRead, newButton);
                    });
                });
            }

            function loadQuiz(lang) {
                const quizContainer = document.getElementById('quiz-container');
                if(!quizContainer) return;
                quizContainer.innerHTML = '';
                document.getElementById('quiz-results').innerHTML = ''; 
                quizData[lang].forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question p-4 rounded-lg';
                    let optionsHtml = q.options.map(o => `
                        <li class="quiz-option p-2 rounded hover:bg-rose-50">
                            <label class="flex items-center justify-between w-full cursor-pointer">
                                <span><input type="radio" name="q${index}" value="${o}" class="mr-3">${o}</span>
                                <span class="tts-button"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span>
                            </label>
                        </li>`).join('');
                    questionDiv.innerHTML = `<h3 class="font-semibold mb-2 flex items-center justify-between"><span>${index + 1}. ${q.question}</span><span class="tts-button"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h3><ul class="space-y-1">${optionsHtml}</ul>`;
                    quizContainer.appendChild(questionDiv);
                });
            }

            function updateLanguage(lang) {
                document.documentElement.lang = lang;
                document.getElementById('lang-toggle').textContent = lang === 'it' ? 'EN' : 'IT';
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.dataset.langKey;
                    if (translations[key] && translations[key][lang]) {
                        if (key.includes('Content')) {
                            element.innerHTML = translations[key][lang];
                        } else {
                            const ttsButton = element.querySelector('.tts-button');
                            const textNode = [...element.childNodes].find(node => node.nodeType === Node.TEXT_NODE && node.textContent.trim());
                            if (textNode) {
                                textNode.textContent = translations[key][lang];
                            } else {
                                element.textContent = translations[key][lang];
                            }
                            if(ttsButton) element.appendChild(ttsButton);
                        }
                    }
                });
                
                const dsaToggle = document.getElementById('accessibility-toggle');
                if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = lang === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = lang === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
                loadQuiz(lang);
                setupTTSListeners();
            }
            
            document.getElementById('lang-toggle').addEventListener('click', () => {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                localStorage.setItem('language', currentLanguage);
                stopSpeech();
                updateLanguage(currentLanguage);
            });

            const dsaToggle = document.getElementById('accessibility-toggle');
            dsaToggle.addEventListener('click', () => {
                document.body.classList.toggle('dsa-mode');
                 if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
            });

            const submitQuizBtn = document.getElementById('submit-quiz');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => {
                let score = 0;
                const questions = document.querySelectorAll('.quiz-question');
                quizData[currentLanguage].forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    questions[index].classList.remove('correct', 'incorrect');
                    if (selected) {
                        if (selected.value === q.answer) {
                            score++;
                            questions[index].classList.add('correct');
                        } else {
                            questions[index].classList.add('incorrect');
                        }
                    } else {
                        questions[index].classList.add('incorrect');
                    }
                });
                const resultsContainer = document.getElementById('quiz-results');
                const resultText = {
                    it: `Hai risposto correttamente a ${score} su ${quizData.it.length} domande.`,
                    en: `You answered ${score} out of ${quizData.en.length} questions correctly.`
                };
                resultsContainer.textContent = resultText[currentLanguage];
            });
            
            updateLanguage(currentLanguage);
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('article section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });
            sections.forEach(sec => observer.observe(sec));
        });
    </script>
</body>
</html>

