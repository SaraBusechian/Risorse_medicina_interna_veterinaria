<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Approccio all'Aritmia - Medicina Interna Veterinaria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff1f2; color: #881337; }
        .content-section { background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { transition: all 0.2s; border-bottom: 2px solid transparent; }
        .nav-link:hover, .nav-link.active { border-bottom-color: #f43f5e; color: #be185d; }
        .dsa-mode {
            font-family: 'Lexend', sans-serif;
            background-color: #fdf6f7 !important;
            letter-spacing: 0.05em;
            line-height: 1.75;
            color: #34495e;
        }
        .dsa-mode #main-header, .dsa-mode #main-footer { background-color: #000000 !important; }
        .dsa-mode #main-header h1, .dsa-mode #main-header a, .dsa-mode #main-footer p, .dsa-mode button { color: #ffffff !important; }
        .dsa-mode button { border: 1px solid #ffffff; }
        .dsa-mode .content-section { background-color: #fffdfd; border: 1px solid #e0e0e0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode li { color: #34495e; }
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #64748b; transition: color 0.2s; }
        .tts-button:hover, .tts-button.playing { color: #0ea5e9; }
        .quiz-question { border: 1px solid #fecdd3; transition: all 0.3s; }
        .quiz-option:hover { background-color: #fff1f2; }
        .quiz-question.correct { background-color: #d1fae5; border-color: #10b981; }
        .quiz-question.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        @media print {
            #main-header, #main-footer, #page-nav, #infografica, #quiz, #audio, #print-button, .tts-button, video, img, a[href*="infografica"] { display: none; }
        }
    </style>
</head>
<body class="bg-rose-50">

    <header id="main-header" class="bg-rose-800 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold !text-white !border-none !m-0 !p-0 !text-left" data-lang-key="siteTitle">Patologie Cardiocircolatorie</h1>
            <div class="flex items-center space-x-4">
                <button id="accessibility-toggle" aria-label="Attiva modalità ad alta leggibilità" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilità</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-10">
        <div class="text-left mb-8">
            <a href="index.html" class="inline-flex items-center bg-white text-rose-700 font-bold py-2 px-4 rounded-lg shadow hover:bg-rose-100 transition duration-300" data-lang-key="backToIndex">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd"></path></svg>
                <span data-lang-key="backToIndexText">Indice Patologie Cardiocircolatorie</span>
            </a>
        </div>
        
        <div class="content-section p-6 md:p-10">
            <header class="text-center border-b-2 border-rose-200 pb-6 mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-rose-800" data-lang-key="pageTitle">Approccio all'Aritmia<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h1>
                <p class="text-lg text-rose-700 mt-2" data-lang-key="pageSubtitle">Riconoscimento e gestione dei disturbi del ritmo cardiaco.</p>
            </header>

            <nav id="page-nav" class="flex justify-center flex-wrap gap-4 md:gap-8 mb-10 border-b border-gray-200">
                <a href="#riassunto" class="nav-link font-semibold py-2" data-lang-key="navSummary">Riassunto</a>
                <a href="#infografica" class="nav-link font-semibold py-2" data-lang-key="navInfographic">Infografica</a>
                <a href="#quiz" class="nav-link font-semibold py-2" data-lang-key="navQuiz">Quiz</a>
                <a href="#audio" class="nav-link font-semibold py-2" data-lang-key="navAudio">Audio</a>
                <a href="#bibliografia" class="nav-link font-semibold py-2" data-lang-key="navBibliography">Bibliografia</a>
            </nav>

            <article class="space-y-12">
                <section id="riassunto">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4 flex items-center" data-lang-key="summaryTitle">Riassunto Completo <span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h2>
                    <div class="prose max-w-none text-rose-900" data-lang-key="summaryContent">
                        <!-- Content loaded by JS -->
                    </div>
                </section>

                <section id="infografica">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="infographicTitle">Infografica Riepilogativa</h2>
                      <a href="infografica_aritmia.html" target="_blank" class="block bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow border-l-4 border-rose-500">
                          <div class="flex items-center space-x-6">
                              <div class="flex-shrink-0 w-24 h-24 bg-rose-500 rounded-lg flex items-center justify-center">
                                  <span class="text-5xl" role="img" aria-label="Icona di un elettrocardiogramma">⚡️</span>
                              </div>
                              <div>
                                  <h3 class="text-xl font-bold text-rose-800" data-lang-key="infographicLinkTitle">Visualizza l'Infografica Dettagliata</h3>
                                  <p class="text-gray-600 mt-1" data-lang-key="infographicLinkDesc">Clicca qui per una guida visuale completa sull'approccio alle aritmie.</p>
                              </div>
                          </div>
                      </a>
                </section>

                <section id="quiz">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="quizTitle">Quiz di Autovalutazione</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Questions loaded by JS -->
                    </div>
                    <div class="mt-6 text-center">
                        <button id="submit-quiz" class="bg-rose-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-rose-700 transition" data-lang-key="quizSubmit">Verifica Risposte</button>
                    </div>
                    <div id="quiz-results" class="mt-6 text-center text-xl font-bold"></div>
                </section>

                <section id="audio">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="audioTitle">Ascolta il Riassunto</h2>
                    <div class="p-4 bg-rose-100/50 rounded-lg flex flex-col sm:flex-row items-center gap-4 w-full">
                        <button id="audio-play-pause" class="p-3 bg-rose-500 text-white rounded-full hover:bg-rose-600 transition-colors duration-200">
                            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg>
                            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" viewBox="0 0 20 20" fill="currentColor"><path d="M5.75 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75zM14.25 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75z" /></svg>
                        </button>
                        <div class="flex-grow text-center sm:text-left">
                            <p class="font-semibold text-rose-800" data-lang-key="audioListen">Ascolta il riassunto completo</p>
                            <p class="text-sm text-rose-600" data-lang-key="audioDesc">Ideale per ripassare mentre sei in movimento.</p>
                        </div>
                        <a href="audio_approccio_aritmia.mp3" download class="bg-gray-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition inline-flex items-center w-full sm:w-auto justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            <span data-lang-key="btnDownloadAudio">Scarica</span>
                        </a>
                    </div>
                </section>

                <section id="bibliografia">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="bibliographyTitle">Riferimenti Bibliografici</h2>
                    <ul class="list-disc pl-6 text-rose-900" data-lang-key="bibliographyContent">
                        <!-- Content loaded by JS -->
                    </ul>
                </section>
            </article>
            
            <div class="mt-12 text-center">
                <button id="print-button" onclick="window.print()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition inline-flex items-center" data-lang-key="btnPrint">Stampa Riassunto</button>
            </div>
        </div>
    </main>
    <footer id="main-footer" class="text-center mt-16 pt-8 border-t border-rose-100">
        <p class="text-slate-500" data-lang-key="footer-credit">A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                siteTitle: { it: "Patologie Cardiocircolatorie", en: "Cardiovascular Diseases" },
                backToIndexText: { it: "Indice Patologie Cardiocircolatorie", en: "Cardiovascular Pathology Index" },
                pageTitle: { it: "Approccio all'Aritmia", en: "Approach to Arrhythmia" },
                pageSubtitle: { it: "Riconoscimento e gestione dei disturbi del ritmo cardiaco.", en: "Recognition and management of heart rhythm disorders." },
                navSummary: { it: "Riassunto", en: "Summary" },
                navInfographic: { it: "Infografica", en: "Infographic" },
                navQuiz: { it: "Quiz", en: "Quiz" },
                navAudio: { it: "Audio", en: "Audio" },
                navBibliography: { it: "Bibliografia", en: "Bibliography" },
                summaryTitle: { it: "Riassunto Completo", en: "Full Summary" },
                summaryContent: { 
                    it: `<p>Un'<strong>aritmia</strong> è una qualsiasi alterazione del normale ritmo cardiaco (ritmo sinusale). Può manifestarsi come una frequenza troppo alta (tachicardia), troppo bassa (bradicardia) o irregolare. La sua identificazione e interpretazione sono fondamentali per la gestione del paziente cardiopatico e non solo.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Riconoscimento e Anamnesi</h3>
                        <p>Il sospetto di un'aritmia nasce da segni clinici come <strong>debolezza episodica, intolleranza all'esercizio, sincopi (svenimenti)</strong> o da un riscontro auscultatorio di un ritmo irregolare. L'anamnesi è cruciale per capire se i sintomi sono correlati a sforzo, riposo o eccitazione. È importante ricordare che non tutte le aritmie sono patologiche: l'<strong>aritmia sinusale respiratoria</strong>, ad esempio, è un reperto fisiologico comune nel cane a riposo.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Strumenti Diagnostici</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Elettrocardiogramma (ECG):</strong> È lo strumento <strong>gold standard</strong>. Permette di registrare l'attività elettrica del cuore e di caratterizzare con precisione il tipo di aritmia, la sua origine (sopraventricolare o ventricolare) e la sua gravità.</li>
                            <li><strong>Monitoraggio ECG Holter (24h):</strong> Essenziale per diagnosticare aritmie intermittenti o per quantificare la carica aritmica nell'arco della giornata. È fondamentale nello screening di patologie come la DCM del Dobermann.</li>
                            <li><strong>Ecocardiografia:</strong> Anche se non diagnostica direttamente l'aritmia, è indispensabile per identificare la presenza di una cardiopatia strutturale sottostante, che è spesso la causa dell'aritmia stessa.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Classificazione delle Aritmie</h3>
                        <p>Una prima, fondamentale classificazione si basa sulla frequenza cardiaca:</p>
                         <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Bradiaritmie (ritmi lenti):</strong> Caratterizzate da una frequenza cardiaca inappropriatamente bassa. Possono causare debolezza e sincopi per ipoperfusione cerebrale. Esempi includono il blocco atrioventricolare (BAV) di II e III grado e la sindrome del seno malato.</li>
                            <li><strong>Tachiaritmie (ritmi veloci):</strong> Caratterizzate da una frequenza cardiaca eccessivamente alta. Riducono il tempo di riempimento ventricolare, compromettendo la gittata cardiaca e aumentando il consumo di ossigeno del miocardio. Si dividono in base all'origine:
                                <ul class="list-disc pl-6">
                                    <li><strong>Sopraventricolari:</strong> Originano sopra i ventricoli (es. Fibrillazione Atriale). I complessi QRS sono tipicamente stretti.</li>
                                    <li><strong>Ventricolari:</strong> Originano nei ventricoli (es. Tachicardia Ventricolare). I complessi QRS sono larghi e bizzarri. Sono generalmente considerate più maligne.</li>
                                </ul>
                            </li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Particolarità nel Cavallo</h3>
                        <p>Nel cavallo, l'approccio alle aritmie ha delle peculiarità legate alla sua fisiologia di atleta. Un tono vagale molto alto a riposo rende comune il riscontro di <strong>Blocco Atrioventricolare di I e II grado</strong>, considerato fisiologico e destinato a scomparire con l'esercizio.</p>
                        <p>L'aritmia patologica più importante nel cavallo è la <strong>Fibrillazione Atriale</strong>. Può insorgere senza una cardiopatia strutturale sottostante ("lone atrial fibrillation") ed è una causa primaria di scarso rendimento e intolleranza all'esercizio in cavalli atleti. La diagnosi e la gestione (spesso tramite cardioversione farmacologica) sono cruciali per la carriera sportiva dell'animale.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Quando Trattare?</h3>
                        <p>La decisione di iniziare una terapia antiaritmica dipende da tre fattori principali: la <strong>presenza di segni clinici</strong>, il <strong>rischio di morte improvvisa</strong> associato a un'aritmia maligna (es. TV ad alta frequenza) e il <strong>peggioramento della funzione cardiaca</strong> causato dall'aritmia stessa (es. tachicardiomiopatia).</p>`,
                    en: `<p>An <strong>arrhythmia</strong> is any alteration of the normal heart rhythm (sinus rhythm). It can manifest as a rate that is too high (tachycardia), too low (bradycardia), or irregular. Its identification and interpretation are fundamental for the management of cardiac patients and beyond.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Recognition and History</h3>
                        <p>The suspicion of an arrhythmia arises from clinical signs such as <strong>episodic weakness, exercise intolerance, syncope (fainting)</strong>, or from an auscultatory finding of an irregular rhythm. The history is crucial to understand if the symptoms are related to effort, rest, or excitement. It is important to remember that not all arrhythmias are pathological: <strong>respiratory sinus arrhythmia</strong>, for example, is a common physiological finding in resting dogs.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnostic Tools</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Electrocardiogram (ECG):</strong> This is the <strong>gold standard</strong> tool. It allows recording the electrical activity of the heart and precisely characterizing the type of arrhythmia, its origin (supraventricular or ventricular), and its severity.</li>
                            <li><strong>Holter ECG Monitoring (24h):</strong> Essential for diagnosing intermittent arrhythmias or for quantifying the arrhythmic burden over the course of a day. It is fundamental in screening for pathologies such as Doberman DCM.</li>
                            <li><strong>Echocardiography:</strong> Although it does not directly diagnose the arrhythmia, it is indispensable for identifying the presence of an underlying structural heart disease, which is often the cause of the arrhythmia itself.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Classification of Arrhythmias</h3>
                        <p>A primary, fundamental classification is based on heart rate:</p>
                         <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Bradyarrhythmias (slow rhythms):</strong> Characterized by an inappropriately low heart rate. They can cause weakness and syncope due to cerebral hypoperfusion. Examples include second and third-degree atrioventricular (AV) block and sick sinus syndrome.</li>
                            <li><strong>Tachyarrhythmias (fast rhythms):</strong> Characterized by an excessively high heart rate. They reduce ventricular filling time, compromising cardiac output and increasing myocardial oxygen consumption. They are divided based on their origin:
                                <ul class="list-disc pl-6">
                                    <li><strong>Supraventricular:</strong> Originating above the ventricles (e.g., Atrial Fibrillation). The QRS complexes are typically narrow.</li>
                                    <li><strong>Ventricular:</strong> Originating in the ventricles (e.g., Ventricular Tachycardia). The QRS complexes are wide and bizarre. They are generally considered more malignant.</li>
                                </ul>
                            </li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Peculiarities in the Horse</h3>
                        <p>In horses, the approach to arrhythmias has unique aspects related to their physiology as athletes. A very high vagal tone at rest makes the finding of <strong>First and Second-Degree Atrioventricular Block</strong> common, which is considered physiological and disappears with exercise.</p>
                        <p>The most important pathological arrhythmia in the horse is <strong>Atrial Fibrillation</strong>. It can occur without underlying structural heart disease ("lone atrial fibrillation") and is a primary cause of poor performance and exercise intolerance in athletic horses. Diagnosis and management (often through pharmacological cardioversion) are crucial for the animal's athletic career.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">When to Treat?</h3>
                        <p>The decision to start antiarrhythmic therapy depends on three main factors: the <strong>presence of clinical signs</strong>, the <strong>risk of sudden death</strong> associated with a malignant arrhythmia (e.g., high-rate VT), and the <strong>worsening of cardiac function</strong> caused by the arrhythmia itself (e.g., tachycardiomyopathy).</p>`
                },
                infographicTitle: { it: "Infografica Riepilogativa", en: "Summary Infographic" },
                infographicLinkTitle: { it: "Visualizza l'Infografica Dettagliata", en: "View the Detailed Infographic" },
                infographicLinkDesc: { it: "Clicca qui per una guida visuale completa sull'approccio alle aritmie.", en: "Click here for a complete visual guide on the approach to arrhythmias." },
                quizTitle: { it: "Quiz di Autovalutazione", en: "Self-Assessment Quiz" },
                quizSubmit: { it: "Verifica Risposte", en: "Check Answers" },
                audioTitle: { it: "Ascolta il Riassunto", en: "Listen to the Summary" },
                btnDownloadAudio: { it: "Scarica", en: "Download" },
                audioListen: { it: "Ascolta il riassunto completo", en: "Listen to the full summary" },
                audioDesc: { it: "Ideale per ripassare mentre sei in movimento.", en: "Ideal for reviewing on the go." },
                bibliographyTitle: { it: "Riferimenti Bibliografici", en: "Bibliographical References" },
                bibliographyContent: { 
                    it: `<li>Ettinger SJ, Feldman EC, Côté E, Textbook of Veterinary Internal Medicine, 9th Edition, Elsevier, 2024</li><li>Reed SM, Bayly WM, Sellon DC, Equine Internal Medicine, 4th Edition, Elsevier, 2018</li><li>Reef, V.B., Bonagura, J., Buhl, R., et al. (2014), Recommendations for Management of Equine Athletes with Cardiovascular Abnormalities. J Vet Intern Med, 28: 749-761</li>`,
                    en: `<li>Ettinger SJ, Feldman EC, Côté E, Textbook of Veterinary Internal Medicine, 9th Edition, Elsevier, 2024</li><li>Reed SM, Bayly WM, Sellon DC, Equine Internal Medicine, 4th Edition, Elsevier, 2018</li><li>Reef, V.B., Bonagura, J., Buhl, R., et al. (2014), Recommendations for Management of Equine Athletes with Cardiovascular Abnormalities. J Vet Intern Med, 28: 749-761</li>`
                },
                btnPrint: { it: "Stampa Riassunto", en: "Print Summary" },
                accessibility: { it: "Accessibilità", en: "Accessibility" },
                "footer-credit": { it: "A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria", en: "Curated by Prof. Sara Busechian. Veterinary clinical medicine teachings" }
            };

            const quizData = {
                it: [
                    { question: "Qual è il gold standard per la diagnosi di un'aritmia?", options: ["Auscultazione", "Ecocardiogramma", "Elettrocardiogramma (ECG)", "Radiografie toraciche"], answer: "Elettrocardiogramma (ECG)" },
                    { question: "Una sincope è un segno clinico più probabile in caso di:", options: ["Tachiaritmia lieve", "Bradiaritmia grave", "Aritmia sinusale respiratoria", "Nessuna delle precedenti"], answer: "Bradiaritmia grave" },
                    { question: "Come appaiono tipicamente i complessi QRS in una tachicardia di origine ventricolare?", options: ["Stretti e regolari", "Assenti", "Larghi e bizzarri", "Stretti e irregolari"], answer: "Larghi e bizzarri" },
                    { question: "Per quale scopo si utilizza un monitoraggio ECG Holter?", options: ["Per trattare un'aritmia in emergenza", "Per visualizzare la struttura del cuore", "Per registrare l'ECG per 24 ore e rilevare aritmie intermittenti", "Per misurare la pressione sanguigna"], answer: "Per registrare l'ECG per 24 ore e rilevare aritmie intermittenti" },
                    { question: "La fibrillazione atriale è classificata come:", options: ["Bradiaritmia ventricolare", "Tachiaritmia ventricolare", "Bradiaritmia sopraventricolare", "Tachiaritmia sopraventricolare"], answer: "Tachiaritmia sopraventricolare" },
                    { question: "Quale delle seguenti non è un'indicazione primaria per iniziare una terapia antiaritmica?", options: ["Presenza di sincopi", "Rischio di morte improvvisa", "Aritmia sinusale respiratoria in un cane sano", "Peggioramento della funzione cardiaca a causa dell'aritmia"], answer: "Aritmia sinusale respiratoria in un cane sano" },
                    { question: "Una frequenza cardiaca persistentemente molto alta può danneggiare il miocardio, causando una condizione nota come:", options: ["Infarto miocardico", "Tachicardiomiopatia", "Endocardite", "Miocardite"], answer: "Tachicardiomiopatia" },
                    { question: "Quale esame è fondamentale per determinare se un'aritmia è causata da una cardiopatia strutturale?", options: ["ECG", "Esami del sangue", "Ecocardiografia", "Misurazione della pressione"], answer: "Ecocardiografia" },
                    { question: "Un blocco atrioventricolare di terzo grado (BAV completo) è un esempio di:", options: ["Aritmia fisiologica", "Tachiaritmia", "Bradiaritmia", "Normale conduzione"], answer: "Bradiaritmia" },
                    { question: "Quale segno clinico è il più allarmante e richiede un'immediata valutazione ECG?", options: ["Tosse occasionale", "Intolleranza all'esercizio lieve", "Svenimento (sincope)", "Appetito capriccioso"], answer: "Svenimento (sincope)" }
                ],
                en: [
                    { question: "What is the gold standard for diagnosing an arrhythmia?", options: ["Auscultation", "Echocardiogram", "Electrocardiogram (ECG)", "Chest radiographs"], answer: "Electrocardiogram (ECG)" },
                    { question: "Syncope is a more likely clinical sign in the case of:", options: ["Mild tachyarrhythmia", "Severe bradyarrhythmia", "Respiratory sinus arrhythmia", "None of the above"], answer: "Severe bradyarrhythmia" },
                    { question: "How do QRS complexes typically appear in a tachycardia of ventricular origin?", options: ["Narrow and regular", "Absent", "Wide and bizarre", "Narrow and irregular"], answer: "Wide and bizarre" },
                    { question: "For what purpose is Holter ECG monitoring used?", options: ["To treat an emergency arrhythmia", "To visualize the heart's structure", "To record the ECG for 24 hours and detect intermittent arrhythmias", "To measure blood pressure"], answer: "To record the ECG for 24 hours and detect intermittent arrhythmias" },
                    { question: "Atrial fibrillation is classified as:", options: ["Ventricular bradyarrhythmia", "Ventricular tachyarrhythmia", "Supraventricular bradyarrhythmia", "Supraventricular tachyarrhythmia"], answer: "Supraventricular tachyarrhythmia" },
                    { question: "Which of the following is not a primary indication for starting antiarrhythmic therapy?", options: ["Presence of syncope", "Risk of sudden death", "Respiratory sinus arrhythmia in a healthy dog", "Worsening of cardiac function due to the arrhythmia"], answer: "Respiratory sinus arrhythmia in a healthy dog" },
                    { question: "A persistently very high heart rate can damage the myocardium, causing a condition known as:", options: ["Myocardial infarction", "Tachycardiomyopathy", "Endocarditis", "Myocarditis"], answer: "Tachycardiomyopathy" },
                    { question: "Which exam is fundamental to determine if an arrhythmia is caused by a structural heart disease?", options: ["ECG", "Blood tests", "Echocardiography", "Pressure measurement"], answer: "Echocardiography" },
                    { question: "A third-degree atrioventricular block (complete AV block) is an example of:", options: ["Physiological arrhythmia", "Tachyarrhythmia", "Bradyarrhythmia", "Normal conduction"], answer: "Bradyarrhythmia" },
                    { question: "Which clinical sign is the most alarming and requires an immediate ECG evaluation?", options: ["Occasional cough", "Mild exercise intolerance", "Fainting (syncope)", "Picky appetite"], answer: "Fainting (syncope)" }
                ]
            };
            
            // --- GENERIC SCRIPT (DO NOT EDIT BELOW THIS LINE) ---

            let currentLanguage = localStorage.getItem('language') || 'it';
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;

            function stopSpeech() { if (synth.speaking) synth.cancel(); }
            
            function speak(text, button) {
                if (activeTTSButton === button && currentUtterance) {
                    if (synth.paused) { synth.resume(); button.classList.add('playing'); } 
                    else if (synth.speaking) { synth.pause(); button.classList.remove('playing'); }
                    return; 
                }
                stopSpeech();
                if(activeTTSButton) activeTTSButton.classList.remove('playing');
                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                currentUtterance.onend = () => {
                    if (button) button.classList.remove('playing');
                    activeTTSButton = null; currentUtterance = null;
                };
                currentUtterance.onerror = (event) => {
                    if (event.error !== 'canceled' && event.error !== 'interrupted') console.error('TTS Error:', event.error);
                    if (button) button.classList.remove('playing');
                    activeTTSButton = null; currentUtterance = null;
                };
                activeTTSButton = button; button.classList.add('playing');
                synth.speak(currentUtterance);
            }

            let sound = null;
            function initHowler() {
                const audioFile = document.querySelector('#audio a[download]').href;
                if (!audioFile) return;
                sound = new Howl({
                    src: [audioFile], html5: true, 
                    onplay: () => { playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); },
                    onpause: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onend: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onloaderror: (id, msg) => { console.error("Error loading audio:", msg); },
                    onplayerror: (id, msg) => { console.error("Error playing audio:", msg); }
                });
            }

            const playPauseBtn = document.getElementById('audio-play-pause');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            if(playPauseBtn) playPauseBtn.addEventListener('click', () => {
                if (!sound) initHowler();
                if(sound) { if (sound.playing()) sound.pause(); else sound.play(); }
            });

            function setupTTSListeners() {
                document.querySelectorAll('.tts-button').forEach(button => {
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                    newButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        let textToRead = '';
                        const parentElement = newButton.parentElement;

                        if (parentElement.tagName === 'H1' && parentElement.dataset.langKey === 'pageTitle') {
                            const titleClone = parentElement.cloneNode(true);
                            titleClone.querySelector('.tts-button').remove();
                            textToRead = titleClone.textContent.trim();
                            const subtitle = parentElement.nextElementSibling;
                            if(subtitle && subtitle.dataset.langKey === 'pageSubtitle') {
                                textToRead += '. ' + subtitle.textContent.trim();
                            }
                        }
                        else if (parentElement.tagName === 'H2') {
                            const section = parentElement.closest('section');
                            const titleClone = parentElement.cloneNode(true);
                            titleClone.querySelector('.tts-button').remove();
                            textToRead = titleClone.textContent.trim();

                            if (section && section.id === 'riassunto') {
                                const content = section.querySelector('[data-lang-key="summaryContent"]');
                                if (content) {
                                    const contentClone = content.cloneNode(true);
                                    textToRead += '. ' + contentClone.textContent.trim().replace(/\s\s+/g, ' ');
                                }
                            }
                        }
                        if (textToRead) speak(textToRead, newButton);
                    });
                });
            }

            function loadQuiz(lang) {
                const quizContainer = document.getElementById('quiz-container');
                if(!quizContainer) return;
                quizContainer.innerHTML = '';
                document.getElementById('quiz-results').innerHTML = ''; 
                quizData[lang].forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question p-4 rounded-lg';
                    let optionsHtml = q.options.map(o => `
                        <li class="quiz-option p-2 rounded hover:bg-rose-50">
                            <label class="flex items-center w-full cursor-pointer">
                                <input type="radio" name="q${index}" value="${o}" class="mr-3">${o}
                            </label>
                        </li>`).join('');
                    questionDiv.innerHTML = `<h3 class="font-semibold mb-2">${index + 1}. ${q.question}</h3><ul class="space-y-1">${optionsHtml}</ul>`;
                    quizContainer.appendChild(questionDiv);
                });
            }

            function updateLanguage(lang) {
                document.documentElement.lang = lang;
                document.getElementById('lang-toggle').textContent = lang === 'it' ? 'EN' : 'IT';
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.dataset.langKey;
                    if (translations[key] && translations[key][lang]) {
                        if (key.includes('Content')) {
                            element.innerHTML = translations[key][lang];
                        } else {
                            const ttsButton = element.querySelector('.tts-button');
                            const textNode = [...element.childNodes].find(node => node.nodeType === Node.TEXT_NODE && node.textContent.trim());
                            if (textNode) {
                                textNode.textContent = translations[key][lang];
                            } else {
                                element.textContent = translations[key][lang];
                            }
                            if(ttsButton) element.appendChild(ttsButton);
                        }
                    }
                });
                
                const dsaToggle = document.getElementById('accessibility-toggle');
                if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = lang === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = lang === 'it' ? 'Accessibilità' : 'Accessibility';
                }
                loadQuiz(lang);
                setupTTSListeners();
            }
            
            document.getElementById('lang-toggle').addEventListener('click', () => {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                localStorage.setItem('language', currentLanguage);
                stopSpeech();
                updateLanguage(currentLanguage);
            });

            const dsaToggle = document.getElementById('accessibility-toggle');
            dsaToggle.addEventListener('click', () => {
                document.body.classList.toggle('dsa-mode');
                 if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Accessibilità' : 'Accessibility';
                }
            });

            const submitQuizBtn = document.getElementById('submit-quiz');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => {
                let score = 0;
                const questions = document.querySelectorAll('.quiz-question');
                quizData[currentLanguage].forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    questions[index].classList.remove('correct', 'incorrect');
                    if (selected) {
                        if (selected.value === q.answer) {
                            score++;
                            questions[index].classList.add('correct');
                        } else {
                            questions[index].classList.add('incorrect');
                        }
                    } else {
                        questions[index].classList.add('incorrect');
                    }
                });
                const resultsContainer = document.getElementById('quiz-results');
                const resultText = {
                    it: `Hai risposto correttamente a ${score} su ${quizData.it.length} domande.`,
                    en: `You answered ${score} out of ${quizData.en.length} questions correctly.`
                };
                resultsContainer.textContent = resultText[currentLanguage];
            });
            
            updateLanguage(currentLanguage);
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('article section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });
            sections.forEach(sec => observer.observe(sec));
        });
    </script>
</body>
</html>

