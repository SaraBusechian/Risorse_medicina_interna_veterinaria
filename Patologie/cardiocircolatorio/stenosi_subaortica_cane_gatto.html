<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stenosi Subaortica (Cane e Gatto) - Medicina Interna Veterinaria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff1f2; color: #881337; }
        .content-section { background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { transition: all 0.2s; border-bottom: 2px solid transparent; }
        .nav-link:hover, .nav-link.active { border-bottom-color: #f43f5e; color: #be185d; }
        .dsa-mode {
            font-family: 'Lexend', sans-serif;
            background-color: #fdf6f7 !important;
            letter-spacing: 0.05em;
            line-height: 1.75;
            color: #34495e;
        }
        .dsa-mode #main-header, .dsa-mode #main-footer { background-color: #000000 !important; }
        .dsa-mode #main-header h1, .dsa-mode #main-header a, .dsa-mode #main-footer p, .dsa-mode button { color: #ffffff !important; }
        .dsa-mode button { border: 1px solid #ffffff; }
        .dsa-mode .content-section { background-color: #fffdfd; border: 1px solid #e0e0e0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode li { color: #34495e; }
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #64748b; transition: color 0.2s; }
        .tts-button:hover, .tts-button.playing { color: #0ea5e9; }
        .quiz-question { border: 1px solid #fecdd3; transition: all 0.3s; }
        .quiz-option:hover { background-color: #fff1f2; }
        .quiz-question.correct { background-color: #d1fae5; border-color: #10b981; }
        .quiz-question.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        @media print {
            #main-header, #main-footer, #page-nav, #infografica, #quiz, #audio, #print-button, .tts-button, video, img, a[href*="infografica"] { display: none; }
        }
    </style>
</head>
<body class="bg-rose-50">

    <header id="main-header" class="bg-rose-800 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold !text-white !border-none !m-0 !p-0 !text-left" data-lang-key="siteTitle">Patologie Cardiocircolatorie</h1>
            <div class="flex items-center space-x-4">
                <button id="accessibility-toggle" aria-label="Attiva modalit√† ad alta leggibilit√†" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilit√†</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-10">
        <div class="text-left mb-8">
            <a href="patologie_cardiocircolatorio.html" class="inline-flex items-center bg-white text-rose-700 font-bold py-2 px-4 rounded-lg shadow hover:bg-rose-100 transition duration-300" data-lang-key="backToIndex">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd"></path></svg>
                <span data-lang-key="backToIndexText">Indice Patologie Cardiocircolatorie</span>
            </a>
        </div>
        
        <div class="content-section p-6 md:p-10">
            <header class="text-center border-b-2 border-rose-200 pb-6 mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-rose-800" data-lang-key="pageTitle">Stenosi Subaortica (Cane e Gatto)<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h1>
                <p class="text-lg text-rose-700 mt-2" data-lang-key="pageSubtitle">Una comune cardiopatia congenita ostruttiva.</p>
            </header>

            <nav id="page-nav" class="flex justify-center flex-wrap gap-4 md:gap-8 mb-10 border-b border-gray-200">
                <a href="#riassunto" class="nav-link font-semibold py-2" data-lang-key="navSummary">Riassunto</a>
                <a href="#infografica" class="nav-link font-semibold py-2" data-lang-key="navInfographic">Infografica</a>
                <a href="#quiz" class="nav-link font-semibold py-2" data-lang-key="navQuiz">Quiz</a>
                <a href="#audio" class="nav-link font-semibold py-2" data-lang-key="navAudio">Audio</a>
                <a href="#bibliografia" class="nav-link font-semibold py-2" data-lang-key="navBibliography">Bibliografia</a>
            </nav>

            <article class="space-y-12">
                <section id="riassunto">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4 flex items-center" data-lang-key="summaryTitle">Riassunto Completo <span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h2>
                    <div class="prose max-w-none text-rose-900" data-lang-key="summaryContent">
                        <!-- Content loaded by JS -->
                    </div>
                </section>

                <section id="infografica">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="infographicTitle">Infografica Riepilogativa</h2>
                      <a href="infografica_stenosi_subaortica_cane_gatto.html" target="_blank" class="block bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow border-l-4 border-rose-500">
                          <div class="flex items-center space-x-6">
                              <div class="flex-shrink-0 w-24 h-24 bg-rose-500 rounded-lg flex items-center justify-center">
                                  <span class="text-5xl" role="img" aria-label="Icona di un cane di razza grande">üêï</span>
                              </div>
                              <div>
                                  <h3 class="text-xl font-bold text-rose-800" data-lang-key="infographicLinkTitle">Visualizza l'Infografica Dettagliata</h3>
                                  <p class="text-gray-600 mt-1" data-lang-key="infographicLinkDesc">Clicca qui per una guida visuale completa sulla Stenosi Subaortica.</p>
                              </div>
                          </div>
                      </a>
                </section>

                <section id="quiz">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="quizTitle">Quiz di Autovalutazione</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Questions loaded by JS -->
                    </div>
                    <div class="mt-6 text-center">
                        <button id="submit-quiz" class="bg-rose-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-rose-700 transition" data-lang-key="quizSubmit">Verifica Risposte</button>
                    </div>
                    <div id="quiz-results" class="mt-6 text-center text-xl font-bold"></div>
                </section>

                <section id="audio">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="audioTitle">Ascolta il Riassunto</h2>
                    <div class="p-4 bg-rose-100/50 rounded-lg flex flex-col sm:flex-row items-center gap-4 w-full">
                        <button id="audio-play-pause" class="p-3 bg-rose-500 text-white rounded-full hover:bg-rose-600 transition-colors duration-200">
                            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg>
                            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" viewBox="0 0 20 20" fill="currentColor"><path d="M5.75 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75zM14.25 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75z" /></svg>
                        </button>
                        <div class="flex-grow text-center sm:text-left">
                            <p class="font-semibold text-rose-800" data-lang-key="audioListen">Ascolta il riassunto completo</p>
                            <p class="text-sm text-rose-600" data-lang-key="audioDesc">Ideale per ripassare mentre sei in movimento.</p>
                        </div>
                        <a href="audio_sas_cane_gatto.mp3" download class="bg-gray-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition inline-flex items-center w-full sm:w-auto justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            <span data-lang-key="btnDownloadAudio">Scarica</span>
                        </a>
                    </div>
                </section>

                <section id="bibliografia">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="bibliographyTitle">Riferimenti Bibliografici</h2>
                    <ul class="list-disc pl-6 text-rose-900" data-lang-key="bibliographyContent">
                        <!-- Content loaded by JS -->
                    </ul>
                </section>
            </article>
            
            <div class="mt-12 text-center">
                <button id="print-button" onclick="window.print()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition inline-flex items-center" data-lang-key="btnPrint">Stampa Riassunto</button>
            </div>
        </div>
    </main>
    <footer id="main-footer" class="text-center mt-16 pt-8 border-t border-rose-100">
        <p class="text-slate-500" data-lang-key="footer-credit">A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                siteTitle: { it: "Patologie Cardiocircolatorie", en: "Cardiovascular Diseases" },
                backToIndexText: { it: "Indice Patologie Cardiocircolatorie", en: "Cardiovascular Pathology Index" },
                pageTitle: { it: "Stenosi Subaortica (Cane e Gatto)", en: "Subaortic Stenosis (Dog and Cat)" },
                pageSubtitle: { it: "Una comune cardiopatia congenita ostruttiva.", en: "A common congenital obstructive heart disease." },
                navSummary: { it: "Riassunto", en: "Summary" },
                navInfographic: { it: "Infografica", en: "Infographic" },
                navQuiz: { it: "Quiz", en: "Quiz" },
                navAudio: { it: "Audio", en: "Audio" },
                navBibliography: { it: "Bibliografia", en: "Bibliography" },
                summaryTitle: { it: "Riassunto Completo", en: "Full Summary" },
                summaryContent: { 
                    it: `<p>La <strong>Stenosi Subaortica (SAS)</strong> √® una delle cardiopatie congenite pi√π comuni nel cane, specialmente in razze di taglia grande. √à caratterizzata da un restringimento (stenosi) localizzato nel tratto di efflusso del ventricolo sinistro, appena al di sotto della valvola aortica.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Fisiopatologia</h3>
                        <p>La stenosi √® tipicamente causata da un anello o una cresta di tessuto fibroso. Questa ostruzione costringe il ventricolo sinistro a generare pressioni molto pi√π elevate per espellere il sangue in aorta, determinando un <strong>sovraccarico di pressione</strong> cronico. La risposta del miocardio √® un'<strong>ipertrofia concentrica</strong> (ispessimento delle pareti). L'alta velocit√† del sangue che attraversa la stenosi crea un flusso turbolento post-stenotico che pu√≤ causare dilatazione dell'aorta ascendente. L'ipertrofia e l'alterato flusso coronarico predispongono a <strong>ischemia miocardica</strong>, fibrosi e aritmie ventricolari, che sono la causa principale di <strong>morte improvvisa</strong>, il rischio pi√π grave in questa patologia.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Segnalamento e Gradazione</h3>
                        <p>√à una malattia con una forte predisposizione genetica. Le razze pi√π colpite includono <strong>Golden Retriever, Rottweiler, Boxer e Terranova</strong>. I segni clinici dipendono dalla gravit√† della stenosi. Le forme lievi sono asintomatiche. Le forme gravi possono causare intolleranza all'esercizio, sincopi (svenimenti legati allo sforzo) o morte improvvisa, spesso in animali giovani (< 3 anni).</p>
                        <p>La gravit√† viene classificata tramite ecocardiografia Doppler misurando il gradiente di pressione (PG) attraverso la stenosi:</p>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Lieve:</strong> PG < 50 mmHg. Prognosi buona, vita normale.</li>
                            <li><strong>Moderata:</strong> PG 50-80 mmHg. Rischio moderato di complicanze.</li>
                            <li><strong>Grave:</strong> PG > 80 mmHg. Rischio elevato di scompenso cardiaco, endocardite e morte improvvisa.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosi</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Auscultazione:</strong> Soffio sistolico eiettivo (in crescendo-decrescendo o "a diamante") con punto di massima intensit√† sulla base cardiaca sinistra (focolaio aortico). Nelle forme gravi il soffio √® forte e si irradia alle carotidi.</li>
                             <li><strong>Ecocardiografia Doppler:</strong> √à l'esame <strong>gold standard</strong>. Permette di visualizzare l'anello subaortico e di misurare il gradiente pressorio per determinare la gravit√† e formulare la prognosi.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Terapia</h3>
                        <p>Non esiste una terapia medica in grado di risolvere l'ostruzione. La gestione si concentra sulla prevenzione delle complicanze:</p>
                         <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Beta-bloccanti (es. Atenololo):</strong> Sono il cardine della terapia per le forme moderate e gravi. Riducono la frequenza cardiaca, il consumo di ossigeno del miocardio e la gravit√† dell'ostruzione dinamica, diminuendo il rischio di aritmie e morte improvvisa.</li>
                            <li><strong>Restrizione dell'esercizio fisico:</strong> Fondamentale nei pazienti con stenosi grave per ridurre il rischio di sincopi e morte improvvisa.</li>
                            <li><strong>Profilassi per l'endocardite:</strong> Raccomandata in caso di procedure che possono causare batteriemia (es. procedure dentali).</li>
                        </ul>
                        <p>Interventi chirurgici o procedure interventistiche hanno risultati controversi.</p>`,
                    en: `<p><strong>Subaortic Stenosis (SAS)</strong> is one of the most common congenital heart diseases in dogs, especially in large breeds. It is characterized by a narrowing (stenosis) located in the left ventricular outflow tract, just below the aortic valve.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Pathophysiology</h3>
                        <p>The stenosis is typically caused by a ring or ridge of fibrous tissue. This obstruction forces the left ventricle to generate much higher pressures to eject blood into the aorta, resulting in a chronic <strong>pressure overload</strong>. The myocardium's response is <strong>concentric hypertrophy</strong> (thickening of the walls). The high velocity of blood flowing through the stenosis creates post-stenotic turbulent flow that can cause dilation of the ascending aorta. The hypertrophy and altered coronary flow predispose to <strong>myocardial ischemia</strong>, fibrosis, and ventricular arrhythmias, which are the main cause of <strong>sudden death</strong>, the most serious risk in this pathology.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Signalment and Grading</h3>
                        <p>It is a disease with a strong genetic predisposition. The most affected breeds include <strong>Golden Retrievers, Rottweilers, Boxers, and Newfoundlands</strong>. Clinical signs depend on the severity of the stenosis. Mild forms are asymptomatic. Severe forms can cause exercise intolerance, syncope (fainting related to exertion), or sudden death, often in young animals (< 3 years).</p>
                        <p>The severity is graded via Doppler echocardiography by measuring the pressure gradient (PG) across the stenosis:</p>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Mild:</strong> PG < 50 mmHg. Good prognosis, normal life.</li>
                            <li><strong>Moderate:</strong> PG 50-80 mmHg. Moderate risk of complications.</li>
                            <li><strong>Severe:</strong> PG > 80 mmHg. High risk of heart failure, endocarditis, and sudden death.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosis</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Auscultation:</strong> Systolic ejection murmur (crescendo-decrescendo or "diamond-shaped") with its point of maximum intensity at the left heart base (aortic area). In severe forms, the murmur is loud and radiates to the carotids.</li>
                             <li><strong>Doppler Echocardiography:</strong> It is the <strong>gold standard</strong> exam. It allows visualization of the subaortic ring and measurement of the pressure gradient to determine severity and formulate a prognosis.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Therapy</h3>
                        <p>There is no medical therapy that can resolve the obstruction. Management focuses on preventing complications:</p>
                         <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Beta-blockers (e.g., Atenolol):</strong> They are the cornerstone of therapy for moderate and severe forms. They reduce heart rate, myocardial oxygen consumption, and the severity of dynamic obstruction, decreasing the risk of arrhythmias and sudden death.</li>
                            <li><strong>Exercise restriction:</strong> Essential in patients with severe stenosis to reduce the risk of syncope and sudden death.</li>
                            <li><strong>Endocarditis prophylaxis:</strong> Recommended for procedures that can cause bacteremia (e.g., dental procedures).</li>
                        </ul>
                        <p>Surgical or interventional procedures have controversial results.</p>`
                },
                infographicTitle: { it: "Infografica Riepilogativa", en: "Summary Infographic" },
                infographicLinkTitle: { it: "Visualizza l'Infografica Dettagliata", en: "View the Detailed Infographic" },
                infographicLinkDesc: { it: "Clicca qui per una guida visuale completa sulla Stenosi Subaortica.", en: "Click here for a complete visual guide on Subaortic Stenosis." },
                quizTitle: { it: "Quiz di Autovalutazione", en: "Self-Assessment Quiz" },
                quizSubmit: { it: "Verifica Risposte", en: "Check Answers" },
                audioTitle: { it: "Ascolta il Riassunto", en: "Listen to the Summary" },
                btnDownloadAudio: { it: "Scarica", en: "Download" },
                audioListen: { it: "Ascolta il riassunto completo", en: "Listen to the full summary" },
                audioDesc: { it: "Ideale per ripassare mentre sei in movimento.", en: "Ideal for reviewing on the go." },
                bibliographyTitle: { it: "Riferimenti Bibliografici", en: "Bibliographical References" },
                bibliographyContent: { 
                    it: `<li>Ettinger SJ, Feldman EC, C√¥t√© E, Textbook of Veterinary Internal Medicine, 9th Edition, Elsevier, 2024</li>`,
                    en: `<li>Ettinger SJ, Feldman EC, C√¥t√© E, Textbook of Veterinary Internal Medicine, 9th Edition, Elsevier, 2024</li>`
                },
                btnPrint: { it: "Stampa Riassunto", en: "Print Summary" },
                accessibility: { it: "Accessibilit√†", en: "Accessibility" },
                "footer-credit": { it: "A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria", en: "Curated by Prof. Sara Busechian. Veterinary clinical medicine teachings" }
            };

            const quizData = {
                it: [
                    { question: "Qual √® la principale alterazione fisiopatologica nella Stenosi Subaortica?", options: ["Sovraccarico di volume del ventricolo sinistro", "Sovraccarico di pressione del ventricolo sinistro", "Sovraccarico di volume del ventricolo destro", "Shunt da sinistra a destra"], answer: "Sovraccarico di pressione del ventricolo sinistro" },
                    { question: "Quale tipo di rimodellamento cardiaco si sviluppa in risposta alla SAS?", options: ["Ipertrofia eccentrica", "Dilatazione atriale", "Ipertrofia concentrica", "Atrofia miocardica"], answer: "Ipertrofia concentrica" },
                    { question: "Qual √® il rischio pi√π grave associato alla SAS severa?", options: ["Tromboembolismo", "Scompenso cardiaco destro", "Morte improvvisa", "Insufficienza renale"], answer: "Morte improvvisa" },
                    { question: "Quale reperto auscultatorio √® tipico della SAS?", options: ["Soffio continuo", "Soffio diastolico", "Soffio sistolico eiettivo", "Ritmo di galoppo"], answer: "Soffio sistolico eiettivo" },
                    { question: "Un gradiente di pressione (PG) di 100 mmHg attraverso la stenosi √® considerato:", options: ["Lieve", "Moderato", "Grave", "Fisiologico"], answer: "Grave" },
                    { question: "Quale classe di farmaci √® il cardine della terapia medica per la SAS da moderata a grave?", options: ["Diuretici", "ACE-inibitori", "Beta-bloccanti", "Calcio-antagonisti"], answer: "Beta-bloccanti" },
                    { question: "Quale razza √® particolarmente predisposta alla SAS?", options: ["Chihuahua", "Golden Retriever", "Bassotto", "Gatto Siamese"], answer: "Golden Retriever" },
                    { question: "I beta-bloccanti (es. atenololo) sono utili nella SAS perch√©:", options: ["Aumentano la forza di contrazione", "Riducono il consumo di ossigeno del miocardio e il rischio di aritmie", "Risolvono l'ostruzione fibrosa", "Aumentano la pressione arteriosa"], answer: "Riducono il consumo di ossigeno del miocardio e il rischio di aritmie" },
                    { question: "Un cane con SAS grave √® ad alto rischio di sviluppare quale complicanza secondaria?", options: ["Ipertiroidismo", "Endocardite batterica", "Pericardite", "Neoplasia splenica"], answer: "Endocardite batterica" },
                    { question: "Qual √® la gestione raccomandata per un cane con SAS grave?", options: ["Nessuna restrizione", "Terapia chirurgica immediata", "Restrizione dell'esercizio e terapia con beta-bloccanti", "Solo monitoraggio annuale"], answer: "Restrizione dell'esercizio e terapia con beta-bloccanti" }
                ],
                en: [
                    { question: "What is the main pathophysiological alteration in Subaortic Stenosis?", options: ["Left ventricular volume overload", "Left ventricular pressure overload", "Right ventricular volume overload", "Left-to-right shunt"], answer: "Left ventricular pressure overload" },
                    { question: "What type of cardiac remodeling develops in response to SAS?", options: ["Eccentric hypertrophy", "Atrial dilation", "Concentric hypertrophy", "Myocardial atrophy"], answer: "Concentric hypertrophy" },
                    { question: "What is the most serious risk associated with severe SAS?", options: ["Thromboembolism", "Right-sided heart failure", "Sudden death", "Renal failure"], answer: "Sudden death" },
                    { question: "Which auscultatory finding is typical of SAS?", options: ["Continuous murmur", "Diastolic murmur", "Systolic ejection murmur", "Gallop rhythm"], answer: "Systolic ejection murmur" },
                    { question: "A pressure gradient (PG) of 100 mmHg across the stenosis is considered:", options: ["Mild", "Moderate", "Severe", "Physiological"], answer: "Severe" },
                    { question: "Which class of drugs is the cornerstone of medical therapy for moderate to severe SAS?", options: ["Diuretics", "ACE-inhibitors", "Beta-blockers", "Calcium-channel blockers"], answer: "Beta-blockers" },
                    { question: "Which breed is particularly predisposed to SAS?", options: ["Chihuahua", "Golden Retriever", "Dachshund", "Siamese cat"], answer: "Golden Retriever" },
                    { question: "Beta-blockers (e.g., atenolol) are useful in SAS because they:", options: ["Increase the force of contraction", "Reduce myocardial oxygen consumption and the risk of arrhythmias", "Resolve the fibrous obstruction", "Increase arterial blood pressure"], answer: "Reduce myocardial oxygen consumption and the risk of arrhythmias" },
                    { question: "A dog with severe SAS is at high risk of developing which secondary complication?", options: ["Hyperthyroidism", "Bacterial endocarditis", "Pericarditis", "Splenic neoplasia"], answer: "Bacterial endocarditis" },
                    { question: "What is the recommended management for a dog with severe SAS?", options: ["No restrictions", "Immediate surgical therapy", "Exercise restriction and beta-blocker therapy", "Annual monitoring only"], answer: "Exercise restriction and beta-blocker therapy" }
                ]
            };
            
            // --- GENERIC SCRIPT (DO NOT EDIT BELOW THIS LINE) ---

            let currentLanguage = localStorage.getItem('language') || 'it';
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;

            function stopSpeech() { if (synth.speaking || synth.paused) synth.cancel(); }
            
            function speak(text, button) {
                if (activeTTSButton === button && currentUtterance) {
                    if (synth.paused) { synth.resume(); } 
                    else if (synth.speaking) { synth.pause(); }
                    return; 
                }
                
                stopSpeech();
                if(activeTTSButton) activeTTSButton.classList.remove('playing');

                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                
                currentUtterance.onstart = () => {
                    button.classList.add('playing');
                    activeTTSButton = button;
                };
                currentUtterance.onpause = () => button.classList.remove('playing');
                currentUtterance.onresume = () => button.classList.add('playing');

                const cleanup = () => {
                    button.classList.remove('playing');
                    if (activeTTSButton === button) {
                        activeTTSButton = null;
                        currentUtterance = null;
                    }
                };
                
                currentUtterance.onend = cleanup;
                currentUtterance.onerror = (event) => {
                    if (event.error !== 'canceled' && event.error !== 'interrupted') {
                        console.error('TTS Error:', event.error);
                    }
                    cleanup();
                };
                
                synth.speak(currentUtterance);
            }

            let sound = null;
            function initHowler() {
                const audioFile = document.querySelector('#audio a[download]').href;
                if (!audioFile) return;
                sound = new Howl({
                    src: [audioFile], html5: true, 
                    onplay: () => { playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); },
                    onpause: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onend: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onloaderror: (id, msg) => { console.error("Error loading audio:", msg); },
                    onplayerror: (id, msg) => { console.error("Error playing audio:", msg); }
                });
            }

            const playPauseBtn = document.getElementById('audio-play-pause');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            if(playPauseBtn) playPauseBtn.addEventListener('click', () => {
                if (!sound) initHowler();
                if(sound) { if (sound.playing()) sound.pause(); else sound.play(); }
            });

            function setupTTSListeners() {
                document.querySelectorAll('.tts-button').forEach(button => {
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                    newButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        let textToRead = '';
                        const parentElement = newButton.parentElement;

                        if (parentElement) {
                            if (parentElement.tagName === 'H1' && parentElement.dataset.langKey === 'pageTitle') {
                                const titleClone = parentElement.cloneNode(true);
                                titleClone.querySelector('.tts-button').remove();
                                textToRead = titleClone.textContent.trim();
                                const subtitle = parentElement.nextElementSibling;
                                if (subtitle && subtitle.dataset.langKey === 'pageSubtitle') {
                                    textToRead += '. ' + subtitle.textContent.trim();
                                }
                            } else if (parentElement.tagName === 'H2' && parentElement.closest('section')?.id === 'riassunto') {
                                const section = parentElement.closest('section');
                                const titleClone = parentElement.cloneNode(true);
                                titleClone.querySelector('.tts-button').remove();
                                textToRead = titleClone.textContent.trim();
                                const content = section.querySelector('[data-lang-key="summaryContent"]');
                                if (content) {
                                    const tempDiv = document.createElement('div');
                                    tempDiv.innerHTML = content.innerHTML;
                                    textToRead += '. ' + tempDiv.textContent.trim().replace(/\s\s+/g, ' ');
                                }
                            } else {
                                 const clone = parentElement.cloneNode(true);
                                 clone.querySelector('.tts-button')?.remove();
                                 textToRead = clone.textContent.trim().replace(/^\d+\.\s*/, '');
                            }
                        }
                        
                        if (textToRead) speak(textToRead, newButton);
                    });
                });
            }

            function loadQuiz(lang) {
                const quizContainer = document.getElementById('quiz-container');
                if(!quizContainer) return;
                quizContainer.innerHTML = '';
                document.getElementById('quiz-results').innerHTML = ''; 
                quizData[lang].forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question p-4 rounded-lg';
                    let optionsHtml = q.options.map(o => `
                        <li class="quiz-option p-2 rounded hover:bg-rose-50">
                            <label class="flex items-center justify-between w-full cursor-pointer">
                                <span><input type="radio" name="q${index}" value="${o}" class="mr-3">${o}</span>
                                <span class="tts-button"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span>
                            </label>
                        </li>`).join('');
                    questionDiv.innerHTML = `<h3 class="font-semibold mb-2 flex items-center justify-between"><span>${index + 1}. ${q.question}</span><span class="tts-button"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h3><ul class="space-y-1">${optionsHtml}</ul>`;
                    quizContainer.appendChild(questionDiv);
                });
            }

            function updateLanguage(lang) {
                document.documentElement.lang = lang;
                document.getElementById('lang-toggle').textContent = lang === 'it' ? 'EN' : 'IT';
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.dataset.langKey;
                    if (translations[key] && translations[key][lang]) {
                        if (key.includes('Content')) {
                            element.innerHTML = translations[key][lang];
                        } else {
                            const ttsButton = element.querySelector('.tts-button');
                            const textNode = [...element.childNodes].find(node => node.nodeType === Node.TEXT_NODE && node.textContent.trim());
                            if (textNode) {
                                textNode.textContent = translations[key][lang];
                            } else {
                                element.textContent = translations[key][lang];
                            }
                            if(ttsButton) element.appendChild(ttsButton);
                        }
                    }
                });
                
                const dsaToggle = document.getElementById('accessibility-toggle');
                if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = lang === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = lang === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
                loadQuiz(lang);
                setupTTSListeners();
            }
            
            document.getElementById('lang-toggle').addEventListener('click', () => {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                localStorage.setItem('language', currentLanguage);
                stopSpeech();
                updateLanguage(currentLanguage);
            });

            const dsaToggle = document.getElementById('accessibility-toggle');
            dsaToggle.addEventListener('click', () => {
                document.body.classList.toggle('dsa-mode');
                 if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
            });

            const submitQuizBtn = document.getElementById('submit-quiz');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => {
                let score = 0;
                const questions = document.querySelectorAll('.quiz-question');
                quizData[currentLanguage].forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    questions[index].classList.remove('correct', 'incorrect');
                    if (selected) {
                        if (selected.value === q.answer) {
                            score++;
                            questions[index].classList.add('correct');
                        } else {
                            questions[index].classList.add('incorrect');
                        }
                    } else {
                        questions[index].classList.add('incorrect');
                    }
                });
                const resultsContainer = document.getElementById('quiz-results');
                const resultText = {
                    it: `Hai risposto correttamente a ${score} su ${quizData.it.length} domande.`,
                    en: `You answered ${score} out of ${quizData.en.length} questions correctly.`
                };
                resultsContainer.textContent = resultText[currentLanguage];
            });
            
            updateLanguage(currentLanguage);
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('article section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });
            sections.forEach(sec => observer.observe(sec));
        });
    </script>
</body>
</html>

