<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insufficienza Mitralica (Cavallo) - Medicina Interna Veterinaria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff1f2; color: #881337; }
        .content-section { background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { transition: all 0.2s; border-bottom: 2px solid transparent; }
        .nav-link:hover, .nav-link.active { border-bottom-color: #f43f5e; color: #be185d; }
        .dsa-mode {
            font-family: 'Lexend', sans-serif;
            background-color: #fdf6f7 !important;
            letter-spacing: 0.05em;
            line-height: 1.75;
            color: #34495e;
        }
        .dsa-mode #main-header, .dsa-mode #main-footer { background-color: #000000 !important; }
        .dsa-mode #main-header h1, .dsa-mode #main-header a, .dsa-mode #main-footer p, .dsa-mode button { color: #ffffff !important; }
        .dsa-mode button { border: 1px solid #ffffff; }
        .dsa-mode .content-section { background-color: #fffdfd; border: 1px solid #e0e0e0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode li { color: #34495e; }
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #64748b; transition: color 0.2s; }
        .tts-button:hover, .tts-button.playing { color: #0ea5e9; }
        .quiz-question { border: 1px solid #fecdd3; transition: all 0.3s; }
        .quiz-option:hover { background-color: #fff1f2; }
        .quiz-question.correct { background-color: #d1fae5; border-color: #10b981; }
        .quiz-question.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        @media print {
            #main-header, #main-footer, #page-nav, #infografica, #quiz, #audio, #print-button, .tts-button, video, img, a[href*="infografica"] { display: none; }
        }
    </style>
</head>
<body class="bg-rose-50">

    <header id="main-header" class="bg-rose-800 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold !text-white !border-none !m-0 !p-0 !text-left" data-lang-key="siteTitle">Patologie Cardiocircolatorie</h1>
            <div class="flex items-center space-x-4">
                <button id="accessibility-toggle" aria-label="Attiva modalit√† ad alta leggibilit√†" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilit√†</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-10">
        <div class="text-left mb-8">
            <a href="index.html" class="inline-flex items-center bg-white text-rose-700 font-bold py-2 px-4 rounded-lg shadow hover:bg-rose-100 transition duration-300" data-lang-key="backToIndex">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd"></path></svg>
                <span data-lang-key="backToIndexText">Indice Patologie Cardiocircolatorie</span>
            </a>
        </div>
        
        <div class="content-section p-6 md:p-10">
            <header class="text-center border-b-2 border-rose-200 pb-6 mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-rose-800" data-lang-key="pageTitle">Insufficienza Mitralica (Cavallo)<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h1>
                <p class="text-lg text-rose-700 mt-2" data-lang-key="pageSubtitle">La causa pi√π comune di soffio sistolico nel cavallo.</p>
            </header>

            <nav id="page-nav" class="flex justify-center flex-wrap gap-4 md:gap-8 mb-10 border-b border-gray-200">
                <a href="#riassunto" class="nav-link font-semibold py-2" data-lang-key="navSummary">Riassunto</a>
                <a href="#infografica" class="nav-link font-semibold py-2" data-lang-key="navInfographic">Infografica</a>
                <a href="#quiz" class="nav-link font-semibold py-2" data-lang-key="navQuiz">Quiz</a>
                <a href="#audio" class="nav-link font-semibold py-2" data-lang-key="navAudio">Audio</a>
                <a href="#bibliografia" class="nav-link font-semibold py-2" data-lang-key="navBibliography">Bibliografia</a>
            </nav>

            <article class="space-y-12">
                <section id="riassunto">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4 flex items-center" data-lang-key="summaryTitle">Riassunto Completo <span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h2>
                    <div class="prose max-w-none text-rose-900" data-lang-key="summaryContent">
                        <!-- Content loaded by JS -->
                    </div>
                </section>

                <section id="infografica">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="infographicTitle">Infografica Riepilogativa</h2>
                      <a href="infografica_insufficienza_mitralica_cavallo.html" target="_blank" class="block bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow border-l-4 border-rose-500">
                          <div class="flex items-center space-x-6">
                              <div class="flex-shrink-0 w-24 h-24 bg-rose-500 rounded-lg flex items-center justify-center">
                                  <span class="text-5xl" role="img" aria-label="Icona di un cavallo">üê¥</span>
                              </div>
                              <div>
                                  <h3 class="text-xl font-bold text-rose-800" data-lang-key="infographicLinkTitle">Visualizza l'Infografica Dettagliata</h3>
                                  <p class="text-gray-600 mt-1" data-lang-key="infographicLinkDesc">Clicca qui per una guida visuale completa sull'Insufficienza Mitralica nel cavallo.</p>
                              </div>
                          </div>
                      </a>
                </section>

                <section id="quiz">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="quizTitle">Quiz di Autovalutazione</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Questions loaded by JS -->
                    </div>
                    <div class="mt-6 text-center">
                        <button id="submit-quiz" class="bg-rose-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-rose-700 transition" data-lang-key="quizSubmit">Verifica Risposte</button>
                    </div>
                    <div id="quiz-results" class="mt-6 text-center text-xl font-bold"></div>
                </section>

                <section id="audio">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="audioTitle">Ascolta il Riassunto</h2>
                    <div class="p-4 bg-rose-100/50 rounded-lg flex flex-col sm:flex-row items-center gap-4 w-full">
                        <button id="audio-play-pause" class="p-3 bg-rose-500 text-white rounded-full hover:bg-rose-600 transition-colors duration-200">
                            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg>
                            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" viewBox="0 0 20 20" fill="currentColor"><path d="M5.75 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75zM14.25 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75z" /></svg>
                        </button>
                        <div class="flex-grow text-center sm:text-left">
                            <p class="font-semibold text-rose-800" data-lang-key="audioListen">Ascolta il riassunto completo</p>
                            <p class="text-sm text-rose-600" data-lang-key="audioDesc">Ideale per ripassare mentre sei in movimento.</p>
                        </div>
                        <a href="audio_im_cavallo.mp3" download class="bg-gray-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition inline-flex items-center w-full sm:w-auto justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            <span data-lang-key="btnDownloadAudio">Scarica</span>
                        </a>
                    </div>
                </section>

                <section id="bibliografia">
                    <h2 class="text-3xl font-bold text-rose-700 mb-4" data-lang-key="bibliographyTitle">Riferimenti Bibliografici</h2>
                    <ul class="list-disc pl-6 text-rose-900" data-lang-key="bibliographyContent">
                        <!-- Content loaded by JS -->
                    </ul>
                </section>
            </article>
            
            <div class="mt-12 text-center">
                <button id="print-button" onclick="window.print()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition inline-flex items-center" data-lang-key="btnPrint">Stampa Riassunto</button>
            </div>
        </div>
    </main>
    <footer id="main-footer" class="text-center mt-16 pt-8 border-t border-rose-100">
        <p class="text-slate-500" data-lang-key="footer-credit">A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                siteTitle: { it: "Patologie Cardiocircolatorie", en: "Cardiovascular Diseases" },
                backToIndexText: { it: "Indice Patologie Cardiocircolatorie", en: "Cardiovascular Pathology Index" },
                pageTitle: { it: "Insufficienza Mitralica (Cavallo)", en: "Mitral Insufficiency (Horse)" },
                pageSubtitle: { it: "La causa pi√π comune di soffio sistolico nel cavallo.", en: "The most common cause of systolic murmur in the horse." },
                navSummary: { it: "Riassunto", en: "Summary" },
                navInfographic: { it: "Infografica", en: "Infographic" },
                navQuiz: { it: "Quiz", en: "Quiz" },
                navAudio: { it: "Audio", en: "Audio" },
                navBibliography: { it: "Bibliografia", en: "Bibliography" },
                summaryTitle: { it: "Riassunto Completo", en: "Full Summary" },
                summaryContent: { 
                    it: `<p>L'<strong>Insufficienza Mitralica (IM)</strong>, o rigurgito mitralico, √® una delle valvulopatie pi√π frequentemente diagnosticate nel cavallo e rappresenta la <strong>causa pi√π comune di soffio sistolico</strong> in questa specie.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Eziopatogenesi</h3>
                        <p>Similmente a quanto accade nel cane, la causa pi√π comune √® una <strong>degenerazione mixomatosa cronica</strong> dei lembi valvolari, un processo legato all'et√†. Altre cause possono includere la rottura di corde tendinee (evento acuto e grave), endocardite batterica o prolasso valvolare. L'incompleta chiusura della valvola durante la sistole provoca un rigurgito di sangue dal ventricolo sinistro all'atrio sinistro, inducendo un <strong>sovraccarico di volume</strong> cronico che porta a dilatazione di atrio e ventricolo sinistro (ipertrofia eccentrica).</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Segni Clinici</h3>
                        <p>La maggior parte dei cavalli con IM da lieve a moderata √® <strong>asintomatica</strong> e il soffio √® un riscontro occasionale. Nei cavalli atleti, un'insufficienza mitralica emodinamicamente significativa pu√≤ essere una causa di <strong>scarso rendimento (poor performance)</strong>. Negli stadi pi√π avanzati e gravi, il sovraccarico di volume pu√≤ portare a scompenso cardiaco congestizio sinistro (con tosse, dispnea) e allo sviluppo di aritmie come la <strong>fibrillazione atriale</strong>, che peggiora ulteriormente il quadro clinico.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosi</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Auscultazione:</strong> Si rileva un <strong>soffio olosistolico (o pansistolico) a plateau</strong>, con punto di massima intensit√† sull'apice cardiaco sinistro (focolaio mitralico).</li>
                            <li><strong>Ecocardiografia:</strong> √à l'esame <strong>gold standard</strong>. Permette di visualizzare il jet di rigurgito con il color-Doppler, quantificarne la gravit√†, valutare la morfologia valvolare (es. prolasso, rottura di corde) e misurare le dimensioni delle camere cardiache per stadiare la malattia e formulare una prognosi.<br><img src="insufficienza_mitralica_eco.jpg" alt="Immagine ecocardiografica di insufficienza mitralica nel cavallo" class="mx-auto my-4 rounded shadow"></li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Gestione e Prognosi</h3>
                        <p>La gestione dipende dalla gravit√† e dall'uso del cavallo. Cavalli con IM lieve e senza dilatazione cardiaca possono continuare la loro carriera atletica, ma richiedono <strong>monitoraggi ecocardiografici periodici</strong> (ogni 6-12 mesi) per valutare la progressione. Se l'insufficienza √® grave, causa un calo di performance o √® associata a significativo rimodellamento cardiaco, l'attivit√† agonistica √® generalmente controindicata. La terapia farmacologica √® riservata solo ai cavalli che sviluppano segni di scompenso cardiaco. La prognosi √® buona per le forme lievi, ma diventa riservata o infausta in caso di grave dilatazione, rottura di corde tendinee o insorgenza di fibrillazione atriale.</p>`,
                    en: `<p><strong>Mitral Insufficiency (MI)</strong>, or mitral regurgitation, is one of the most frequently diagnosed valvulopathies in horses and is the <strong>most common cause of a systolic murmur</strong> in this species.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Etiopathogenesis</h3>
                        <p>Similar to what occurs in dogs, the most common cause is <strong>chronic myxomatous degeneration</strong> of the valve leaflets, an age-related process. Other causes can include ruptured chordae tendineae (an acute and severe event), bacterial endocarditis, or valve prolapse. The incomplete closure of the valve during systole causes blood to regurgitate from the left ventricle into the left atrium, inducing a chronic <strong>volume overload</strong> that leads to dilation of the left atrium and ventricle (eccentric hypertrophy).</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Clinical Signs</h3>
                        <p>Most horses with mild to moderate MI are <strong>asymptomatic</strong>, and the murmur is an incidental finding. In athletic horses, hemodynamically significant mitral insufficiency can be a cause of <strong>poor performance</strong>. In more advanced and severe stages, the volume overload can lead to left-sided congestive heart failure (with cough, dyspnea) and the development of arrhythmias such as <strong>atrial fibrillation</strong>, which further worsens the clinical picture.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosis</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Auscultation:</strong> A <strong>holosystolic (or pansystolic) plateau murmur</strong> is detected, with its point of maximum intensity over the left cardiac apex (mitral area).</li>
                            <li><strong>Ecocardiography:</strong> This is the <strong>gold standard</strong> examination. It allows visualization of the regurgitant jet with color-Doppler, quantification of its severity, evaluation of valve morphology (e.g., prolapse, chordal rupture), and measurement of cardiac chamber dimensions to stage the disease and formulate a prognosis.<br><img src="insufficienza_mitralica_eco.jpg" alt="Echocardiographic image of mitral insufficiency in a horse" class="mx-auto my-4 rounded shadow"></li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Management and Prognosis</h3>
                        <p>Management depends on the severity and the horse's use. Horses with mild MI and no cardiac dilation can continue their athletic careers but require <strong>periodic echocardiographic monitoring</strong> (every 6-12 months) to assess progression. If the insufficiency is severe, causes poor performance, or is associated with significant cardiac remodeling, competitive activity is generally contraindicated. Pharmacological therapy is reserved only for horses that develop signs of heart failure. The prognosis is good for mild forms but becomes guarded to poor in cases of severe dilation, ruptured chordae tendineae, or the onset of atrial fibrillation.</p>`
                },
                infographicTitle: { it: "Infografica Riepilogativa", en: "Summary Infographic" },
                infographicLinkTitle: { it: "Visualizza l'Infografica Dettagliata", en: "View the Detailed Infographic" },
                infographicLinkDesc: { it: "Clicca qui per una guida visuale completa sull'Insufficienza Mitralica nel cavallo.", en: "Click here for a complete visual guide on Mitral Insufficiency in the horse." },
                quizTitle: { it: "Quiz di Autovalutazione", en: "Self-Assessment Quiz" },
                quizSubmit: { it: "Verifica Risposte", en: "Check Answers" },
                audioTitle: { it: "Ascolta il Riassunto", en: "Listen to the Summary" },
                btnDownloadAudio: { it: "Scarica", en: "Download" },
                audioListen: { it: "Ascolta il riassunto completo", en: "Listen to the full summary" },
                audioDesc: { it: "Ideale per ripassare mentre sei in movimento.", en: "Ideal for reviewing on the go." },
                bibliographyTitle: { it: "Riferimenti Bibliografici", en: "Bibliographical References" },
                bibliographyContent: { 
                    it: `<li>Reed SM, Bayly WM, Sellon DC, Equine Internal Medicine, 4th Edition, Elsevier, 2018</li><li>MARR-BOWEN, Cardiology of the horse, 2¬∞ ed., Elsevier, 2010</li><li>Reef, V.B., Bonagura, J., Buhl, R., et al. (2014), Recommendations for Management of Equine Athletes with Cardiovascular Abnormalities. J Vet Intern Med, 28: 749-761</li>`,
                    en: `<li>Reed SM, Bayly WM, Sellon DC, Equine Internal Medicine, 4th Edition, Elsevier, 2018</li><li>MARR-BOWEN, Cardiology of the horse, 2nd ed., Elsevier, 2010</li><li>Reef, V.B., Bonagura, J., Buhl, R., et al. (2014), Recommendations for Management of Equine Athletes with Cardiovascular Abnormalities. J Vet Intern Med, 28: 749-761</li>`
                },
                btnPrint: { it: "Stampa Riassunto", en: "Print Summary" },
                accessibility: { it: "Accessibilit√†", en: "Accessibility" },
                "footer-credit": { it: "A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria", en: "Curated by Prof. Sara Busechian. Veterinary clinical medicine teachings" }
            };

            const quizData = {
                it: [
                    { question: "L'insufficienza mitralica √® la causa pi√π comune di quale tipo di soffio nel cavallo?", options: ["Diastolico", "Continuo", "Sistolico", "Non causa soffio"], answer: "Sistolico" },
                    { question: "Qual √® il punto di massima intensit√† (PMI) tipico del soffio da insufficienza mitralica?", options: ["Base cardiaca destra", "Apice cardiaco destro", "Base cardiaca sinistra", "Apice cardiaco sinistro"], answer: "Apice cardiaco sinistro" },
                    { question: "La conseguenza emodinamica principale dell'insufficienza mitralica cronica √®:", options: ["Sovraccarico di pressione del ventricolo destro", "Sovraccarico di volume di atrio e ventricolo sinistro", "Ipotensione sistemica", "Ipertensione polmonare primaria"], answer: "Sovraccarico di volume di atrio e ventricolo sinistro" },
                    { question: "Quale aritmia √® una complicanza comune dell'insufficienza mitralica grave e cronica nel cavallo?", options: ["Blocco AV di secondo grado", "Tachicardia ventricolare", "Fibrillazione atriale", "Bradicardia sinusale"], answer: "Fibrillazione atriale" },
                    { question: "Quale esame diagnostico √® considerato gold standard per valutare la gravit√† del rigurgito mitralico?", options: ["ECG sotto sforzo", "Ecocardiografia", "Radiografie toraciche", "Misurazione degli enzimi cardiaci"], answer: "Ecocardiografia" },
                    { question: "Un soffio da insufficienza mitralica viene classicamente descritto come:", options: ["In decrescendo", "A forma di diamante (crescendo-decrescendo)", "Continuo a macchinario", "Olosistolico a plateau"], answer: "Olosistolico a plateau" },
                    { question: "La rottura delle corde tendinee della valvola mitrale causa un'insufficienza:", options: ["Acuta e grave", "Cronica e lieve", "Fisiologica", "Intermittente"], answer: "Acuta e grave" },
                    { question: "Qual √® la gestione raccomandata per un cavallo atleta con insufficienza mitralica lieve senza rimodellamento cardiaco?", options: ["Ritiro immediato dall'attivit√†", "Terapia con diuretici", "Cardioversione farmacologica", "Monitoraggio ecocardiografico periodico"], answer: "Monitoraggio ecocardiografico periodico" },
                    { question: "Il rimodellamento cardiaco associato a IM cronica √® definito:", options: ["Ipertrofia concentrica", "Atrofia miocardica", "Ipertrofia eccentrica", "Fibrosi"], answer: "Ipertrofia eccentrica" },
                    { question: "In un cavallo atleta, quale segno clinico √® pi√π spesso associato a un'insufficienza mitralica emodinamicamente significativa?", options: ["Colica ricorrente", "Laminite", "Tosse a riposo", "Scarso rendimento (poor performance)"], answer: "Scarso rendimento (poor performance)" }
                ],
                en: [
                    { question: "Mitral insufficiency is the most common cause of which type of murmur in the horse?", options: ["Diastolic", "Continuous", "Systolic", "It does not cause a murmur"], answer: "Systolic" },
                    { question: "What is the typical point of maximum intensity (PMI) for a mitral insufficiency murmur?", options: ["Right cardiac base", "Right cardiac apex", "Left cardiac base", "Left cardiac apex"], answer: "Left cardiac apex" },
                    { question: "The main hemodynamic consequence of chronic mitral insufficiency is:", options: ["Right ventricular pressure overload", "Left atrial and ventricular volume overload", "Systemic hypotension", "Primary pulmonary hypertension"], answer: "Left atrial and ventricular volume overload" },
                    { question: "Which arrhythmia is a common complication of severe, chronic mitral insufficiency in the horse?", options: ["Second-degree AV block", "Ventricular tachycardia", "Atrial fibrillation", "Sinus bradycardia"], answer: "Atrial fibrillation" },
                    { question: "Which diagnostic exam is considered the gold standard for assessing the severity of mitral regurgitation?", options: ["Exercise ECG", "Echocardiography", "Chest radiographs", "Measurement of cardiac enzymes"], answer: "Echocardiography" },
                    { question: "A mitral insufficiency murmur is classically described as:", options: ["Decrescendo", "Diamond-shaped (crescendo-decrescendo)", "Continuous machinery-like", "Holosystolic plateau"], answer: "Holosystolic plateau" },
                    { question: "Rupture of the mitral valve chordae tendineae causes an insufficiency that is:", options: ["Acute and severe", "Chronic and mild", "Physiological", "Intermittent"], answer: "Acute and severe" },
                    { question: "What is the recommended management for an athletic horse with mild mitral insufficiency without cardiac remodeling?", options: ["Immediate retirement from activity", "Therapy with diuretics", "Pharmacological cardioversion", "Periodic echocardiographic monitoring"], answer: "Periodic echocardiographic monitoring" },
                    { question: "The cardiac remodeling associated with chronic MI is defined as:", options: ["Concentric hypertrophy", "Myocardial atrophy", "Eccentric hypertrophy", "Fibrosis"], answer: "Eccentric hypertrophy" },
                    { question: "In an athletic horse, which clinical sign is most often associated with hemodynamically significant mitral insufficiency?", options: ["Recurrent colic", "Laminitis", "Cough at rest", "Poor performance"], answer: "Poor performance" }
                ]
            };
            
            // --- GENERIC SCRIPT (DO NOT EDIT BELOW THIS LINE) ---

            let currentLanguage = localStorage.getItem('language') || 'it';
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;

            function stopSpeech() { if (synth.speaking || synth.paused) synth.cancel(); }
            
            function speak(text, button) {
                if (activeTTSButton === button && currentUtterance) {
                    if (synth.paused) { synth.resume(); } 
                    else if (synth.speaking) { synth.pause(); }
                    return; 
                }
                
                stopSpeech();
                if(activeTTSButton) activeTTSButton.classList.remove('playing');

                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                
                currentUtterance.onstart = () => {
                    button.classList.add('playing');
                    activeTTSButton = button;
                };
                currentUtterance.onpause = () => button.classList.remove('playing');
                currentUtterance.onresume = () => button.classList.add('playing');

                const cleanup = () => {
                    button.classList.remove('playing');
                    if (activeTTSButton === button) {
                        activeTTSButton = null;
                        currentUtterance = null;
                    }
                };
                
                currentUtterance.onend = cleanup;
                currentUtterance.onerror = (event) => {
                    if (event.error !== 'canceled' && event.error !== 'interrupted') {
                        console.error('TTS Error:', event.error);
                    }
                    cleanup();
                };
                
                synth.speak(currentUtterance);
            }

            let sound = null;
            function initHowler() {
                const audioFile = document.querySelector('#audio a[download]').href;
                if (!audioFile) return;
                sound = new Howl({
                    src: [audioFile], html5: true, 
                    onplay: () => { playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); },
                    onpause: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onend: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onloaderror: (id, msg) => { console.error("Error loading audio:", msg); },
                    onplayerror: (id, msg) => { console.error("Error playing audio:", msg); }
                });
            }

            const playPauseBtn = document.getElementById('audio-play-pause');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            if(playPauseBtn) playPauseBtn.addEventListener('click', () => {
                if (!sound) initHowler();
                if(sound) { if (sound.playing()) sound.pause(); else sound.play(); }
            });

            function setupTTSListeners() {
                document.querySelectorAll('.tts-button').forEach(button => {
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                    newButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        let textToRead = '';
                        const parentElement = newButton.parentElement;

                        if (parentElement) {
                            if (parentElement.tagName === 'H1' && parentElement.dataset.langKey === 'pageTitle') {
                                const titleClone = parentElement.cloneNode(true);
                                titleClone.querySelector('.tts-button').remove();
                                textToRead = titleClone.textContent.trim();
                                const subtitle = parentElement.nextElementSibling;
                                if (subtitle && subtitle.dataset.langKey === 'pageSubtitle') {
                                    textToRead += '. ' + subtitle.textContent.trim();
                                }
                            } else if (parentElement.tagName === 'H2' && parentElement.closest('section')?.id === 'riassunto') {
                                const section = parentElement.closest('section');
                                const titleClone = parentElement.cloneNode(true);
                                titleClone.querySelector('.tts-button').remove();
                                textToRead = titleClone.textContent.trim();
                                const content = section.querySelector('[data-lang-key="summaryContent"]');
                                if (content) {
                                    const tempDiv = document.createElement('div');
                                    tempDiv.innerHTML = content.innerHTML;
                                    textToRead += '. ' + tempDiv.textContent.trim().replace(/\s\s+/g, ' ');
                                }
                            } else {
                                 const clone = parentElement.cloneNode(true);
                                 clone.querySelector('.tts-button')?.remove();
                                 textToRead = clone.textContent.trim().replace(/^\d+\.\s*/, '');
                            }
                        }
                        
                        if (textToRead) speak(textToRead, newButton);
                    });
                });
            }

            function loadQuiz(lang) {
                const quizContainer = document.getElementById('quiz-container');
                if(!quizContainer) return;
                quizContainer.innerHTML = '';
                document.getElementById('quiz-results').innerHTML = ''; 
                quizData[lang].forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question p-4 rounded-lg';
                    let optionsHtml = q.options.map(o => `
                        <li class="quiz-option p-2 rounded hover:bg-rose-50">
                            <label class="flex items-center justify-between w-full cursor-pointer">
                                <span><input type="radio" name="q${index}" value="${o}" class="mr-3">${o}</span>
                                <span class="tts-button"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span>
                            </label>
                        </li>`).join('');
                    questionDiv.innerHTML = `<h3 class="font-semibold mb-2 flex items-center justify-between"><span>${index + 1}. ${q.question}</span><span class="tts-button"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h3><ul class="space-y-1">${optionsHtml}</ul>`;
                    quizContainer.appendChild(questionDiv);
                });
            }

            function updateLanguage(lang) {
                document.documentElement.lang = lang;
                document.getElementById('lang-toggle').textContent = lang === 'it' ? 'EN' : 'IT';
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.dataset.langKey;
                    if (translations[key] && translations[key][lang]) {
                        if (key.includes('Content')) {
                            element.innerHTML = translations[key][lang];
                        } else {
                            const ttsButton = element.querySelector('.tts-button');
                            const textNode = [...element.childNodes].find(node => node.nodeType === Node.TEXT_NODE && node.textContent.trim());
                            if (textNode) {
                                textNode.textContent = translations[key][lang];
                            } else {
                                element.textContent = translations[key][lang];
                            }
                            if(ttsButton) element.appendChild(ttsButton);
                        }
                    }
                });
                
                const dsaToggle = document.getElementById('accessibility-toggle');
                if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = lang === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = lang === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
                loadQuiz(lang);
                setupTTSListeners();
            }
            
            document.getElementById('lang-toggle').addEventListener('click', () => {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                localStorage.setItem('language', currentLanguage);
                stopSpeech();
                updateLanguage(currentLanguage);
            });

            const dsaToggle = document.getElementById('accessibility-toggle');
            dsaToggle.addEventListener('click', () => {
                document.body.classList.toggle('dsa-mode');
                 if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
            });

            const submitQuizBtn = document.getElementById('submit-quiz');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => {
                let score = 0;
                const questions = document.querySelectorAll('.quiz-question');
                quizData[currentLanguage].forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    questions[index].classList.remove('correct', 'incorrect');
                    if (selected) {
                        if (selected.value === q.answer) {
                            score++;
                            questions[index].classList.add('correct');
                        } else {
                            questions[index].classList.add('incorrect');
                        }
                    } else {
                        questions[index].classList.add('incorrect');
                    }
                });
                const resultsContainer = document.getElementById('quiz-results');
                const resultText = {
                    it: `Hai risposto correttamente a ${score} su ${quizData.it.length} domande.`,
                    en: `You answered ${score} out of ${quizData.en.length} questions correctly.`
                };
                resultsContainer.textContent = resultText[currentLanguage];
            });
            
            updateLanguage(currentLanguage);
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('article section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });
            sections.forEach(sec => observer.observe(sec));
        });
    </script>
</body>
</html>

