<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dislocazione Abomasale - Medicina Interna Veterinaria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff7ed; color: #7c2d12; }
        .content-section { background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { transition: all 0.2s; border-bottom: 2px solid transparent; }
        .nav-link:hover, .nav-link.active { border-bottom-color: #f97316; color: #c2410c; }
        .dsa-mode {
            font-family: 'Lexend', sans-serif;
            background-color: #fdfaf5 !important;
            letter-spacing: 0.05em;
            line-height: 1.75;
            color: #34495e;
        }
        .dsa-mode #main-header, .dsa-mode #main-footer { background-color: #000000 !important; }
        .dsa-mode #main-header h1, .dsa-mode #main-header a, .dsa-mode #main-footer p, .dsa-mode button { color: #ffffff !important; }
        .dsa-mode button { border: 1px solid #ffffff; }
        .dsa-mode .content-section { background-color: #fffdfa; border: 1px solid #e0e0e0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode li { color: #34495e; }
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #64748b; transition: color 0.2s; }
        .tts-button:hover, .tts-button.playing { color: #0ea5e9; }
        .quiz-question { border: 1px solid #ffedd5; transition: all 0.3s; }
        .quiz-option:hover { background-color: #fff7ed; }
        .quiz-question.correct { background-color: #d1fae5; border-color: #10b981; }
        .quiz-question.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        @media print {
            #main-header, #main-footer, #page-nav, #infografica, #quiz, #audio, #print-button, .tts-button, video, img, a[href*="infografica"] { display: none; }
        }
    </style>
</head>
<body class="bg-orange-50">

    <header id="main-header" class="bg-orange-800 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold !text-white !border-none !m-0 !p-0 !text-left" data-lang-key="siteTitle">Patologie Apparato Digerente</h1>
            <div class="flex items-center space-x-4">
                <button id="accessibility-toggle" aria-label="Attiva modalit√† ad alta leggibilit√†" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilit√†</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-10">
        <div class="text-left mb-8">
            <a href="index.html" class="inline-flex items-center bg-white text-orange-700 font-bold py-2 px-4 rounded-lg shadow hover:bg-orange-100 transition duration-300" data-lang-key="backToIndex">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd"></path></svg>
                <span data-lang-key="backToIndexText">Indice Patologie Digerente</span>
            </a>
        </div>
        
        <div class="content-section p-6 md:p-10">
            <header class="text-center border-b-2 border-orange-200 pb-6 mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-orange-800" data-lang-key="pageTitle">Dislocazione Abomasale (Bovino)<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h1>
                <p class="text-lg text-orange-700 mt-2" data-lang-key="pageSubtitle">Gestione di una delle pi√π comuni patologie della bovina da latte in post-parto.</p>
            </header>

            <nav id="page-nav" class="flex justify-center flex-wrap gap-4 md:gap-8 mb-10 border-b border-gray-200">
                <a href="#riassunto" class="nav-link font-semibold py-2" data-lang-key="navSummary">Riassunto</a>
                <a href="#infografica" class="nav-link font-semibold py-2" data-lang-key="navInfographic">Infografica</a>
                <a href="#quiz" class="nav-link font-semibold py-2" data-lang-key="navQuiz">Quiz</a>
                <a href="#audio" class="nav-link font-semibold py-2" data-lang-key="navAudio">Audio</a>
                <a href="#bibliografia" class="nav-link font-semibold py-2" data-lang-key="navBibliography">Bibliografia</a>
            </nav>

            <article class="space-y-12">
                <section id="riassunto">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4 flex items-center" data-lang-key="summaryTitle">Riassunto Completo <span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h2>
                    <div class="prose max-w-none text-orange-900" data-lang-key="summaryContent">
                        <!-- Content loaded by JS -->
                    </div>
                </section>

                <section id="infografica">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4" data-lang-key="infographicTitle">Infografica Riepilogativa</h2>
                     <a href="infografica_dislocazione_abomasale.html" target="_blank" class="block bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow border-l-4 border-orange-500">
                        <div class="flex items-center space-x-6">
                            <div class="flex-shrink-0 w-24 h-24 bg-orange-500 rounded-lg flex items-center justify-center">
                                <span class="text-5xl" role="img" aria-label="Icona di una mucca">üêÑ</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-orange-800" data-lang-key="infographicLinkTitle">Visualizza l'Infografica Dettagliata</h3>
                                <p class="text-gray-600 mt-1" data-lang-key="infographicLinkDesc">Clicca qui per una guida visuale completa sulla dislocazione abomasale.</p>
                            </div>
                        </div>
                    </a>
                </section>

                <section id="quiz">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4" data-lang-key="quizTitle">Quiz di Autovalutazione</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Questions loaded by JS -->
                    </div>
                    <div class="mt-6 text-center">
                        <button id="submit-quiz" class="bg-orange-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-orange-700 transition" data-lang-key="quizSubmit">Verifica Risposte</button>
                    </div>
                    <div id="quiz-results" class="mt-6 text-center text-xl font-bold"></div>
                </section>

                <section id="audio">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4" data-lang-key="audioTitle">Ascolta il Riassunto</h2>
                    <div class="p-4 bg-orange-100/50 rounded-lg flex flex-col sm:flex-row items-center gap-4 w-full">
                        <button id="audio-play-pause" class="p-3 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-colors duration-200">
                            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" />
                            </svg>
                            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M5.75 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75zM14.25 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75z" />
                            </svg>
                        </button>
                        <div class="flex-grow text-center sm:text-left">
                            <p class="font-semibold text-orange-800" data-lang-key="audioListen">Ascolta il riassunto completo</p>
                            <p class="text-sm text-orange-600" data-lang-key="audioDesc">Ideale per ripassare mentre sei in movimento.</p>
                        </div>
                        <a href="audio_dislocazione_abomasale.mp3" download class="bg-gray-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition inline-flex items-center w-full sm:w-auto justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            <span data-lang-key="btnDownloadAudio">Scarica</span>
                        </a>
                    </div>
                </section>

                <section id="bibliografia">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4" data-lang-key="bibliographyTitle">Riferimenti Bibliografici</h2>
                    <ul class="list-disc pl-6 text-orange-900" data-lang-key="bibliographyContent">
                        <!-- Content loaded by JS -->
                    </ul>
                </section>
            </article>
            
            <div class="mt-12 text-center">
                <button id="print-button" onclick="window.print()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition inline-flex items-center" data-lang-key="btnPrint">Stampa Riassunto</button>
            </div>
        </div>
    </main>
    <footer id="main-footer" class="text-center mt-16 pt-8 border-t border-slate-200">
        <p class="text-slate-500" data-lang-key="footer-credit">A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                siteTitle: { it: "Patologie Apparato Digerente", en: "Digestive System Diseases" },
                backToIndexText: { it: "Indice Patologie Digerente", en: "Digestive Pathology Index" },
                pageTitle: { it: "Dislocazione Abomasale (Bovino)", en: "Abomasal Displacement (Bovine)" },
                pageSubtitle: { it: "Gestione di una delle pi√π comuni patologie della bovina da latte in post-parto.", en: "Management of one of the most common diseases in post-partum dairy cattle." },
                navSummary: { it: "Riassunto", en: "Summary" },
                navInfographic: { it: "Infografica", en: "Infographic" },
                navQuiz: { it: "Quiz", en: "Quiz" },
                navAudio: { it: "Audio", en: "Audio" },
                navBibliography: { it: "Bibliografia", en: "Bibliography" },
                summaryTitle: { it: "Riassunto Completo", en: "Full Summary" },
                summaryContent: { 
                    it: `<p>La <strong>Dislocazione Abomasale</strong> √® lo spostamento dell'abomaso (il quarto stomaco dei ruminanti) dalla sua posizione fisiologica sul pavimento addominale. √à una patologia multifattoriale che colpisce prevalentemente le bovine da latte ad alta produzione nelle prime 6-8 settimane dopo il parto.</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Dislocazione a Sinistra (LDA):</strong> √à la forma pi√π comune (80-90% dei casi). L'abomaso, riempito di gas, si sposta verso l'alto e si interpone tra il rumine e la parete addominale sinistra.</li>
                            <li><strong>Dislocazione a Destra (RDA):</strong> Meno frequente ma pi√π grave, in quanto pu√≤ evolvere in una torsione (volvolo abomasale), che rappresenta un'emergenza chirurgica con prognosi riservata.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Fattori di Rischio</h3>
                        <p>Il periodo del post-parto √® critico. I principali fattori predisponenti includono:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Patologie Concomitanti:</strong> Ipocalcemia, chetosi, metrite e ritenzione di placenta riducono la motilit√† abomasale.</li>
                            <li><strong>Dieta:</strong> Un'alimentazione con un rapporto foraggi/concentrati sbilanciato nei confronti di questi ultimi nel periodo di transizione riduce il riempimento ruminale, creando spazio per lo spostamento dell'abomaso.</li>
                            <li><strong>Fattori Meccanici:</strong> Lo spazio vuoto lasciato in addome dal feto dopo il parto.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosi</h3>
                        <p>La diagnosi si basa sulla combinazione di segni clinici e reperti dell'esame fisico:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Segni Clinici:</strong> Anoressia selettiva (l'animale rifiuta i concentrati ma mangia un po' di fieno), calo della produzione di latte, disidratazione lieve e segni di chetosi.</li>
                            <li><strong>Segno Patognomonico:</strong> Il riscontro di un suono metallico acuto, simile a un "ping", durante l'auscultazione e percussione simultanea della parete addominale sinistra (tra la 9¬™ e la 13¬™ costola) per la LDA, o destra per la RDA.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Terapia</h3>
                        <p>L'approccio terapeutico pu√≤ essere conservativo o chirurgico:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Terapia Medica/Conservativa (solo per LDA):</strong> Consiste nel far rotolare la bovina sul dorso per tentare di riposizionare l'abomaso. Ha un alto tasso di recidive e un successo limitato.</li>
                            <li><strong>Terapia Chirurgica:</strong> √à il trattamento d'elezione. L'obiettivo √® riposizionare l'abomaso e fissarlo (omentopessi, abomasopessi o piloropessi) per prevenire nuove dislocazioni. Esistono diverse tecniche, eseguibili in laparotomia o in laparoscopia. La RDA con sospetto di volvolo √® sempre un'emergenza chirurgica.</li>
                        </ul>`,
                    en: `<p><strong>Abomasal Displacement</strong> is the movement of the abomasum (the fourth stomach of ruminants) from its physiological position on the abdominal floor. It is a multifactorial disease that predominantly affects high-producing dairy cows in the first 6-8 weeks after calving.</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Left Displaced Abomasum (LDA):</strong> This is the most common form (80-90% of cases). The gas-filled abomasum moves upward and becomes trapped between the rumen and the left abdominal wall.</li>
                            <li><strong>Right Displaced Abomasum (RDA):</strong> Less frequent but more severe, as it can progress to a torsion (abomasal volvulus), which is a surgical emergency with a guarded prognosis.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Risk Factors</h3>
                        <p>The post-partum period is critical. The main predisposing factors include:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Concurrent Diseases:</strong> Hypocalcemia, ketosis, metritis, and retained placenta reduce abomasal motility.</li>
                            <li><strong>Diet:</strong> A diet with a forage-to-concentrate ratio unbalanced towards the latter during the transition period reduces rumen fill, creating space for the abomasum to move.</li>
                            <li><strong>Mechanical Factors:</strong> The empty space left in the abdomen by the fetus after calving.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosis</h3>
                        <p>Diagnosis is based on a combination of clinical signs and physical examination findings:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Clinical Signs:</strong> Selective anorexia (the animal refuses concentrates but may eat some hay), decreased milk production, mild dehydration, and signs of ketosis.</li>
                            <li><strong>Pathognomonic Sign:</strong> The detection of a sharp, metallic "ping" sound during simultaneous auscultation and percussion of the left abdominal wall (between the 9th and 13th ribs) for LDA, or the right for RDA.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Therapy</h3>
                        <p>The therapeutic approach can be conservative or surgical:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Medical/Conservative Therapy (for LDA only):</strong> Involves rolling the cow onto her back to attempt to reposition the abomasum. It has a high recurrence rate and limited success.</li>
                            <li><strong>Surgical Therapy:</strong> This is the treatment of choice. The goal is to return the abomasum to its correct position and fix it (omentopexy, abomasopexy, or pyloropexy) to prevent redisplacement. Various techniques exist, performed via laparotomy or laparoscopy. An RDA with suspected volvulus is always a surgical emergency.</li>
                        </ul>`
                },
                infographicTitle: { it: "Infografica Riepilogativa", en: "Summary Infographic" },
                infographicLinkTitle: { it: "Visualizza l'Infografica Dettagliata", en: "View the Detailed Infographic" },
                infographicLinkDesc: { it: "Clicca qui per una guida visuale completa sulla dislocazione abomasale.", en: "Click here for a complete visual guide on abomasal displacement." },
                quizTitle: { it: "Quiz di Autovalutazione", en: "Self-Assessment Quiz" },
                quizSubmit: { it: "Verifica Risposte", en: "Check Answers" },
                audioTitle: { it: "Ascolta il Riassunto", en: "Listen to the Summary" },
                btnDownloadAudio: { it: "Scarica", en: "Download" },
                audioListen: { it: "Ascolta il riassunto completo", en: "Listen to the full summary" },
                audioDesc: { it: "Ideale per ripassare mentre sei in movimento.", en: "Ideal for reviewing on the go." },
                bibliographyTitle: { it: "Riferimenti Bibliografici", en: "Bibliographical References" },
                bibliographyContent: { 
                    it: `<li>Smith BP, Van Metre DC, Pusterla N, LARGE ANIMAL INTERNAL MEDICINE, 6th Edition, Elsevier, 2021</li><li>Constable, P. D., Hinchcliff, K. W., Done, S. H., & Gr√ºnberg, W. (2017). Veterinary Medicine: A textbook of the diseases of cattle, horses, sheep, pigs and goats. Elsevier Health Sciences.</li>`,
                    en: `<li>Smith BP, Van Metre DC, Pusterla N, LARGE ANIMAL INTERNAL MEDICINE, 6th Edition, Elsevier, 2021</li><li>Constable, P. D., Hinchcliff, K. W., Done, S. H., & Gr√ºnberg, W. (2017). Veterinary Medicine: A textbook of the diseases of cattle, horses, sheep, pigs and goats. Elsevier Health Sciences.</li>`
                },
                btnPrint: { it: "Stampa Riassunto", en: "Print Summary" },
                accessibility: { it: "Accessibilit√†", en: "Accessibility" },
                "footer-credit": { it: "A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria", en: "Curated by Prof. Sara Busechian. Veterinary clinical medicine teachings" }
            };

            const quizData = {
                it: [
                    { question: "Qual √® la forma pi√π comune di dislocazione abomasale nella bovina da latte?", options: ["Dislocazione a Destra (RDA)", "Dislocazione a Sinistra (LDA)", "Torsione abomasale", "Dislocazione ventrale"], answer: "Dislocazione a Sinistra (LDA)" },
                    { question: "Qual √® il segno clinico patognomonico per una dislocazione abomasale?", options: ["Febbre alta", "Diarrea profusa", "Suono metallico ('ping') all'auscultazione e percussione", "Tosse"], answer: "Suono metallico ('ping') all'auscultazione e percussione" },
                    { question: "Quale periodo √® considerato a maggior rischio per lo sviluppo di una dislocazione abomasale?", options: ["Asciutta", "Met√† lattazione", "Prime 6-8 settimane post-parto", "Fine lattazione"], answer: "Prime 6-8 settimane post-parto" },
                    { question: "Quale complicazione rende la dislocazione a destra (RDA) un'emergenza chirurgica?", options: ["La chetosi secondaria", "La disidratazione", "L'evoluzione in volvolo (torsione)", "L'anoressia"], answer: "L'evoluzione in volvolo (torsione)" },
                    { question: "Qual √® l'obiettivo principale della terapia chirurgica per la dislocazione abomasale?", options: ["Svuotare l'abomaso dal gas", "Somministrare antibiotici localmente", "Riposizionare e fissare l'abomaso", "Stimolare la motilit√† ruminale"], answer: "Riposizionare e fissare l'abomaso" },
                    { question: "Quale alterazione metabolica √® frequentemente associata alla dislocazione abomasale?", options: ["Acidosi", "Alcalosi", "Chetosi", "Ipoglicemia"], answer: "Chetosi" },
                    { question: "La terapia conservativa (rotolamento) per la LDA √® spesso sconsigliata perch√©:", options: ["√à troppo costosa", "Richiede anestesia generale", "Ha un alto tasso di recidive", "Causa dolore all'animale"], answer: "Ha un alto tasso di recidive" },
                    { question: "Quale tecnica chirurgica di fissaggio dell'abomaso √® comunemente utilizzata?", options: ["Enterotomia", "Gastrotomia", "Piloropessi", "Ruminotomia"], answer: "Piloropessi" },
                    { question: "Un segno clinico comune in una bovina con LDA √®:", options: ["Iperfagia", "Anoressia selettiva per i concentrati", "Aumento della produzione di latte", "Febbre persistente"], answer: "Anoressia selettiva per i concentrati" },
                    { question: "Perch√© il periodo del post-parto √® particolarmente a rischio?", options: ["Per l'aumento dell'ingestione di cibo", "Per lo spazio vuoto lasciato dal feto in addome", "Per il basso livello di stress", "Per l'aumentata motilit√† gastrointestinale"], answer: "Per lo spazio vuoto lasciato dal feto in addome" }
                ],
                en: [
                    { question: "What is the most common form of abomasal displacement in dairy cattle?", options: ["Right Displaced Abomasum (RDA)", "Left Displaced Abomasum (LDA)", "Abomasal volvulus", "Ventral displacement"], answer: "Left Displaced Abomasum (LDA)" },
                    { question: "What is the pathognomonic clinical sign for an abomasal displacement?", options: ["High fever", "Profuse diarrhea", "A metallic 'ping' sound on auscultation and percussion", "Cough"], answer: "A metallic 'ping' sound on auscultation and percussion" },
                    { question: "Which period is considered the highest risk for developing an abomasal displacement?", options: ["Dry period", "Mid-lactation", "The first 6-8 weeks post-partum", "Late lactation"], answer: "The first 6-8 weeks post-partum" },
                    { question: "What complication makes a Right Displaced Abomasum (RDA) a surgical emergency?", options: ["Secondary ketosis", "Dehydration", "Progression to volvulus (torsion)", "Anorexia"], answer: "Progression to volvulus (torsion)" },
                    { question: "What is the main goal of surgical therapy for abomasal displacement?", options: ["To empty gas from the abomasum", "To administer local antibiotics", "To reposition and fixate the abomasum", "To stimulate ruminal motility"], answer: "To reposition and fixate the abomasum" },
                    { question: "Which metabolic disorder is frequently associated with abomasal displacement?", options: ["Acidosis", "Alkalosis", "Ketosis", "Hypoglycemia"], answer: "Ketosis" },
                    { question: "Conservative therapy (rolling) for LDA is often not recommended because:", options: ["It is too expensive", "It requires general anesthesia", "It has a high recurrence rate", "It causes pain to the animal"], answer: "It has a high recurrence rate" },
                    { question: "Which surgical technique for fixing the abomasum is commonly used?", options: ["Enterotomy", "Gastrotomy", "Pyloropexy", "Rumenotomy"], answer: "Pyloropexy" },
                    { question: "A common clinical sign in a cow with LDA is:", options: ["Hyperphagia", "Selective anorexia for concentrates", "Increased milk production", "Persistent fever"], answer: "Selective anorexia for concentrates" },
                    { question: "Why is the post-partum period particularly high-risk?", options: ["Due to increased feed intake", "Because of the empty space left in the abdomen by the fetus", "Due to low stress levels", "Due to increased gastrointestinal motility"], answer: "Because of the empty space left in the abdomen by the fetus" }
                ]
            };
            
            let currentLanguage = localStorage.getItem('language') || 'it';
            
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;

            function stopSpeech() {
                if (synth.speaking) {
                    synth.cancel();
                }
            }
            
            function speak(text, button) {
                if (activeTTSButton === button && currentUtterance) {
                    if (synth.paused) {
                        synth.resume();
                        button.classList.add('playing');
                    } else if (synth.speaking) {
                        synth.pause();
                        button.classList.remove('playing');
                    }
                    return; 
                }

                stopSpeech();
                
                if(activeTTSButton) {
                    activeTTSButton.classList.remove('playing');
                }

                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                
                currentUtterance.onend = () => {
                    if (button) button.classList.remove('playing');
                    activeTTSButton = null;
                    currentUtterance = null;
                };

                currentUtterance.onerror = (event) => {
                     if (event.error !== 'canceled' && event.error !== 'interrupted') {
                        console.error('An error occurred with speech synthesis:', event.error);
                    }
                    if (button) button.classList.remove('playing');
                    activeTTSButton = null;
                    currentUtterance = null;
                };

                activeTTSButton = button;
                button.classList.add('playing');
                synth.speak(currentUtterance);
            }

            let sound = null;

            function initHowler() {
                sound = new Howl({
                    src: ['audio_dislocazione_abomasale.mp3'],
                    html5: true, 
                    onplay: () => { playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); },
                    onpause: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onend: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onloaderror: (id, msg) => {
                        console.error("Error loading audio:", msg);
                        const audioDesc = document.querySelector('[data-lang-key="audioDesc"]');
                        if (audioDesc) audioDesc.textContent = "Errore nel caricamento del file audio.";
                    },
                    onplayerror: (id, msg) => {
                        console.error("Error playing audio:", msg);
                        const audioDesc = document.querySelector('[data-lang-key="audioDesc"]');
                        if (audioDesc) audioDesc.textContent = "Impossibile riprodurre il file audio.";
                    }
                });
            }

            const playPauseBtn = document.getElementById('audio-play-pause');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');

            playPauseBtn.addEventListener('click', () => {
                if (!sound) initHowler();
                if (sound.playing()) sound.pause(); else sound.play();
            });

           function setupTTSListeners() {
                document.querySelectorAll('.tts-button').forEach(button => {
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                    newButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        let textToRead = '';
                        const parentElement = newButton.parentElement;

                        if (parentElement.tagName === 'H1' && parentElement.dataset.langKey === 'pageTitle') {
                             const titleClone = parentElement.cloneNode(true);
                             titleClone.querySelector('.tts-button').remove();
                             textToRead = titleClone.textContent.trim();
                             const subtitle = parentElement.nextElementSibling;
                             if(subtitle && subtitle.dataset.langKey === 'pageSubtitle') {
                                 textToRead += '. ' + subtitle.textContent.trim();
                             }
                        }
                        else if (parentElement.tagName === 'H2') {
                            const section = parentElement.closest('section');
                            const titleClone = parentElement.cloneNode(true);
                            titleClone.querySelector('.tts-button').remove();
                            textToRead = titleClone.textContent.trim();

                            if (section && section.id === 'riassunto') {
                                const content = section.querySelector('[data-lang-key="summaryContent"]');
                                if (content) {
                                    const contentClone = content.cloneNode(true);
                                    contentClone.querySelectorAll('div, img').forEach(el => el.remove());
                                    textToRead += '. ' + contentClone.textContent.trim().replace(/\s\s+/g, ' ');
                                }
                            }
                        } 
                        else if (parentElement.tagName === 'H3') {
                                const questionTextNode = parentElement.querySelector('span:first-child');
                                if (questionTextNode) textToRead = questionTextNode.textContent.trim().replace(/^\d+\.\s*/, '');
                        }
                        else if (parentElement.closest('label')) {
                            const label = parentElement.closest('label');
                            const answerTextNode = label.querySelector('span:first-child');
                            if (answerTextNode) textToRead = answerTextNode.textContent.trim();
                        }
                        
                        if (textToRead) speak(textToRead, newButton);
                    });
                });
            }

            function loadQuiz(lang) {
                const quizContainer = document.getElementById('quiz-container');
                quizContainer.innerHTML = '';
                document.getElementById('quiz-results').innerHTML = ''; 
                quizData[lang].forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question p-4 rounded-lg';
                    let optionsHtml = q.options.map(o => `
                        <li class="quiz-option p-2 rounded hover:bg-orange-50">
                            <label class="flex items-center justify-between w-full cursor-pointer">
                                <span class="flex-grow pr-4"><input type="radio" name="q${index}" value="${o}" class="mr-3">${o}</span>
                                <span class="tts-button flex-shrink-0"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span>
                            </label>
                        </li>`).join('');
                    questionDiv.innerHTML = `<h3 class="font-semibold mb-2 flex items-center justify-between"><span>${index + 1}. ${q.question}</span><span class="tts-button"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h3><ul class="space-y-1">${optionsHtml}</ul>`;
                    quizContainer.appendChild(questionDiv);
                });
            }

            function updateLanguage(lang) {
                document.documentElement.lang = lang;
                document.getElementById('lang-toggle').textContent = lang === 'it' ? 'EN' : 'IT';
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.dataset.langKey;
                    if (translations[key] && translations[key][lang]) {
                        if (key.includes('Content')) {
                                element.innerHTML = translations[key][lang];
                        } else {
                            const ttsButton = element.querySelector('.tts-button');
                            element.textContent = translations[key][lang];
                            if(ttsButton) element.appendChild(ttsButton);
                        }
                    }
                });
                
                const navAudio = document.querySelector('a[data-lang-key="navAudio"]');
                const sectionAudio = document.getElementById('audio');
                if (lang === 'en') {
                    if(navAudio) navAudio.style.display = 'none';
                    if(sectionAudio) sectionAudio.style.display = 'none';
                } else {
                    if(navAudio) navAudio.style.display = 'block';
                    if(sectionAudio) sectionAudio.style.display = 'block';
                }

                const dsaToggle = document.getElementById('accessibility-toggle');
                if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = lang === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = lang === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
                loadQuiz(lang);
                setupTTSListeners();
            }
            
            document.getElementById('lang-toggle').addEventListener('click', () => {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                localStorage.setItem('language', currentLanguage);
                updateLanguage(currentLanguage);
            });

            const dsaToggle = document.getElementById('accessibility-toggle');
            dsaToggle.addEventListener('click', () => {
                document.body.classList.toggle('dsa-mode');
                 if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
            });

            document.getElementById('submit-quiz').addEventListener('click', () => {
                let score = 0;
                const questions = document.querySelectorAll('.quiz-question');
                quizData[currentLanguage].forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    questions[index].classList.remove('correct', 'incorrect');
                    if (selected) {
                        if (selected.value === q.answer) {
                            score++;
                            questions[index].classList.add('correct');
                        } else {
                            questions[index].classList.add('incorrect');
                        }
                    } else {
                        questions[index].classList.add('incorrect');
                    }
                });
                const resultsContainer = document.getElementById('quiz-results');
                const resultText = {
                    it: `Hai risposto correttamente a ${score} su ${quizData.it.length} domande.`,
                    en: `You answered ${score} out of ${quizData.en.length} questions correctly.`
                };
                resultsContainer.textContent = resultText[currentLanguage];
            });
            
            // Initial setup
            updateLanguage(currentLanguage);
        });
    </script>
</body>
</html>

