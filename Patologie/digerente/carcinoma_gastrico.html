<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carcinoma Gastrico - Medicina Interna Veterinaria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff7ed; color: #7c2d12; }
        .content-section { background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { transition: all 0.2s; border-bottom: 2px solid transparent; }
        .nav-link:hover, .nav-link.active { border-bottom-color: #f97316; color: #c2410c; }
        .dsa-mode {
            font-family: 'Lexend', sans-serif;
            background-color: #fdfaf5 !important;
            letter-spacing: 0.05em;
            line-height: 1.75;
            color: #34495e;
        }
        .dsa-mode #main-header, .dsa-mode #main-footer { background-color: #000000 !important; }
        .dsa-mode #main-header h1, .dsa-mode #main-header a, .dsa-mode #main-footer p, .dsa-mode button { color: #ffffff !important; }
        .dsa-mode button { border: 1px solid #ffffff; }
        .dsa-mode .content-section { background-color: #fffdfa; border: 1px solid #e0e0e0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode li { color: #34495e; }
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #64748b; transition: color 0.2s; }
        .tts-button:hover, .tts-button.playing { color: #0ea5e9; }
        .quiz-question { border: 1px solid #ffedd5; transition: all 0.3s; }
        .quiz-option:hover { background-color: #fff7ed; }
        .quiz-question.correct { background-color: #d1fae5; border-color: #10b981; }
        .quiz-question.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        @media print {
            #main-header, #main-footer, #page-nav, #infografica, #quiz, #audio, #print-button, .tts-button, video, img, a[href*="infografica"] { display: none; }
        }
    </style>
</head>
<body class="bg-orange-50">

    <header id="main-header" class="bg-orange-800 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold !text-white !border-none !m-0 !p-0 !text-left" data-lang-key="siteTitle">Patologie Apparato Digerente</h1>
            <div class="flex items-center space-x-4">
                <button id="accessibility-toggle" aria-label="Attiva modalit√† ad alta leggibilit√†" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilit√†</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-10">
        <div class="text-left mb-8">
            <a href="patologie_gastroenteriche.html" class="inline-flex items-center bg-white text-orange-700 font-bold py-2 px-4 rounded-lg shadow hover:bg-orange-100 transition duration-300" data-lang-key="backToIndex">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd"></path></svg>
                <span data-lang-key="backToIndexText">Indice Patologie Digerente</span>
            </a>
        </div>
        
        <div class="content-section p-6 md:p-10">
            <header class="text-center border-b-2 border-orange-200 pb-6 mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-orange-800" data-lang-key="pageTitle">Carcinoma Gastrico (Cane)<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h1>
                <p class="text-lg text-orange-700 mt-2" data-lang-key="pageSubtitle">Approccio alla pi√π comune neoplasia gastrica maligna del cane.</p>
            </header>

            <nav id="page-nav" class="flex justify-center flex-wrap gap-4 md:gap-8 mb-10 border-b border-gray-200">
                <a href="#riassunto" class="nav-link font-semibold py-2" data-lang-key="navSummary">Riassunto</a>
                <a href="#infografica" class="nav-link font-semibold py-2" data-lang-key="navInfographic">Infografica</a>
                <a href="#quiz" class="nav-link font-semibold py-2" data-lang-key="navQuiz">Quiz</a>
                <a href="#audio" class="nav-link font-semibold py-2" data-lang-key="navAudio">Audio</a>
                <a href="#bibliografia" class="nav-link font-semibold py-2" data-lang-key="navBibliography">Bibliografia</a>
            </nav>

            <article class="space-y-12">
                <section id="riassunto">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4 flex items-center" data-lang-key="summaryTitle">Riassunto Completo <span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h2>
                    <div class="prose max-w-none text-orange-900" data-lang-key="summaryContent">
                        <!-- Content loaded by JS -->
                    </div>
                </section>

                <section id="infografica">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4" data-lang-key="infographicTitle">Infografica Riepilogativa</h2>
                     <a href="infografica_carcinoma_gastrico.html" target="_blank" class="block bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow border-l-4 border-orange-500">
                        <div class="flex items-center space-x-6">
                            <div class="flex-shrink-0 w-24 h-24 bg-orange-500 rounded-lg flex items-center justify-center">
                                <span class="text-5xl" role="img" aria-label="Icona di un cane">üê∂</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-orange-800" data-lang-key="infographicLinkTitle">Visualizza l'Infografica Dettagliata</h3>
                                <p class="text-gray-600 mt-1" data-lang-key="infographicLinkDesc">Clicca qui per una guida visuale completa sul carcinoma gastrico.</p>
                            </div>
                        </div>
                    </a>
                </section>

                <section id="quiz">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4" data-lang-key="quizTitle">Quiz di Autovalutazione</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Questions loaded by JS -->
                    </div>
                    <div class="mt-6 text-center">
                        <button id="submit-quiz" class="bg-orange-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-orange-700 transition" data-lang-key="quizSubmit">Verifica Risposte</button>
                    </div>
                    <div id="quiz-results" class="mt-6 text-center text-xl font-bold"></div>
                </section>

                <section id="audio">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4" data-lang-key="audioTitle">Ascolta il Riassunto</h2>
                    <div class="p-4 bg-orange-100/50 rounded-lg flex flex-col sm:flex-row items-center gap-4 w-full">
                        <button id="audio-play-pause" class="p-3 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-colors duration-200">
                            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" />
                            </svg>
                            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M5.75 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75zM14.25 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75z" />
                            </svg>
                        </button>
                        <div class="flex-grow text-center sm:text-left">
                            <p class="font-semibold text-orange-800" data-lang-key="audioListen">Ascolta il riassunto completo</p>
                            <p class="text-sm text-orange-600" data-lang-key="audioDesc">Ideale per ripassare mentre sei in movimento.</p>
                        </div>
                        <a href="audio_carcinoma_gastrico.mp3" download class="bg-gray-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition inline-flex items-center w-full sm:w-auto justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            <span data-lang-key="btnDownloadAudio">Scarica</span>
                        </a>
                    </div>
                </section>

                <section id="bibliografia">
                    <h2 class="text-3xl font-bold text-orange-700 mb-4" data-lang-key="bibliographyTitle">Riferimenti Bibliografici</h2>
                    <ul class="list-disc pl-6 text-orange-900" data-lang-key="bibliographyContent">
                        <!-- Content loaded by JS -->
                    </ul>
                </section>
            </article>
            
            <div class="mt-12 text-center">
                <button id="print-button" onclick="window.print()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition inline-flex items-center" data-lang-key="btnPrint">Stampa Riassunto</button>
            </div>
        </div>
    </main>
    <footer id="main-footer" class="text-center mt-16 pt-8 border-t border-slate-200">
        <p class="text-slate-500" data-lang-key="footer-credit">A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                siteTitle: { it: "Patologie Apparato Digerente", en: "Digestive System Diseases" },
                backToIndexText: { it: "Indice Patologie Digerente", en: "Digestive Pathology Index" },
                pageTitle: { it: "Carcinoma Gastrico (Cane)", en: "Gastric Carcinoma (Dog)" },
                pageSubtitle: { it: "Approccio alla pi√π comune neoplasia gastrica maligna del cane.", en: "Approach to the most common malignant gastric neoplasm in dogs." },
                navSummary: { it: "Riassunto", en: "Summary" },
                navInfographic: { it: "Infografica", en: "Infographic" },
                navQuiz: { it: "Quiz", en: "Quiz" },
                navAudio: { it: "Audio", en: "Audio" },
                navBibliography: { it: "Bibliografia", en: "Bibliography" },
                summaryTitle: { it: "Riassunto Completo", en: "Full Summary" },
                summaryContent: { 
                    it: `<p>Il <strong>carcinoma gastrico</strong> √® la neoplasia maligna pi√π comune dello stomaco nel cane, rappresentando la maggior parte dei tumori gastrici. Si tratta di un tumore epiteliale aggressivo, quasi sempre un adenocarcinoma, che tende a essere diagnosticato in uno stadio avanzato, con una prognosi generalmente infausta.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Segnalamento e Fattori di Rischio</h3>
                        <ul class="list-disc pl-6">
                            <li><strong>Et√†:</strong> Colpisce prevalentemente cani anziani (et√† media di 10 anni).</li>
                            <li><strong>Razza:</strong> Esiste una predisposizione di razza per il Pastore Belga e il Rough Collie.</li>
                            <li><strong>Fattori Predisponenti:</strong> La gastrite cronica, in particolare quella associata a infezioni da <em>Helicobacter</em>, √® considerata un fattore di rischio per lo sviluppo della neoplasia.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Segni Clinici</h3>
                        <p>I segni clinici sono cronici, progressivi e spesso aspecifici, il che contribuisce alla diagnosi tardiva:</p>
                        <ul class="list-disc pl-6">
                            <li>Vomito cronico, che pu√≤ contenere sangue (ematemesi).</li>
                            <li>Perdita di peso progressiva e anoressia.</li>
                            <li>Letargia e debolezza.</li>
                            <li>Melena (feci scure e picee) dovuta al sangue digerito proveniente dallo stomaco.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosi</h3>
                        <p>L'iter diagnostico mira a identificare la lesione e a escludere altre cause di segni gastroenterici cronici:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Esami del Sangue:</strong> Spesso rivelano un'anemia non rigenerativa da perdita di sangue cronica.</li>
                            <li><strong>Ecografia Addominale:</strong> Pu√≤ mostrare un marcato ispessimento della parete gastrica (specialmente a livello di piccola curvatura e antro pilorico) con perdita della normale stratificazione, e un ingrandimento dei linfonodi regionali.</li>
                            <li><strong>Endoscopia con Biopsia (Gold Standard):</strong> L'esame endoscopico permette la visualizzazione diretta della lesione, che appare tipicamente come una massa ulcerata o proliferativa. Il prelievo di campioni bioptici multipli √® fondamentale per la diagnosi istopatologica definitiva.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Stadiazione e Terapia</h3>
                        <p>Una volta confermata la diagnosi, √® essenziale la stadiazione per valutare la diffusione del tumore:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Stadiazione:</strong> Include radiografie del torace e un'ecografia addominale completa per ricercare metastasi ai linfonodi regionali, fegato e polmoni.</li>
                            <li><strong>Terapia:</strong> La resezione chirurgica del tumore √® il trattamento d'elezione, ma √® spesso impraticabile a causa della localizzazione e dell'infiltrazione locale. Procedure palliative (es. gastrodigiunostomia) possono essere eseguite per alleviare un'ostruzione. La chemioterapia ha dimostrato un'efficacia limitata. La prognosi √® quasi sempre infausta a causa della diagnosi tardiva e dell'alta tendenza a metastatizzare.</li>
                        </ul>`,
                    en: `<p><strong>Gastric carcinoma</strong> is the most common malignant neoplasm of the stomach in dogs, accounting for the majority of gastric tumors. It is an aggressive epithelial tumor, almost always an adenocarcinoma, which tends to be diagnosed at an advanced stage, with a generally poor prognosis.</p>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Signalment and Risk Factors</h3>
                        <ul class="list-disc pl-6">
                            <li><strong>Age:</strong> It predominantly affects older dogs (average age of 10 years).</li>
                            <li><strong>Breed:</strong> There is a breed predisposition for the Belgian Shepherd and Rough Collie.</li>
                            <li><strong>Predisposing Factors:</strong> Chronic gastritis, particularly associated with <em>Helicobacter</em> infections, is considered a risk factor for the development of the neoplasm.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Clinical Signs</h3>
                        <p>Clinical signs are chronic, progressive, and often nonspecific, which contributes to a late diagnosis:</p>
                        <ul class="list-disc pl-6">
                            <li>Chronic vomiting, which may contain blood (hematemesis).</li>
                            <li>Progressive weight loss and anorexia.</li>
                            <li>Lethargy and weakness.</li>
                            <li>Melena (dark, tarry stools) due to digested blood from the stomach.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Diagnosis</h3>
                        <p>The diagnostic process aims to identify the lesion and rule out other causes of chronic gastrointestinal signs:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Blood Tests:</strong> Often reveal a non-regenerative anemia from chronic blood loss.</li>
                            <li><strong>Abdominal Ultrasound:</strong> May show marked thickening of the gastric wall (especially in the lesser curvature and pyloric antrum) with loss of normal layering, and enlargement of regional lymph nodes.</li>
                            <li><strong>Endoscopy with Biopsy (Gold Standard):</strong> Endoscopic examination allows direct visualization of the lesion, which typically appears as an ulcerated or proliferative mass. Obtaining multiple biopsy samples is essential for a definitive histopathological diagnosis.</li>
                        </ul>
                        <h3 class="text-2xl font-semibold mt-6 mb-3">Staging and Therapy</h3>
                        <p>Once the diagnosis is confirmed, staging is essential to assess the spread of the tumor:</p>
                        <ul class="list-disc pl-6">
                            <li><strong>Staging:</strong> Includes thoracic radiographs and a full abdominal ultrasound to check for metastases to regional lymph nodes, liver, and lungs.</li>
                            <li><strong>Therapy:</strong> Surgical resection of the tumor is the treatment of choice but is often impractical due to the location and local infiltration. Palliative procedures (e.g., gastrojejunostomy) may be performed to relieve an obstruction. Chemotherapy has shown limited efficacy. The prognosis is almost always poor due to late diagnosis and a high tendency to metastasize.</li>
                        </ul>`
                },
                infographicTitle: { it: "Infografica Riepilogativa", en: "Summary Infographic" },
                infographicLinkTitle: { it: "Visualizza l'Infografica Dettagliata", en: "View the Detailed Infographic" },
                infographicLinkDesc: { it: "Clicca qui per una guida visuale completa sul carcinoma gastrico.", en: "Click here for a complete visual guide on gastric carcinoma." },
                quizTitle: { it: "Quiz di Autovalutazione", en: "Self-Assessment Quiz" },
                quizSubmit: { it: "Verifica Risposte", en: "Check Answers" },
                audioTitle: { it: "Ascolta il Riassunto", en: "Listen to the Summary" },
                btnDownloadAudio: { it: "Scarica", en: "Download" },
                audioListen: { it: "Ascolta il riassunto completo", en: "Listen to the full summary" },
                audioDesc: { it: "Ideale per ripassare mentre sei in movimento.", en: "Ideal for reviewing on the go." },
                bibliographyTitle: { it: "Riferimenti Bibliografici", en: "Bibliographical References" },
                bibliographyContent: { 
                    it: `<li>Vail, D. M., Thamm, D. H., & Liptak, J. M. (2020). Withrow and MacEwen's small animal clinical oncology. Elsevier.</li><li>Ettinger, S. J., Feldman, E. C., & Cote, E. (2017). Textbook of veterinary internal medicine. Elsevier health sciences.</li>`,
                    en: `<li>Vail, D. M., Thamm, D. H., & Liptak, J. M. (2020). Withrow and MacEwen's small animal clinical oncology. Elsevier.</li><li>Ettinger, S. J., Feldman, E. C., & Cote, E. (2017). Textbook of veterinary internal medicine. Elsevier health sciences.</li>`
                },
                btnPrint: { it: "Stampa Riassunto", en: "Print Summary" },
                accessibility: { it: "Accessibilit√†", en: "Accessibility" },
                "footer-credit": { it: "A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria", en: "Curated by Prof. Sara Busechian. Veterinary clinical medicine teachings" }
            };

            const quizData = {
                it: [
                    { question: "Qual √® la neoplasia gastrica maligna pi√π comune nel cane?", options: ["Linfoma", "Leiomiosarcoma", "Carcinoma (Adenocarcinoma)", "Mastocitoma"], answer: "Carcinoma (Adenocarcinoma)" },
                    { question: "Quale segno clinico indica la presenza di sangue digerito nelle feci?", options: ["Ematochezia", "Ematemesi", "Melena", "Emissione di muco"], answer: "Melena" },
                    { question: "Quale esame fornisce la diagnosi definitiva di carcinoma gastrico?", options: ["Radiografia con bario", "Ecografia addominale", "Endoscopia con biopsia", "Esame del sangue"], answer: "Endoscopia con biopsia" },
                    { question: "Quale reperto agli esami del sangue √® frequentemente associato a sanguinamento cronico?", options: ["Leucocitosi", "Piastrinopenia", "Anemia non rigenerativa", "Iperalbuminemia"], answer: "Anemia non rigenerativa" },
                    { question: "Qual √® il trattamento d'elezione per il carcinoma gastrico, quando possibile?", options: ["Chemioterapia", "Radioterapia", "Resezione chirurgica", "Terapia di supporto"], answer: "Resezione chirurgica" },
                    { question: "Quale razza √® considerata predisposta al carcinoma gastrico?", options: ["Labrador Retriever", "Barboncino", "Pastore Belga", "Bassotto"], answer: "Pastore Belga" },
                    { question: "La perdita della normale stratificazione della parete gastrica √® un reperto tipico di quale esame?", options: ["Esame coprologico", "Endoscopia", "Ecografia addominale", "Radiografia toracica"], answer: "Ecografia addominale" },
                    { question: "Perch√© la prognosi per il carcinoma gastrico √® spesso infausta?", options: ["Perch√© risponde bene alla chemioterapia", "Perch√© viene diagnosticato tardivamente e ha un alto potenziale metastatico", "Perch√© √® sempre benigno", "Perch√© colpisce solo cani giovani"], answer: "Perch√© viene diagnosticato tardivamente e ha un alto potenziale metastatico" },
                    { question: "In quale zona dello stomaco si localizza pi√π frequentemente il carcinoma gastrico?", options: ["Cardias", "Fondo", "Grande curvatura", "Piccola curvatura e antro pilorico"], answer: "Piccola curvatura e antro pilorico" },
                    { question: "Una gastrite cronica da *Helicobacter* √® considerata un...", options: ["Fattore protettivo", "Fattore di rischio", "Una conseguenza del tumore", "Un reperto irrilevante"], answer: "Fattore di rischio" }
                ],
                en: [
                    { question: "What is the most common malignant gastric neoplasm in dogs?", options: ["Lymphoma", "Leiomyosarcoma", "Carcinoma (Adenocarcinoma)", "Mast Cell Tumor"], answer: "Carcinoma (Adenocarcinoma)" },
                    { question: "Which clinical sign indicates the presence of digested blood in the feces?", options: ["Hematochezia", "Hematemesis", "Melena", "Mucus discharge"], answer: "Melena" },
                    { question: "Which exam provides the definitive diagnosis of gastric carcinoma?", options: ["Barium radiography", "Abdominal ultrasound", "Endoscopy with biopsy", "Blood test"], answer: "Endoscopy with biopsy" },
                    { question: "Which blood test finding is frequently associated with chronic bleeding?", options: ["Leukocytosis", "Thrombocytopenia", "Non-regenerative anemia", "Hyperalbuminemia"], answer: "Non-regenerative anemia" },
                    { question: "What is the treatment of choice for gastric carcinoma, when feasible?", options: ["Chemotherapy", "Radiotherapy", "Surgical resection", "Supportive care"], answer: "Surgical resection" },
                    { question: "Which breed is considered predisposed to gastric carcinoma?", options: ["Labrador Retriever", "Poodle", "Belgian Shepherd", "Dachshund"], answer: "Belgian Shepherd" },
                    { question: "Loss of normal gastric wall layering is a typical finding of which exam?", options: ["Fecal examination", "Endoscopy", "Abdominal ultrasound", "Thoracic radiography"], answer: "Abdominal ultrasound" },
                    { question: "Why is the prognosis for gastric carcinoma often poor?", options: ["Because it responds well to chemotherapy", "Because it is diagnosed late and has a high metastatic potential", "Because it is always benign", "Because it only affects young dogs"], answer: "Because it is diagnosed late and has a high metastatic potential" },
                    { question: "In which area of the stomach is gastric carcinoma most frequently located?", options: ["Cardia", "Fundus", "Greater curvature", "Lesser curvature and pyloric antrum"], answer: "Lesser curvature and pyloric antrum" },
                    { question: "Chronic gastritis from *Helicobacter* is considered a...", options: ["Protective factor", "Risk factor", "A consequence of the tumor", "An irrelevant finding"], answer: "Risk factor" }
                ]
            };
            
            let currentLanguage = localStorage.getItem('language') || 'it';
            
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;

            function stopSpeech() {
                if (synth.speaking || synth.paused) {
                    synth.cancel();
                }
            }
            
            function speak(text, button) {
                if (activeTTSButton === button && currentUtterance) {
                    if (synth.paused) {
                        synth.resume();
                    } else if (synth.speaking) {
                        synth.pause();
                    }
                    return; 
                }

                stopSpeech();
                
                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                
                currentUtterance.onstart = () => {
                    if(activeTTSButton) activeTTSButton.classList.remove('playing');
                    button.classList.add('playing');
                    activeTTSButton = button;
                };

                currentUtterance.onpause = () => {
                    if (button) button.classList.remove('playing');
                };

                currentUtterance.onresume = () => {
                    if (button) button.classList.add('playing');
                };
                
                const cleanup = () => {
                    if (button) button.classList.remove('playing');
                    if(activeTTSButton === button) {
                        activeTTSButton = null;
                        currentUtterance = null;
                    }
                };

                currentUtterance.onend = cleanup;

                currentUtterance.onerror = (event) => {
                     if (event.error !== 'canceled' && event.error !== 'interrupted') {
                        console.error('An error occurred with speech synthesis:', event.error);
                    }
                    cleanup();
                };

                synth.speak(currentUtterance);
            }

            let sound = null;

            function initHowler() {
                sound = new Howl({
                    src: ['audio_carcinoma_gastrico.mp3'],
                    html5: true, 
                    onplay: () => { playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); },
                    onpause: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onend: () => { playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); },
                    onloaderror: (id, msg) => {
                        console.error("Error loading audio:", msg);
                        const audioDesc = document.querySelector('[data-lang-key="audioDesc"]');
                        if (audioDesc) audioDesc.textContent = "Errore nel caricamento del file audio.";
                    },
                    onplayerror: (id, msg) => {
                        console.error("Error playing audio:", msg);
                        const audioDesc = document.querySelector('[data-lang-key="audioDesc"]');
                        if (audioDesc) audioDesc.textContent = "Impossibile riprodurre il file audio.";
                    }
                });
            }

            const playPauseBtn = document.getElementById('audio-play-pause');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');

            playPauseBtn.addEventListener('click', () => {
                if (!sound) initHowler();
                if (sound.playing()) sound.pause(); else sound.play();
            });

           function setupTTSListeners() {
                document.querySelectorAll('.tts-button').forEach(button => {
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                    newButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        let textToRead = '';
                        const parentElement = newButton.parentElement;

                        if (parentElement.tagName === 'H1' && parentElement.dataset.langKey === 'pageTitle') {
                             const titleClone = parentElement.cloneNode(true);
                             titleClone.querySelector('.tts-button').remove();
                             textToRead = titleClone.textContent.trim();
                             const subtitle = parentElement.nextElementSibling;
                             if(subtitle && subtitle.dataset.langKey === 'pageSubtitle') {
                                 textToRead += '. ' + subtitle.textContent.trim();
                             }
                        }
                        else if (parentElement.tagName === 'H2') {
                            const section = parentElement.closest('section');
                            const titleClone = parentElement.cloneNode(true);
                            titleClone.querySelector('.tts-button').remove();
                            textToRead = titleClone.textContent.trim();

                            if (section && section.id === 'riassunto') {
                                const content = section.querySelector('[data-lang-key="summaryContent"]');
                                if (content) {
                                    const contentClone = content.cloneNode(true);
                                    contentClone.querySelectorAll('div, img').forEach(el => el.remove());
                                    textToRead += '. ' + contentClone.textContent.trim().replace(/\s\s+/g, ' ');
                                }
                            }
                        } 
                        else if (parentElement.tagName === 'H3') {
                                const questionTextNode = parentElement.querySelector('span:first-child');
                                if (questionTextNode) textToRead = questionTextNode.textContent.trim().replace(/^\d+\.\s*/, '');
                        }
                        else if (parentElement.closest('label')) {
                            const label = parentElement.closest('label');
                            const answerTextNode = label.querySelector('span:first-child');
                            if (answerTextNode) textToRead = answerTextNode.textContent.trim();
                        }
                        
                        if (textToRead) speak(textToRead, newButton);
                    });
                });
            }

            function loadQuiz(lang) {
                const quizContainer = document.getElementById('quiz-container');
                quizContainer.innerHTML = '';
                document.getElementById('quiz-results').innerHTML = ''; 
                quizData[lang].forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question p-4 rounded-lg';
                    let optionsHtml = q.options.map(o => `
                        <li class="quiz-option p-2 rounded hover:bg-orange-50">
                            <label class="flex items-center justify-between w-full cursor-pointer">
                                <span class="flex-grow pr-4"><input type="radio" name="q${index}" value="${o}" class="mr-3">${o}</span>
                                <span class="tts-button flex-shrink-0"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span>
                            </label>
                        </li>`).join('');
                    questionDiv.innerHTML = `<h3 class="font-semibold mb-2 flex items-center justify-between"><span>${index + 1}. ${q.question}</span><span class="tts-button"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h3><ul class="space-y-1">${optionsHtml}</ul>`;
                    quizContainer.appendChild(questionDiv);
                });
            }

            function updateLanguage(lang) {
                document.documentElement.lang = lang;
                document.getElementById('lang-toggle').textContent = lang === 'it' ? 'EN' : 'IT';
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.dataset.langKey;
                    if (translations[key] && translations[key][lang]) {
                        if (key.includes('Content')) {
                                element.innerHTML = translations[key][lang];
                        } else {
                            const ttsButton = element.querySelector('.tts-button');
                            element.textContent = translations[key][lang];
                            if(ttsButton) element.appendChild(ttsButton);
                        }
                    }
                });
                
                const navAudio = document.querySelector('a[data-lang-key="navAudio"]');
                const sectionAudio = document.getElementById('audio');
                if (lang === 'en') {
                    if(navAudio) navAudio.style.display = 'none';
                    if(sectionAudio) sectionAudio.style.display = 'none';
                } else {
                    if(navAudio) navAudio.style.display = 'block';
                    if(sectionAudio) sectionAudio.style.display = 'block';
                }

                const dsaToggle = document.getElementById('accessibility-toggle');
                if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = lang === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = lang === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
                loadQuiz(lang);
                setupTTSListeners();
            }
            
            document.getElementById('lang-toggle').addEventListener('click', () => {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                localStorage.setItem('language', currentLanguage);
                updateLanguage(currentLanguage);
            });

            const dsaToggle = document.getElementById('accessibility-toggle');
            dsaToggle.addEventListener('click', () => {
                document.body.classList.toggle('dsa-mode');
                 if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
            });

            document.getElementById('submit-quiz').addEventListener('click', () => {
                let score = 0;
                const questions = document.querySelectorAll('.quiz-question');
                quizData[currentLanguage].forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    questions[index].classList.remove('correct', 'incorrect');
                    if (selected) {
                        if (selected.value === q.answer) {
                            score++;
                            questions[index].classList.add('correct');
                        } else {
                            questions[index].classList.add('incorrect');
                        }
                    } else {
                        questions[index].classList.add('incorrect');
                    }
                });
                const resultsContainer = document.getElementById('quiz-results');
                const resultText = {
                    it: `Hai risposto correttamente a ${score} su ${quizData.it.length} domande.`,
                    en: `You answered ${score} out of ${quizData.en.length} questions correctly.`
                };
                resultsContainer.textContent = resultText[currentLanguage];
            });
            
            // Initial setup
            updateLanguage(currentLanguage);
        });
    </script>
</body>
</html>
