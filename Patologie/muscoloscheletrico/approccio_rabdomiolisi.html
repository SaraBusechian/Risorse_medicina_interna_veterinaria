<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="titleTag">Approccio alla Rabdomiolisi - MedVet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Stile base con palette CIANO */
        body { font-family: 'Inter', sans-serif; background-color: #ecfeff; /* cyan-50 */ color: #1e293b; /* slate-800 */ }
        .content-section { background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { transition: all 0.2s; border-bottom: 2px solid transparent; color: #0891b2; /* cyan-600 */ }
        .nav-link:hover, .nav-link.active { border-bottom-color: #0e7490; /* cyan-700 */ color: #155e75; /* cyan-800 */ }
        
        /* Modalit√† DSA */
        .dsa-mode { font-family: 'Lexend', sans-serif; background-color: #f8fafc !important; letter-spacing: 0.05em; line-height: 1.75; color: #1e293b; }
        .dsa-mode #main-header, .dsa-mode #main-footer { background-color: #000000 !important; }
        .dsa-mode #main-header h1, .dsa-mode #main-header a, .dsa-mode #main-footer p, .dsa-mode button { color: #ffffff !important; }
        .dsa-mode button { border: 1px solid #ffffff; }
        .dsa-mode .content-section { background-color: #ffffff; border: 1px solid #e2e8f0; }
        .dsa-mode h1, .dsa-mode h2, .dsa-mode h3, .dsa-mode p, .dsa-mode li { color: #1e293b; }
        .dsa-mode .prose strong { color: #000000; }
        .dsa-mode .prose h3 { color: #1e293b; border-bottom-color: #94a3b8; }
        .dsa-mode .prose h4 { color: #1e293b; }
        .dsa-mode .nav-link { color: #334155; }
        .dsa-mode .nav-link:hover, .dsa-mode .nav-link.active { border-bottom-color: #334155; color: #000000; }
        .dsa-mode .quiz-question { border-color: #cbd5e1; }
        .dsa-mode .quiz-option:hover { background-color: #f1f5f9; }

        /* Bottoni TTS */
        .tts-button { cursor: pointer; display: inline-block; margin-left: 10px; vertical-align: middle; color: #0891b2; transition: color 0.2s; }
        .tts-button:hover, .tts-button.playing { color: #06b6d4; }
        
        /* Stili riassunto */
        .prose h3 { font-size: 1.5rem; font-weight: 600; color: #0e7490; margin-top: 2rem; margin-bottom: 1rem; padding-bottom: 0.25rem; border-bottom: 1px solid #bae6fd; }
        .prose p, .prose ul { font-size: 1rem; line-height: 1.75; color: #374151; margin-bottom: 1.25rem; }
        .prose strong { color: #155e75; font-weight: 600; }
        .prose ul { list-style-type: disc; padding-left: 1.75rem; }
        .prose li { margin-bottom: 0.5rem; }
        .prose h4 { font-size: 1.25rem; font-weight: 600; color: #0e7490; margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .dsa-mode .prose h4 { color: #1e293b; }
        .quiz-question { border: 1px solid #bae6fd; transition: all 0.3s; }
        .quiz-option:hover { background-color: #ecfeff; }
        .quiz-question.correct { background-color: #dcfce7; border-color: #4ade80; }
        .quiz-question.incorrect { background-color: #fee2e2; border-color: #f87171; }

        @media print {
            #main-header, #main-footer, #page-nav, #infografica, #quiz, #audio, #print-button, .tts-button, a[href*="infografica"], a[href*="index.html"] { display: none; }
            body, .content-section { background-color: #ffffff !important; color: #000000 !important; }
            .content-section { box-shadow: none; border: none; }
            h1, h2, h3, h4, p, li, strong { color: #000000 !important; }
            .prose h3 { border-color: #000000; }
        }
    </style>
</head>
<body class="bg-cyan-50">

    <header id="main-header" class="bg-cyan-800 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <h1 class="text-xl font-bold !text-white !border-none !m-0 !p-0 !text-left" data-lang-key="siteTitle">Patologie Muscoloscheletriche</h1>
            <div class="flex items-center space-x-4">
                <button id="accessibility-toggle" aria-label="Attiva modalit√† ad alta leggibilit√†" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition" data-lang-key="accessibility">Accessibilit√†</button>
                <button id="lang-toggle" aria-label="Change language" class="text-sm font-semibold px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">EN</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-10">
        <div class="text-left mb-8">
            <a href="index.html" class="inline-flex items-center bg-white text-cyan-700 font-bold py-2 px-4 rounded-lg shadow hover:bg-cyan-100 transition duration-300" data-lang-key="backToIndex">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd"></path></svg>
                <span data-lang-key="backToIndexText">Indice Muscoloscheletrico</span>
            </a>
        </div>
        
        <div class="content-section p-6 md:p-10">
            <header class="text-center border-b-2 border-cyan-200 pb-6 mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-cyan-800" data-lang-key="pageTitle">Approccio alla Rabdomiolisi<span class="tts-button"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h1>
                <p class="text-lg text-cyan-700 mt-2" data-lang-key="pageSubtitle">Diagnosi differenziale delle pigmenturie e cause di danno muscolare (cane e cavallo).</p>
            </header>

            <nav id="page-nav" class="flex justify-center flex-wrap gap-4 md:gap-8 mb-10 border-b border-gray-200">
                <a href="#riassunto" class="nav-link font-semibold py-2" data-lang-key="navSummary">Riassunto</a>
                <a href="#infografica" class="nav-link font-semibold py-2" data-lang-key="navInfographic">Infografica</a>
                <a href="#quiz" class="nav-link font-semibold py-2" data-lang-key="navQuiz">Quiz</a>
                <a href="#audio" class="nav-link font-semibold py-2" data-lang-key="navAudio">Audio</a>
                <a href="#bibliografia" class="nav-link font-semibold py-2" data-lang-key="navBibliography">Bibliografia</a>
            </nav>

            <article class="space-y-12">
                <section id="riassunto">
                    <h2 class="text-3xl font-bold text-cyan-700 mb-4 flex items-center" data-lang-key="summaryTitle">Riassunto Completo <span class="tts-button"><svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg></span></h2>
                    <div class="prose max-w-none" data-lang-key="summaryContent">
                        <!-- Content loaded by JS -->
                    </div>
                </section>

                <section id="infografica">
                    <h2 class="text-3xl font-bold text-cyan-700 mb-4" data-lang-key="infographicTitle">Infografica Riepilogativa</h2>
                    <a href="infografica_approccio_rabdo.html" target="_blank" class="block bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow border-l-4 border-cyan-500">
                        <div class="flex items-center space-x-6">
                            <div class="flex-shrink-0 w-24 h-24 bg-cyan-500 rounded-lg flex items-center justify-center">
                                <span class="text-5xl" role="img" aria-label="Icona di un rene">ü©∫</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-cyan-800" data-lang-key="infographicLinkTitle">Approccio Clinico alla Rabdomiolisi</h3>
                                <p class="text-gray-600 mt-1" data-lang-key="infographicLinkDesc">Algoritmo completo: diagnosi, cause e terapia.</p>
                            </div>
                        </div>
                    </a>
                </section>

                <section id="quiz">
                    <h2 class="text-3xl font-bold text-cyan-700 mb-4" data-lang-key="quizTitle">Quiz di Autovalutazione</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Questions loaded by JS -->
                    </div>
                    <div class="mt-6 text-center">
                        <button id="submit-quiz" class="bg-cyan-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-cyan-700 transition" data-lang-key="quizSubmit">Verifica Risposte</button>
                    </div>
                    <div id="quiz-results" class="mt-6 text-center text-xl font-bold"></div>
                </section>

                <section id="audio">
                    <h2 class="text-3xl font-bold text-cyan-700 mb-4" data-lang-key="audioTitle">Ascolta il Riassunto</h2>
                    <div class="p-4 bg-cyan-100/50 rounded-lg flex flex-col sm:flex-row items-center gap-4 w-full">
                        <button id="audio-play-pause" class="p-3 bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-colors duration-200">
                            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg>
                            <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" viewBox="0 0 20 20" fill="currentColor"><path d="M5.75 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75zM14.25 4.5a.75.75 0 00-.75.75v10a.75.75 0 001.5 0v-10a.75.75 0 00-.75-.75z" /></svg>
                        </button>
                        <div class="flex-grow text-center sm:text-left">
                            <p class="font-semibold text-cyan-800" data-lang-key="audioListen">Ascolta il riassunto completo</p>
                            <p class="text-sm text-cyan-600" data-lang-key="audioDesc">Ideale per ripassare mentre sei in movimento.</p>
                        </div>
                        <a href="audio_approccio_rabdomiolisi.mp3" download class="bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition inline-flex items-center w-full sm:w-auto justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            <span data-lang-key="btnDownloadAudio">Scarica</span>
                        </a>
                    </div>
                </section>

                <section id="bibliografia">
                    <h2 class="text-3xl font-bold text-cyan-700 mb-4" data-lang-key="bibliographyTitle">Riferimenti Bibliografici</h2>
                    <ul class="list-disc pl-6 text-cyan-900" data-lang-key="bibliographyContent">
                        <!-- Content loaded by JS -->
                    </ul>
                </section>
            </article>
            
            <div class="mt-12 text-center">
                <button id="print-button" onclick="window.print()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition inline-flex items-center" data-lang-key="btnPrint">Stampa Riassunto</button>
            </div>
        </div>
    </main>
    <footer id="main-footer" class="text-center mt-16 pt-8 border-t border-cyan-100">
        <p class="text-slate-500" data-lang-key="footer-credit">A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                titleTag: { it: "Approccio alla Rabdomiolisi - MedVet", en: "Approach to Rhabdomyolysis - MedVet" },
                siteTitle: { it: "Patologie Muscoloscheletriche", en: "Musculoskeletal Diseases" },
                backToIndexText: { it: "Indice Muscoloscheletrico", en: "Musculoskeletal Index" },
                pageTitle: { it: "Approccio alla Rabdomiolisi", en: "Approach to Rhabdomyolysis" },
                pageSubtitle: { it: "Diagnosi differenziale delle pigmenturie e cause di danno muscolare (cane e cavallo).", en: "Differential diagnosis of pigmenturia and causes of muscle damage (dog and horse)." },
                navSummary: { it: "Riassunto", en: "Summary" },
                navInfographic: { it: "Infografica", en: "Infographic" },
                navQuiz: { it: "Quiz", en: "Quiz" },
                navAudio: { it: "Audio", en: "Audio" },
                navBibliography: { it: "Bibliografia", en: "Bibliography" },
                summaryTitle: { it: "Riassunto Completo", en: "Full Summary" },
                summaryContent: { 
                    it: '<h3>Definizione</h3>' +
                        '<p>La <strong>rabdomiolisi</strong> √® la necrosi acuta delle fibre muscolari scheletriche, con rilascio nel circolo ematico del contenuto intracellulare, tra cui elettroliti (potassio, fosforo), enzimi (CK, AST) e mioglobina. √à un\'emergenza medica in quanto pu√≤ portare a insufficienza renale acuta (AKI).</p>' +
                        '<h3>Eziologia: Classificazione delle Cause</h3>' +
                        '<p>Sebbene la causa pi√π nota nel cavallo sia lo sforzo fisico, esistono molte altre eziologie possibili sia nel cane che nel cavallo.</p>' +
                        '<h4>1. Cause Traumatiche e Ischemiche</h4>' +
                        '<ul><li><strong>Trauma diretto:</strong> Incidenti stradali (HBC), schiacciamenti, cadute gravi.</li>' +
                        '<li><strong>Compressione prolungata:</strong> Anestesia prolungata su superfici dure ("Post-anesthetic Myopathy" nel cavallo).</li>' +
                        '<li><strong>Ischemia vascolare:</strong> Tromboembolismo aortico (gatto, cane), sindrome compartimentale.</li></ul>' +
                        '<h4>2. Cause da Sforzo (Exertional)</h4>' +
                        '<ul><li><strong>Cavallo:</strong> Rabdomiolisi sporadica (errori di gestione) o ricorrente (RER, PSSM).</li>' +
                        '<li><strong>Cane:</strong> Cani da slitta, levrieri da corsa, cani da lavoro intenso (Exercise-Induced Collapse - EIC nei Labrador).</li></ul>' +
                        '<h4>3. Cause Infettive e Infiammatorie</h4>' +
                        '<ul><li><strong>Miositi Infettive:</strong> Clostridi (Gangrena gassosa), Protozoi (<i>Neospora caninum</i>, <i>Hepatozoon americanum</i>), Leptospirosi.</li>' +
                        '<li><strong>Miositi Immunomediate:</strong> Miosite dei Muscoli Masticatori, Polimiosite.</li></ul>' +
                        '<h4>4. Cause Tossiche e Nutrizionali</h4>' +
                        '<ul><li><strong>Tossine:</strong> Veleno di serpente (crotalidi), ionofori (es. monensin nei cavalli), farmaci.</li>' +
                        '<li><strong>Nutrizionali:</strong> Carenza severa di Vitamina E e Selenio (Malattia del Muscolo Bianco in puledri e vitelli).</li>' +
                        '<li><strong>Ipertermia Maligna:</strong> Ereditaria (es. suini, cani) scatenata da anestetici.</li></ul>' +
                        '<h3>Segni Clinici</h3>' +
                        '<p>Variano in base alla gravit√† e alla causa sottostante.</p>' +
                        '<ul><li><strong>Locali:</strong> Dolore muscolare, gonfiore, calore, rigidit√† ("stiff gait").</li>' +
                        '<li><strong>Sistemici:</strong> Debolezza, riluttanza al movimento, tachicardia, febbre (se infettiva o ipertermia).</li>' +
                        '<li><strong>Pigmenturia:</strong> Urine di colore rosso-bruno (tipo "Coca-Cola" o caff√®) dovute alla mioglobinuria.</li></ul>' +
                        '<h3>Diagnosi Differenziale della Pigmenturia</h3>' +
                        '<p>Davanti a urine scure, √® fondamentale distinguere:</p>' +
                        '<ul><li><strong>Ematuria:</strong> Sangue intero. Al sedimento urinario si vedono globuli rossi intatti. Il surnatante, dopo centrifugazione, diventa chiaro.</li>' +
                        '<li><strong>Emoglobinuria:</strong> Da emolisi (rottura GR). Il siero del sangue √® ROSSO (emolisi).</li>' +
                        '<li><strong>Mioglobinuria:</strong> Da danno muscolare. Il siero del sangue √® CHIARO (la mioglobina viene filtrata rapidamente, l\'emoglobina no).</li></ul>' +
                        '<h3>Iter Diagnostico Approfondito</h3>' +
                        '<p>Per confermare la rabdomiolisi e identificarne la causa specifica, sono necessari esami collaterali:</p>' +
                        '<h4>1. Esami del Sangue (Biochimico)</h4>' +
                        '<ul><li><strong>CK (Creatinchinasi):</strong> Enzima muscolo-specifico. Aumenta entro 2-12 ore. Picco rapido e discesa rapida (emivita breve). √à l\'indicatore pi√π sensibile di danno acuto.</li>' +
                        '<li><strong>AST (Aspartato Aminotransferasi):</strong> Aumenta pi√π lentamente del CK e ha un\'emivita pi√π lunga. <em>Nota specie-specifica:</em> Nel <strong>cavallo</strong> √® un buon indicatore di danno muscolare (se associato a CK). Nel <strong>cane</strong> non √® muscolo-specifico (si trova anche nel fegato e globuli rossi), quindi un suo aumento va interpretato con cautela (cercare ALT per il fegato).</li>' +
                        '<li><strong>Elettroliti:</strong> Fondamentale monitorare il Potassio (rischio iperkaliemia).</li></ul>' +
                        '<h4>2. Diagnostica per Immagini (Ecografia)</h4>' +
                        '<p>L\'ecografia muscolare √® utile per distinguere tra danni diffusi (rabdomiolisi) e focali (strappi, ematomi). Il muscolo normale ha un aspetto striato; in caso di rabdomiolisi, si perde l\'architettura normale e l\'ecogenicit√† pu√≤ aumentare.</p>' +
                        '<h4>3. Biopsia Muscolare</h4>' +
                        '<p>√à il test d\'elezione (Gold Standard) per diagnosticare la causa sottostante, specialmente nelle forme ricorrenti, infiammatorie (es. Miosite Masticatori) o da accumulo (es. PSSM). Permette di valutare necrosi, infiammazione, inclusi cellulari o difetti enzimatici.</p>' +
                        '<h3>Conseguenze Cliniche: Danno Renale</h3>' +
                        '<p>La mioglobina √® tossica per i reni per tre meccanismi:</p>' +
                        '<ol><li>Vasocostrizione renale.</li><li>Formazione di cilindri intratubulari che ostruiscono il flusso.</li><li>Tossicit√† diretta sulle cellule tubulari (danno ossidativo).</li></ol>' +
                        '<p><strong>L\'ipovolemia, la disidratazione e l\'acidosi aggravano drasticamente la nefrotossicit√†.</strong></p>' +
                        '<h3>Principi di Terapia</h3>' +
                        '<ul><li><strong>Fluidoterapia Aggressiva:</strong> √à la priorit√† assoluta per ripristinare la volemia e favorire la diuresi, "lavando via" la mioglobina dai reni.</li>' +
                        '<li><strong>Trattare la causa primaria:</strong> Riposo (se da sforzo), antidoti (se tossica), antibiotici (se batterica).</li>' +
                        '<li><strong>Gestione del dolore:</strong> Analgesia multimodale. Attenzione ai FANS se c\'√® rischio renale o disidratazione!</li>' +
                        '<li><strong>Monitoraggio Elettroliti:</strong> Attenzione all\'<strong>iperkaliemia</strong> (rilasciata dai muscoli distrutti) che pu√≤ causare arresto cardiaco.</li></ul>', 
                    en: '<h3>Definition</h3>' +
                        '<p><strong>Rhabdomyolysis</strong> is the acute necrosis of skeletal muscle fibers, releasing intracellular content into the bloodstream, including electrolytes (potassium, phosphorus), enzymes (CK, AST), and myoglobin. It is a medical emergency as it can lead to acute kidney injury (AKI).</p>' +
                        '<h3>Etiology: Classification of Causes</h3>' +
                        '<p>While exertion is the most known cause in horses, there are many other etiologies in both dogs and horses.</p>' +
                        '<h4>1. Traumatic and Ischemic Causes</h4>' +
                        '<ul><li><strong>Direct Trauma:</strong> Hit by car (HBC), crush injuries, severe falls.</li>' +
                        '<li><strong>Prolonged Compression:</strong> Prolonged anesthesia on hard surfaces ("Post-anesthetic Myopathy" in horses).</li>' +
                        '<li><strong>Vascular Ischemia:</strong> Aortic thromboembolism (cat, dog), compartment syndrome.</li></ul>' +
                        '<h4>2. Exertional Causes</h4>' +
                        '<ul><li><strong>Horse:</strong> Sporadic rhabdomyolysis (management errors) or recurrent (RER, PSSM).</li>' +
                        '<li><strong>Dog:</strong> Sled dogs, racing greyhounds, intense working dogs (Exercise-Induced Collapse - EIC in Labradors).</li></ul>' +
                        '<h4>3. Infectious and Inflammatory Causes</h4>' +
                        '<ul><li><strong>Infectious Myositis:</strong> Clostridia (Gas Gangrene), Protozoa (<i>Neospora caninum</i>, <i>Hepatozoon americanum</i>), Leptospirosis.</li>' +
                        '<li><strong>Immune-Mediated Myositis:</strong> Masticatory Muscle Myositis, Polymyositis.</li></ul>' +
                        '<h4>4. Toxic and Nutritional Causes</h4>' +
                        '<ul><li><strong>Toxins:</strong> Snake venom (crotalids), Ionophores (e.g., monensin in horses), drugs.</li>' +
                        '<li><strong>Nutritional:</strong> Severe Vitamin E and Selenium deficiency (White Muscle Disease in foals and calves).</li>' +
                        '<li><strong>Malignant Hyperthermia:</strong> Hereditary (e.g., pigs, dogs) triggered by anesthetics.</li></ul>' +
                        '<h3>Clinical Signs</h3>' +
                        '<p>Vary based on severity and underlying cause.</p>' +
                        '<ul><li><strong>Local:</strong> Muscle pain, swelling, heat, stiffness ("stiff gait").</li>' +
                        '<li><strong>Systemic:</strong> Weakness, reluctance to move, tachycardia, fever (if infectious or hyperthermia).</li>' +
                        '<li><strong>Pigmenturia:</strong> Red-brown urine ("Coca-Cola" or coffee colored) due to myoglobinuria.</li></ul>' +
                        '<h3>Differential Diagnosis of Pigmenturia</h3>' +
                        '<p>With dark urine, it is crucial to distinguish:</p>' +
                        '<ul><li><strong>Hematuria:</strong> Whole blood. Intact RBCs seen in urine sediment. Supernatant becomes clear after centrifugation.</li>' +
                        '<li><strong>Hemoglobinuria:</strong> From hemolysis (RBC breakdown). Blood serum is RED (hemolysis).</li>' +
                        '<li><strong>Myoglobinuria:</strong> From muscle damage. Blood serum is CLEAR (myoglobin is filtered rapidly, hemoglobin is not).</li></ul>' +
                        '<h3>In-Depth Diagnostic Approach</h3>' +
                        '<p>To confirm rhabdomyolysis and identify the specific cause, ancillary tests are required:</p>' +
                        '<h4>1. Blood Tests (Biochemistry)</h4>' +
                        '<ul><li><strong>CK (Creatine Kinase):</strong> Muscle-specific enzyme. Increases within 2-12 hours. Rapid peak and rapid decline (short half-life). It is the most sensitive indicator of acute damage.</li>' +
                        '<li><strong>AST (Aspartate Aminotransferase):</strong> Increases more slowly than CK and has a longer half-life. <em>Species-specific note:</em> In the <strong>horse</strong>, it is a good indicator of muscle damage (if associated with CK). In the <strong>dog</strong>, it is not muscle-specific (found also in liver and RBCs), so its elevation must be interpreted with caution (check ALT for liver).</li>' +
                        '<li><strong>Electrolytes:</strong> Crucial to monitor Potassium (risk of hyperkalemia).</li></ul>' +
                        '<h4>2. Imaging (Ultrasound)</h4>' +
                        '<p>Muscle ultrasound is useful to distinguish between diffuse damage (rhabdomyolysis) and focal lesions (tears, hematomas). Normal muscle has a striated appearance; in rhabdomyolysis, normal architecture is lost and echogenicity may increase.</p>' +
                        '<h4>3. Muscle Biopsy</h4>' +
                        '<p>It is the test of choice (Gold Standard) to diagnose the underlying cause, especially in recurrent, inflammatory (e.g., Masticatory Myositis), or storage forms (e.g., PSSM). It allows evaluation of necrosis, inflammation, cellular inclusions, or enzymatic defects.</p>' +
                        '<h3>Clinical Consequences: Kidney Damage</h3>' +
                        '<p>Myoglobin is toxic to the kidneys via three mechanisms:</p>' +
                        '<ol><li>Renal vasoconstriction.</li><li>Formation of intratubular casts obstructing flow.</li><li>Direct toxicity to tubular cells (oxidative damage).</li></ol>' +
                        '<p><strong>Hypovolemia, dehydration, and acidosis drastically worsen nephrotoxicity.</strong></p>' +
                        '<h3>Therapeutic Principles</h3>' +
                        '<ul><li><strong>Aggressive Fluid Therapy:</strong> The absolute priority to restore volume and promote diuresis, "flushing out" myoglobin from the kidneys.</li>' +
                        '<li><strong>Treat Primary Cause:</strong> Rest (if exertional), antidotes (if toxic), antibiotics (if bacterial).</li>' +
                        '<li><strong>Pain Management:</strong> Multimodal analgesia. Caution with NSAIDs if there is renal risk or dehydration!</li>' +
                        '<li><strong>Electrolyte Monitoring:</strong> Watch for <strong>hyperkalemia</strong> (released from destroyed muscles) which can cause cardiac arrest.</li></ul>' 
                },
                infographicTitle: { it: "Infografica Riepilogativa", en: "Summary Infographic" },
                infographicLinkTitle: { it: "Approccio Clinico alla Rabdomiolisi", en: "Clinical Approach to Rhabdomyolysis" },
                infographicLinkDesc: { it: "Algoritmo completo: diagnosi, cause e terapia.", en: "Complete algorithm: diagnosis, causes, and therapy." },
                quizTitle: { it: "Quiz di Autovalutazione", en: "Self-Assessment Quiz" },
                quizSubmit: { it: "Verifica Risposte", en: "Check Answers" },
                audioTitle: { it: "Ascolta il Riassunto", en: "Listen to the Summary" },
                btnDownloadAudio: { it: "Scarica", en: "Download" },
                audioListen: { it: "Ascolta il riassunto completo", en: "Listen to the full summary" },
                audioDesc: { it: "Ideale per ripassare mentre sei in movimento.", en: "Ideal for reviewing on the go." },
                bibliographyTitle: { it: "Riferimenti Bibliografici", en: "Bibliographical References" },
                bibliographyContent: { 
                    it: '<li>COT√â-ETTINGER-FELDMAN- Ettinger\'s Textbook of Veterinary Internal Medicine 9¬∞ ed., Elsevier, 2024.</li>' +
                        '<li>REED-BAYLY-SELLON - Equine Internal Medicine 4th ed., Elsevier, 2018.</li>', 
                    en: '<li>COT√â-ETTINGER-FELDMAN- Ettinger\'s Textbook of Veterinary Internal Medicine 9th ed., Elsevier, 2024.</li>' +
                        '<li>REED-BAYLY-SELLON - Equine Internal Medicine 4th ed., Elsevier, 2018.</li>' 
                },
                btnPrint: { it: "Stampa Riassunto", en: "Print Summary" },
                accessibility: { it: "Accessibilit√†", en: "Accessibility" },
                "footer-credit": { it: "A cura della Prof.ssa Sara Busechian. Insegnamenti di clinica medica veterinaria", en: "Curated by Prof. Sara Busechian. Veterinary clinical medicine teachings" }
            };

            // --- QUIZ DATA ---
            const quizData = {
                it: [
                    { question: "Qual √® la differenza principale tra mioglobinuria ed emoglobinuria nel colore del siero?", options: ["Siero rosso in entrambe", "Siero chiaro nella mioglobinuria, rosso nell'emoglobinuria", "Siero rosso nella mioglobinuria, chiaro nell'emoglobinuria", "Non ci sono differenze"], answer: "Siero chiaro nella mioglobinuria, rosso nell'emoglobinuria" },
                    { question: "Quale elettrolita rilasciato dal muscolo danneggiato pu√≤ causare aritmie cardiache fatali?", options: ["Sodio", "Calcio", "Potassio", "Cloro"], answer: "Potassio" },
                    { question: "La 'Malattia del Muscolo Bianco' √® causata da una carenza di:", options: ["Vitamina D e Calcio", "Vitamina E e Selenio", "Vitamina B12", "Ferro"], answer: "Vitamina E e Selenio" },
                    { question: "In caso di rabdomiolisi traumatica, qual √® la priorit√† terapeutica assoluta per proteggere i reni?", options: ["Antibiotici", "Fluidoterapia aggressiva", "Cortisone", "Riposo"], answer: "Fluidoterapia aggressiva" },
                    { question: "La mioglobinuria predispone a quale patologia d'organo?", options: ["Epatite acuta", "Insufficienza renale acuta", "Polmonite", "Pancreatite"], answer: "Insufficienza renale acuta" },
                    { question: "Quale dei seguenti √® un esempio di miosite infettiva?", options: ["Polimiosite immunomediata", "Clostridiosi (Gangrena gassosa)", "Miosite dei Masticatori", "RER"], answer: "Clostridiosi (Gangrena gassosa)" },
                    { question: "Come si differenzia l'ematuria dalla pigmenturia (mio/emoglobinuria) al sedimento urinario?", options: ["L'ematuria ha globuli rossi visibili (sedimento rosso)", "L'ematuria ha urine chiare", "Non si pu√≤ differenziare", "La pigmenturia ha batteri"], answer: "L'ematuria ha globuli rossi visibili (sedimento rosso)" },
                    { question: "Nei Labrador Retriever, quale condizione genetica causa rabdomiolisi da sforzo?", options: ["PSSM", "EIC (Exercise-Induced Collapse)", "HYPP", "DM"], answer: "EIC (Exercise-Induced Collapse)" },
                    { question: "I FANS (antinfiammatori) in un paziente con mioglobinuria devono essere usati:", options: ["Sempre ad alte dosi", "Con cautela e solo se il paziente √® ben idratato", "Mai", "Per via orale"], answer: "Con cautela e solo se il paziente √® ben idratato" },
                    { question: "Quale condizione metabolica nel gatto pu√≤ causare grave debolezza muscolare e rabdomiolisi?", options: ["Iperkaliemia", "Ipokaliemia", "Iperglicemia", "Iponatriemia"], answer: "Ipokaliemia" }
                ],
                en: [
                    { question: "What is the main difference between myoglobinuria and hemoglobinuria regarding serum color?", options: ["Red serum in both", "Clear serum in myoglobinuria, red in hemoglobinuria", "Red serum in myoglobinuria, clear in hemoglobinuria", "No difference"], answer: "Clear serum in myoglobinuria, red in hemoglobinuria" },
                    { question: "Which electrolyte released from damaged muscle can cause fatal cardiac arrhythmias?", options: ["Sodium", "Calcium", "Potassium", "Chloride"], answer: "Potassium" },
                    { question: "White Muscle Disease is caused by a deficiency of:", options: ["Vitamin D and Calcium", "Vitamin E and Selenium", "Vitamin B12", "Iron"], answer: "Vitamin E and Selenium" },
                    { question: "In traumatic rhabdomyolysis, what is the absolute therapeutic priority to protect kidneys?", options: ["Antibiotics", "Aggressive fluid therapy", "Cortisone", "Rest"], answer: "Aggressive fluid therapy" },
                    { question: "Myoglobinuria predisposes to which organ pathology?", options: ["Acute hepatitis", "Acute kidney injury", "Pneumonia", "Pancreatitis"], answer: "Acute kidney injury" },
                    { question: "Which of the following is an example of infectious myositis?", options: ["Immune-mediated Polymyositis", "Clostridial myositis (Gas Gangrene)", "Masticatory Muscle Myositis", "RER"], answer: "Clostridial myositis (Gas Gangrene)" },
                    { question: "How is hematuria differentiated from pigmenturia (myo/hemoglobinuria) on urine sediment?", options: ["Hematuria has visible RBCs (red sediment)", "Hematuria has clear urine", "Cannot be differentiated", "Pigmenturia has bacteria"], answer: "Hematuria has visible RBCs (red sediment)" },
                    { question: "In Labrador Retrievers, which genetic condition causes exertional rhabdomyolysis?", options: ["PSSM", "EIC (Exercise-Induced Collapse)", "HYPP", "DM"], answer: "EIC (Exercise-Induced Collapse)" },
                    { question: "NSAIDs in a patient with myoglobinuria should be used:", options: ["Always at high doses", "With caution and only if well hydrated", "Never", "Orally"], answer: "With caution and only if well hydrated" },
                    { question: "Which metabolic condition in cats can cause severe muscle weakness and rhabdomyolysis?", options: ["Hyperkalemia", "Hypokalemia", "Hyperglycemia", "Hyponatremia"], answer: "Hypokalemia" }
                ]
            };
            
            const audioFile = 'audio_approccio_rabdomiolisi.mp3'; 
            
            let currentLanguage = localStorage.getItem('language') || 'it';
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let activeTTSButton = null;

            function stopSpeech() {
                if (synth.speaking || synth.paused) synth.cancel();
            }
            
            function speak(text, button) {
                if (activeTTSButton === button && currentUtterance) {
                    if (synth.paused) { synth.resume(); button.classList.add('playing'); } 
                    else if (synth.speaking) { synth.pause(); button.classList.remove('playing'); }
                    return; 
                }
                stopSpeech();
                if(activeTTSButton) activeTTSButton.classList.remove('playing');

                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentLanguage === 'it' ? 'it-IT' : 'en-US';
                
                const cleanup = () => {
                    if (button) button.classList.remove('playing');
                    // Fix: only clear global state if we are cleaning up the *current* utterance
                    if (activeTTSButton === button) {
                        activeTTSButton = null;
                        currentUtterance = null;
                    }
                };

                currentUtterance.onend = cleanup;
                currentUtterance.onerror = (event) => {
                     if (event.error !== 'canceled' && event.error !== 'interrupted') {
                        console.error('An error occurred with speech synthesis:', event.error);
                     }
                    cleanup();
                };
                
                activeTTSButton = button;
                button.classList.add('playing');
                synth.speak(currentUtterance);
            }

            let sound = null;

            function initHowler() {
                if (sound) sound.unload();
                
                const playIcon = document.getElementById('play-icon');
                const pauseIcon = document.getElementById('pause-icon');

                sound = new Howl({
                    src: [audioFile],
                    html5: true, 
                    onplay: () => { 
                        if (playIcon) playIcon.classList.add('hidden'); 
                        if (pauseIcon) pauseIcon.classList.remove('hidden'); 
                    },
                    onpause: () => { 
                        if (playIcon) playIcon.classList.remove('hidden'); 
                        if (pauseIcon) pauseIcon.classList.add('hidden'); 
                    },
                    onend: () => { 
                        if (playIcon) playIcon.classList.remove('hidden'); 
                        if (pauseIcon) pauseIcon.classList.add('hidden'); 
                    },
                    onloaderror: (id, msg) => {
                        console.error("Error loading audio:", msg);
                        const audioDesc = document.querySelector('[data-lang-key="audioDesc"]');
                        if (audioDesc) audioDesc.textContent = currentLanguage === 'it' ? "File audio non trovato." : "Audio file not found.";
                    },
                    onplayerror: (id, msg) => {
                        console.error("Error playing audio:", msg);
                        const audioDesc = document.querySelector('[data-lang-key="audioDesc"]');
                        if (audioDesc) audioDesc.textContent = currentLanguage === 'it' ? "Impossibile riprodurre l'audio." : "Could not play audio.";
                    }
                });
            }

            const playPauseBtn = document.getElementById('audio-play-pause');
            if (playPauseBtn) {
                playPauseBtn.addEventListener('click', () => {
                    if (!sound || sound.state() === 'unloaded') {
                        initHowler(); 
                    }
                    
                    if (sound) {
                        if (sound.playing()) {
                            sound.pause();
                        } else {
                            sound.play(); 
                        }
                    }
                });
            }

            function setupTTSListeners() {
                // Clear existing listeners by replacing nodes
                document.querySelectorAll('.tts-button').forEach(button => {
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                    
                    newButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        e.preventDefault();
                        
                        let textToRead = '';
                        const parentElement = newButton.parentElement;

                        // Case 1: H1 (Page Title)
                        if (parentElement.tagName === 'H1' && parentElement.dataset.langKey === 'pageTitle') {
                            const titleClone = parentElement.cloneNode(true);
                            const btnInClone = titleClone.querySelector('.tts-button');
                            if(btnInClone) btnInClone.remove();
                            textToRead = titleClone.textContent.trim();
                            const subtitle = document.querySelector('[data-lang-key="pageSubtitle"]');
                            if(subtitle) {
                                textToRead += '. ' + subtitle.textContent.trim();
                            }
                        }
                        // Case 2: H2 (Summary Title) - read full content
                        else if (parentElement.tagName === 'H2') {
                            const section = parentElement.closest('section');
                            const titleClone = parentElement.cloneNode(true);
                            const btnInClone = titleClone.querySelector('.tts-button');
                            if(btnInClone) btnInClone.remove();
                            textToRead = titleClone.textContent.trim();

                            if (section && section.id === 'riassunto') {
                                const content = section.querySelector('[data-lang-key="summaryContent"]');
                                if (content) {
                                    // Extract text content and insert pauses after headings
                                    const contentClone = content.cloneNode(true);
                                    contentClone.querySelectorAll('h3, h4').forEach(el => {
                                        el.textContent = '. ' + el.textContent.trim() + '. ';
                                    });
                                    textToRead += '. ' + contentClone.textContent.trim().replace(/\s\s+/g, ' ');
                                }
                            }
                        } 
                        // Case 3: H3 (Quiz Question)
                        else if (parentElement.tagName === 'H3' && parentElement.closest('#quiz-container')) {
                            const questionTextNode = parentElement.querySelector('span:first-child');
                            if (questionTextNode) textToRead = questionTextNode.textContent.trim().replace(/^\d+\.\s*/, '');
                        }
                        // Case 4: Quiz Option (inside label span)
                        else if (parentElement.closest('label')) {
                            const label = parentElement.closest('label');
                            const answerTextNode = label.querySelector('span:first-child');
                            if (answerTextNode) textToRead = answerTextNode.textContent.trim();
                        }
                        
                        // Stop Howler audio if running
                        if (sound && sound.playing()) sound.stop();
                        
                        if (textToRead) speak(textToRead, newButton);
                    });
                });
            }

            function loadQuiz(lang) {
                const quizContainer = document.getElementById('quiz-container');
                quizContainer.innerHTML = '';
                document.getElementById('quiz-results').innerHTML = ''; 
                
                quizData[lang].forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question p-4 rounded-lg';
                    
                    const optionsHtml = q.options.map(o => `
                        <li class="quiz-option p-2 rounded hover:bg-cyan-50">
                            <label class="flex items-start justify-between w-full cursor-pointer">
                                <span class="flex-grow pr-4">
                                    <input type="radio" name="q${index}" value="${o}" class="mr-3 mt-1 text-cyan-600 focus:ring-cyan-500">
                                    ${o}
                                </span>
                                <span class="tts-button flex-shrink-0 ml-2">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg>
                                </span>
                            </label>
                        </li>
                    `).join('');

                    // Add the question and the TTS button next to the question text
                    questionDiv.innerHTML = `
                        <h3 class="flex items-center text-lg font-semibold mb-3 border-none">
                            <span class="flex-grow pr-4">${index + 1}. ${q.question}</span>
                            <span class="tts-button flex-shrink-0">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z"/></svg>
                            </span>
                        </h3>
                        <ul class="space-y-1">${optionsHtml}</ul>
                    `;
                    quizContainer.appendChild(questionDiv);
                });
            }

            function updateLanguage(lang) {
                // Stop any speaking/audio before switching language
                stopSpeech();
                if (sound && sound.playing()) sound.stop();
                if(activeTTSButton) activeTTSButton.classList.remove('playing');

                document.documentElement.lang = lang;
                document.getElementById('lang-toggle').textContent = lang === 'it' ? 'EN' : 'IT';
                
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.dataset.langKey;
                    if (translations[key] && translations[key][lang]) {
                        if (key.includes('Content') || key === 'bibliographyContent') {
                            element.innerHTML = translations[key][lang];
                        } else {
                            // Text update for standard elements, handle the potential TTS button existence
                            const ttsButton = element.querySelector('.tts-button');
                            element.textContent = translations[key][lang];
                            if(ttsButton) element.appendChild(ttsButton); // Re-add button if present (using same node reference)
                        }
                    }
                });
                
                // Show/Hide Audio section based on language
                const navAudio = document.querySelector('a[data-lang-key="navAudio"]');
                const sectionAudio = document.getElementById('audio');
                if (lang === 'en') {
                    if(navAudio) navAudio.style.display = 'none';
                    if(sectionAudio) sectionAudio.style.display = 'none';
                } else {
                    if(navAudio) navAudio.style.display = 'block';
                    if(sectionAudio) sectionAudio.style.display = 'block';
                }

                const dsaToggle = document.getElementById('accessibility-toggle');
                if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = lang === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = lang === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
                
                loadQuiz(lang);
                setupTTSListeners(); 
            }
            
            document.getElementById('lang-toggle').addEventListener('click', () => {
                currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
                localStorage.setItem('language', currentLanguage);
                updateLanguage(currentLanguage);
            });

            document.getElementById('accessibility-toggle').addEventListener('click', () => {
                document.body.classList.toggle('dsa-mode');
                const dsaToggle = document.getElementById('accessibility-toggle');
                 if (document.body.classList.contains('dsa-mode')) {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Vista Standard' : 'Standard View';
                } else {
                    dsaToggle.textContent = currentLanguage === 'it' ? 'Accessibilit√†' : 'Accessibility';
                }
            });

            document.getElementById('submit-quiz').addEventListener('click', () => {
                let score = 0;
                const questions = document.querySelectorAll('.quiz-question');
                quizData[currentLanguage].forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    questions[index].classList.remove('correct', 'incorrect');
                    if (selected) {
                        if (selected.value === q.answer) {
                            score++;
                            questions[index].classList.add('correct');
                        } else {
                            questions[index].classList.add('incorrect');
                        }
                    } else {
                        questions[index].classList.add('incorrect');
                    }
                });
                const resultsContainer = document.getElementById('quiz-results');
                const resultText = {
                    it: `Hai risposto correttamente a ${score} su ${quizData.it.length} domande.`,
                    en: `You answered ${score} out of ${quizData.en.length} questions correctly.`
                };
                resultsContainer.textContent = resultText[currentLanguage];
            });
            
            // Initialization
            updateLanguage(currentLanguage);
        });
    </script>
</body>
</html>
